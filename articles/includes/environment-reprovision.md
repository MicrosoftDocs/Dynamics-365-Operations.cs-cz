<span data-ttu-id="d9aec-101">Při kopírování databáze mezi prostředími budete muset spustit nástroj opětovného zřízení prostředí předtím, než bude kopírovaná databáze plně funkční, abyste se ujistili, že jsou všechny komponenty Commerce aktuální.</span><span class="sxs-lookup"><span data-stu-id="d9aec-101">When copying a database between environments, you will need to run the environment re-provisioning tool before the copied database is fully functional, to ensure that all Commerce components are up-to-date.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d9aec-102">Doporučujeme spustit tento postup bez ohledu na to, zda používáte komponenty Commerce nebo ne, protože funkce Commerce je součástí všech prostředí.</span><span class="sxs-lookup"><span data-stu-id="d9aec-102">We recommend that you run this procedure whether you are using Commerce components or not, because Commerce functionality is included in all environments.</span></span> 

<span data-ttu-id="d9aec-103">Než budete pokračovat, musíte se ujistit, že jsou splněny následující předpoklady:</span><span class="sxs-lookup"><span data-stu-id="d9aec-103">Before you continue, you must make sure that the following prerequisites are met:</span></span>
1. <span data-ttu-id="d9aec-104">Pokud upgradujete na vydání z července 2017 (také známé jako 7.2) 7.2.11792.56024, před spuštěním upgradu dat v tomto prostředí použijte v cílovém prostředí následující opravy aplikace hotfix X++.</span><span class="sxs-lookup"><span data-stu-id="d9aec-104">If you are upgrading to the July 2017 release (also known as 7.2) 7.2.11792.56024, apply the following application X++ hotfixes in the destination environment before running the data upgrade in that environment.</span></span> <span data-ttu-id="d9aec-105">Zabráníte tím různým chybám, ke kterým dochází během upgradu dat:</span><span class="sxs-lookup"><span data-stu-id="d9aec-105">These will prevent various errors occurring during the data upgrade:</span></span>

    - <span data-ttu-id="d9aec-106">KB 4036156 - Upgrade podverze aplikace Retail - Není zadána číselná řada varianty.</span><span class="sxs-lookup"><span data-stu-id="d9aec-106">KB 4036156 - Retail minor version upgrade - 'Variant number sequence is not set.'</span></span> <span data-ttu-id="d9aec-107">Tento balíček oprav rovněž zahrnuje KB 4035399 a KB 4035751.</span><span class="sxs-lookup"><span data-stu-id="d9aec-107">This fix package also includes KB 4035399 and KB 4035751.</span></span> <span data-ttu-id="d9aec-108">Mějte na paměti, že pro použití tohoto balíčku musíte mít minimálně aktualizaci Platform Update 9.</span><span class="sxs-lookup"><span data-stu-id="d9aec-108">Note that you must have a minimum of Platform Update 9 to use this package.</span></span> <span data-ttu-id="d9aec-109">Pokud si nejste jisti, nainstalujte nejnovější binární soubory.</span><span class="sxs-lookup"><span data-stu-id="d9aec-109">If you are unsure, install the latest binaries.</span></span>
    
2. <span data-ttu-id="d9aec-110">Pokud upgradujete z Microsoft Dynamics AX 2012, před spuštěním upgradu dat nainstalujte následující opravy aplikace hotfix X++:</span><span class="sxs-lookup"><span data-stu-id="d9aec-110">If you are upgrading from Microsoft Dynamics AX 2012, install the following application X++ fixes in the destination environment before you run the data upgrade:</span></span>
    - <span data-ttu-id="d9aec-111">KB 4033183 - Dynamics AX 2012 R2 nebo Dynamics AX 2012 R3 Pre-CU8 , upgrade mimo Retail se nezdařil se zprávou Objekt nebyl nalezen pro dbo.RETAILTILLLAYOUTZONE.</span><span class="sxs-lookup"><span data-stu-id="d9aec-111">KB 4033183 - Dynamics AX 2012 R2 or Dynamics AX 2012 R3 Pre-CU8 non-retail upgrade fails with Object not found for dbo.RETAILTILLLAYOUTZONE.</span></span>
    - <span data-ttu-id="d9aec-112">KB 4040692 - Upgrade Dynamics AX 2012 R3 na Microsoft Dynamics 365 for Operations 7.2 se nezdařil na RetailSalesLine duplicitním indexu na SalesLineIdx.</span><span class="sxs-lookup"><span data-stu-id="d9aec-112">KB 4040692 - Dynamics AX 2012 R3 to Microsoft Dynamics 365 for Operations 7.2 upgrade fails on RetailSalesLine duplicate index on SalesLineIdx.</span></span>
    - <span data-ttu-id="d9aec-113">KB 4035490 - Problém s výkonem skriptu upgradu pole GeneralJournalAccountEntry MainAccount.</span><span class="sxs-lookup"><span data-stu-id="d9aec-113">KB 4035490 - Performance issue with GeneralJournalAccountEntry MainAccount field upgrade script.</span></span>


<span data-ttu-id="d9aec-114">Postupujte podle těchto kroků pro spuštění nástroje opětovného zřízení prostředí.</span><span class="sxs-lookup"><span data-stu-id="d9aec-114">Follow these steps to run the Environment reprovisioning tool.</span></span>

1. <span data-ttu-id="d9aec-115">V knihovně sdíleného majetku zvolte **Nasaditelný balíček softwaru**.</span><span class="sxs-lookup"><span data-stu-id="d9aec-115">In the Shared asset library, select **Software deployable package**.</span></span>
2. <span data-ttu-id="d9aec-116">Stáhněte nástroj opětovného zřízení prostředí.</span><span class="sxs-lookup"><span data-stu-id="d9aec-116">Download the Environment reprovisioning tool.</span></span>
3. <span data-ttu-id="d9aec-117">V knihovně majetku vašeho projektu zvolte **Nasaditelný balíček softwaru**.</span><span class="sxs-lookup"><span data-stu-id="d9aec-117">In the asset library for your project, select **Software deployable package**.</span></span>
4. <span data-ttu-id="d9aec-118">Zvolte **Nový** pro vytvoření nového balíčku.</span><span class="sxs-lookup"><span data-stu-id="d9aec-118">Select **New** to create a new package.</span></span>
5. <span data-ttu-id="d9aec-119">Zadejte název a popis balíčku.</span><span class="sxs-lookup"><span data-stu-id="d9aec-119">Enter a name and description for the package.</span></span> <span data-ttu-id="d9aec-120">Jako název balíčku můžete použít **Nástroj opětovného zřízení prostředí**.</span><span class="sxs-lookup"><span data-stu-id="d9aec-120">You can use **Environment reprovisioning tool** as the package name.</span></span>
6. <span data-ttu-id="d9aec-121">Načtěte balíček, který jste dříve stáhli.</span><span class="sxs-lookup"><span data-stu-id="d9aec-121">Upload the package that you downloaded earlier.</span></span>
7. <span data-ttu-id="d9aec-122">Na stránce **Podrobnosti prostředí** pro vaše cílové prostředí zvolte **Spravovat** > **Použít aktualizace**.</span><span class="sxs-lookup"><span data-stu-id="d9aec-122">On the **Environment details** page for your target environment, select **Maintain** > **Apply updates**.</span></span>
8. <span data-ttu-id="d9aec-123">Zvolte nástroj opětovného zřízení prostředí, který jste dříve odeslali, a poté pro použití balíčku zvolte **Použít**.</span><span class="sxs-lookup"><span data-stu-id="d9aec-123">Select the Environment reprovisioning tool that you uploaded earlier, and then select **Apply** to apply the package.</span></span>
9. <span data-ttu-id="d9aec-124">Sledujte průběh nasazení balíčku.</span><span class="sxs-lookup"><span data-stu-id="d9aec-124">Monitor the progress of the package deployment.</span></span> 

<span data-ttu-id="d9aec-125">Další informace o použití nasaditelného balíčku naleznete v tématu [Použití nasaditelného balíčku](../deployment/create-apply-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="d9aec-125">For more information about how to apply a deployable package, see [Apply a deployable package](../deployment/create-apply-deployable-package.md).</span></span> <span data-ttu-id="d9aec-126">Další informace o ručním použití nasaditelného balíčku naleznete v tématu [Instalace nasaditelného balíčku](../deployment/install-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="d9aec-126">For more information about how to manually apply a deployable package, see [Install a deployable package](../deployment/install-deployable-package.md).</span></span>
