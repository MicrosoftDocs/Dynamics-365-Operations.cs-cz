---
title: Konfigurace zdrojů dat vyhledávání pro použití parametrů specifických pro aplikace elektronického výkaznictví
description: V tomto tématu je vysvětleno, jak lze konfigurovat zdroje dat vyhledávání ve formátech elektronického vykazování (ER) pro použití parametrů specifických pro aplikaci ER.
author: NickSelin
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 131d14f1f1aa329bd71b1f8a4015192736bd8e44
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/11/2021
ms.locfileid: "6022568"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a><span data-ttu-id="7564b-103">Konfigurace zdrojů dat vyhledávání pro použití parametrů specifických pro aplikace elektronického výkaznictví</span><span class="sxs-lookup"><span data-stu-id="7564b-103">Configure Lookup data sources to use ER application-specific parameters</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="7564b-104">Funkce pro specifické parametry aplikace [elektronické výkaznictví (ER)](general-electronic-reporting.md) vám umožňují konfigurovat filtrování dat ve formátu ER tak, aby bylo založeno na sadě abstraktních pravidel.</span><span class="sxs-lookup"><span data-stu-id="7564b-104">The [Electronic reporting (ER)](general-electronic-reporting.md) application-specific parameters feature lets you configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="7564b-105">Tuto sadu pravidel lze nakonfigurovat tak, aby používala zdroje dat typu **Vyhledávání**, které jsou k dispozici ve formátu ER.</span><span class="sxs-lookup"><span data-stu-id="7564b-105">This set of rules can be configured to use the data source of the **Lookup** type that is available in an ER format.</span></span> <span data-ttu-id="7564b-106">Můžete pak specifikovat skutečná pravidla nad rámec návrhářů komponent ER pomocí uživatelského rozhraní (UI), které je generováno automaticky na základě nastavení zdroje dat **Vyhledávání** odpovídajícího formátu ER a aktuálních dat právnické osoby.</span><span class="sxs-lookup"><span data-stu-id="7564b-106">You can then specify real rules beyond the ER components designers by using the user interface (UI) that is automatically generated based on the settings of the **Lookup** data source of the corresponding ER format and the current legal entity data.</span></span> <span data-ttu-id="7564b-107">Nakonec k zadaným pravidlům bude mít přístup zdroj dat **Vyhledávání** formátu ER při spuštění tohoto formátu ER.</span><span class="sxs-lookup"><span data-stu-id="7564b-107">Eventually, the specified rules will be accessed by the ER format's **Lookup** data source when this ER format is executed.</span></span>

> [!NOTE]
> <span data-ttu-id="7564b-108">Pomocí nakonfigurovaných zdrojů dat upravitelného formátu ER můžete určit, jaká data aplikace se použijí ke konfiguraci skutečných pravidel.</span><span class="sxs-lookup"><span data-stu-id="7564b-108">Use the configured data sources of the editable ER format to specify what application data is used to configure real rules.</span></span>

<span data-ttu-id="7564b-109">Použijte [Návrhář operací ER](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) k přenesení zdroje dat **Vyhledávání** do svého formátu ER.</span><span class="sxs-lookup"><span data-stu-id="7564b-109">Use the [ER Operations designer](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) to bring a data source of the **Lookup** type in to your ER format.</span></span> <span data-ttu-id="7564b-110">Zdroj dat musí být nakonfigurován tak, aby popisoval, jak vypadají vaše abstraktní pravidla, včetně následujících:</span><span class="sxs-lookup"><span data-stu-id="7564b-110">The data source must be configured to describe how your abstract rules look, including the following:</span></span>

   - <span data-ttu-id="7564b-111">Sada parametrů určitého datového typu, jehož hodnota je poskytována k určení jediného pravidla.</span><span class="sxs-lookup"><span data-stu-id="7564b-111">The parameter set of certain data type whose value is provided to specify a single rule.</span></span>
   - <span data-ttu-id="7564b-112">Typ hodnoty určitého datového typu, který je vrácen jedním pravidlem, když je toto pravidlo považováno za nejvhodnější mezi jinými.</span><span class="sxs-lookup"><span data-stu-id="7564b-112">The value type of certain data type that is returned by a single rule when this rule is considered the most appropriate among others.</span></span>

<span data-ttu-id="7564b-113">Můžete nakonfigurovat následující typy zdrojů dat **Vyhledávání** v závislosti na typu hodnoty, která je vrácena libovolným nakonfigurovaným pravidlem:</span><span class="sxs-lookup"><span data-stu-id="7564b-113">You can configure the following types of **Lookup** data sources depending on the type of value that is returned by any configured rule:</span></span>

   - <span data-ttu-id="7564b-114">Použijte typ **Datový model\Vyhledávání**, když musí být vrácena hodnota výčtu modelu.</span><span class="sxs-lookup"><span data-stu-id="7564b-114">Use the **Data model\Lookup** type when a model enumeration value must be returned.</span></span>
   - <span data-ttu-id="7564b-115">Použijte typ **Dynamics 365 Operations\vyhledávání**, když musí být vrácen hodnota výčtu aplikace nebo hodnota [rozšířeného datového typu](../extensibility/extensible-edts.md) aplikace.</span><span class="sxs-lookup"><span data-stu-id="7564b-115">Use the **Dynamics 365 Operations\Lookup** type when an application enumeration value or an application [extended data type](../extensibility/extensible-edts.md) value must be returned.</span></span>
   - <span data-ttu-id="7564b-116">Použijte typ **Výčet formátu\Vyhledávání**, když musí být vrácena hodnota výčtu formátu.</span><span class="sxs-lookup"><span data-stu-id="7564b-116">Use the **Format enumeration\Lookup** type when a format enumeration value must be returned.</span></span>

<span data-ttu-id="7564b-117">Následující obrázek ukazuje, jak lze konfigurovat výčet formátu ve vzorovém formátu ER.</span><span class="sxs-lookup"><span data-stu-id="7564b-117">The following illustration shows how a format enumeration can be configured in the sample ER format.</span></span>

   ![Zobrazení výčtu formátu jako základu pro nakonfigurovaný zdroj dat vyhledávání](./media/er-lookup-data-sources-img1.gif)

<span data-ttu-id="7564b-119">Následující obrázek ukazuje komponenty formátu, které byly nakonfigurovány tak, aby vykazovaly různé typy daní v jiné části generované sestavy.</span><span class="sxs-lookup"><span data-stu-id="7564b-119">The following illustration shows the format components that were configured to report different type of taxes in a different section of a generated report.</span></span>

   ![Zobrazení sekcí formátu pro samostatné hlášení různých typů daní](./media/er-lookup-data-sources-img2.png)

<span data-ttu-id="7564b-121">Následující obrázek ukazuje, jak návrhář operací ER umožňuje přidání zdroje dat typu **Výčet formátu\Vyhledávání**.</span><span class="sxs-lookup"><span data-stu-id="7564b-121">The following illustration shows how the ER Operations designer allows the addition of a data source of the **Format enumeration\Lookup** type.</span></span>  <span data-ttu-id="7564b-122">Přidaný zdroj dat je nakonfigurován jako vracející hodnotu výčtu formátu `List of taxation levels`.</span><span class="sxs-lookup"><span data-stu-id="7564b-122">The added data source is configured as returning a value of the `List of taxation levels` format enumeration.</span></span>

   ![Přidání zdroje dat ER typu Výčet formátu\Vyhledávání](./media/er-lookup-data-sources-img3.gif)

<span data-ttu-id="7564b-124">Následující obrázek ukazuje, jak je přidaný zdroj dat nakonfigurován pro použití pole **Kód** seznamu záznamů **Model.Data.Tax** zdroje dat **Model** jako parametru, který musí být zadán pro každé nakonfigurované pravidlo.</span><span class="sxs-lookup"><span data-stu-id="7564b-124">The following illustration shows how the added data source is configured to use the **Code** field of the **Model.Data.Tax** record list of the **Model** data source as a parameter that must be specified for every configured rule.</span></span>

![Konfigurace parametrů přidaného zdroje dat typu Výčet formátu\Vyhledávání](./media/er-lookup-data-sources-img4.gif)

<span data-ttu-id="7564b-126">Přidaný zdroj dat `Model.Data.Tax` je nakonfigurován tak, aby určoval daňový kód pro každé nakonfigurované pravidlo přístupem k záznamům tabulky aplikace **TaxTable**.</span><span class="sxs-lookup"><span data-stu-id="7564b-126">The added `Model.Data.Tax` data source is configured to specify a tax code for every configured rule by accessing records of the **TaxTable** application table.</span></span>

   ![Kontrola zdroje dat vyhledávání jedné firmy typu Výčet formátu\Vyhledávání](./media/er-lookup-data-sources-img5.gif)

<span data-ttu-id="7564b-128">Pravidla vyhledávání pro vybraný formát ER můžete nastavit pomocí uživatelského rozhraní, které je automaticky v souladu se strukturou nakonfigurovaného zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="7564b-128">You can set up the lookup rules for the selected ER format by using the UI that is automatically aligned with the structure of the configured data source.</span></span> <span data-ttu-id="7564b-129">V současné době toto uživatelské rozhraní vyžaduje, abyste pro každé pravidlo zadali vrácenou hodnotu jako hodnotu výčtu formátu `List of taxation levels` a daňový kód jako parametr.</span><span class="sxs-lookup"><span data-stu-id="7564b-129">Currently, this UI requires that for each rule, you specify the returned value as the `List of taxation levels` format enumeration value as well as the tax code as a parameter.</span></span>

   ![Nastavte pravidla pro nakonfigurovaný zdroj dat](./media/er-lookup-data-sources-img6.gif)

<span data-ttu-id="7564b-131">Následující obrázek ukazuje, jak lze zdroj dat `Model.Data.Summary.LevelByLookup` typu **Vypočítané pole** nakonfigurovat tak, aby volal nakonfigurovaný zdroj dat **Vyhledávání** poskytující požadované parametry.</span><span class="sxs-lookup"><span data-stu-id="7564b-131">The following illustration shows how the `Model.Data.Summary.LevelByLookup` data source of the **Calculated field** type can be configured to call the configured **Lookup** data source providing the required parameters.</span></span> <span data-ttu-id="7564b-132">Ke zpracování tohoto volání za běhu, ER prochází seznam nakonfigurovaných pravidel v definované sekvenci a vyhledá první pravidlo, které splňuje zadané podmínky.</span><span class="sxs-lookup"><span data-stu-id="7564b-132">To process this call at runtime, ER goes through the list of configured rules in the defined sequence to locate the first rule that satisfies the provided conditions.</span></span> <span data-ttu-id="7564b-133">V tomto příkladu je to pravidlo, které obsahuje daňový kód, který odpovídá uvedenému.</span><span class="sxs-lookup"><span data-stu-id="7564b-133">In this example, it's the rule that contains the tax code that matches the provided one.</span></span> <span data-ttu-id="7564b-134">Výsledkem je nalezení nejvhodnějšího pravidla a tento zdroj dat vrátí hodnotu výčtu, která je nakonfigurována pro nalezené pravidlo.</span><span class="sxs-lookup"><span data-stu-id="7564b-134">As the result, the most appropriate rule is found and the enumeration value that is configured for the found rule is returned by this data source.</span></span>

> [!NOTE]
> <span data-ttu-id="7564b-135">Pokud není nalezeno žádné použitelné pravidlo, je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="7564b-135">An exception is thrown when no applicable rule is found.</span></span> <span data-ttu-id="7564b-136">Chcete-li těmto výjimkám zabránit, nakonfigurujte na konci seznamu pravidel další pravidla pro zpracování případů, kdy je zadána nekonfigurovaná hodnota nebo žádná hodnota.</span><span class="sxs-lookup"><span data-stu-id="7564b-136">To prevent these exceptions, configure additional rules at the end of the rules list to handle cases when a non-configured value or no value is provided.</span></span> <span data-ttu-id="7564b-137">Podle potřeby použijte možnosti **\*Není prázdné\*** a **\*Prázdné\***.</span><span class="sxs-lookup"><span data-stu-id="7564b-137">Use the **\*Not blank**\* and **\*Blank**\* options accordingly.</span></span>  
>
> ![Přidejte zdroj dat pro volání nakonfigurovaného zdroje dat vyhledávání](./media/er-lookup-data-sources-img7.png)

<span data-ttu-id="7564b-139">Když nastavíte možnost **Mezi firmami** na **Ano** pro upravitelný zdroj dat vyhledávání, přidáte nový požadovaný parametr **Firma** k sadě parametrů tohoto zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="7564b-139">When you set the **Cross-company** option to **Yes** for the editable lookup data source, you add a new required **Company** parameter to the set of parameters of this data source.</span></span> <span data-ttu-id="7564b-140">Hodnota parametru **Společnost** musí být zadána za běhu, když je volán zdroj dat vyhledávání.</span><span class="sxs-lookup"><span data-stu-id="7564b-140">The value of the **Company** parameter must be specified at runtime when the lookup data source is called.</span></span> <span data-ttu-id="7564b-141">Když je za běhu zadán kód společnosti, použijí se pravidla nakonfigurovaná pro tuto společnost k nalezení nejvhodnějšího pravidla a vrátí se odpovídající hodnota.</span><span class="sxs-lookup"><span data-stu-id="7564b-141">When the company code is specified at runtime, the rules configured for this company are used to find the most appropriate rule, and the corresponding value is returned.</span></span> <span data-ttu-id="7564b-142">Následující ilustrace ukazuje, jak to můžete udělat a jak se změní sada parametrů upravitelného zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="7564b-142">The following illustration shows how you can do this and how the set of parameters of the editable data source is changed.</span></span>

   ![Kontrola zdroje dat vyhledávání mezi firmami typu Výčet formátu\Vyhledávání](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> <span data-ttu-id="7564b-144">Vyberte každou společnost zvlášť a nakonfigurujte sadu pravidel pro tento zdroj dat vyhledávání upravitelného formátu ER.</span><span class="sxs-lookup"><span data-stu-id="7564b-144">Select every company seperately to configure the set of rules for this lookup data source of the editable ER format.</span></span> <span data-ttu-id="7564b-145">Výjimka je vyvolána za běhu, když je voláno vyhledávání mezi společnostmi s kódem společnosti, pro kterou nebylo nastavení vyhledávání dokončeno.</span><span class="sxs-lookup"><span data-stu-id="7564b-145">An exception is thrown at runtime when the cross-company lookup is called with the code of the company for which the lookup setting was not completed.</span></span>
>
> <span data-ttu-id="7564b-146">Ujistěte se, že udělujete oprávnění uživateli, který spouští formát ER s mezipodnikovým zdrojem dat **Vyhledávání** pro přístup k datům každé společnosti, která je v rozsahu tohoto zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="7564b-146">Make sure that you grant permissions for a user who runs the ER format with the cross-company **Lookup** data source to access the data of every company that is in scope of this data source.</span></span> <span data-ttu-id="7564b-147">Jinak je v době běhu vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="7564b-147">Otherwise, an exception is thrown at runtime.</span></span>

<span data-ttu-id="7564b-148">Od verze 10.0.19 jsou k dispozici rozšířené možnosti zdrojů dat **Vyhledávání**.</span><span class="sxs-lookup"><span data-stu-id="7564b-148">Starting in version 10.0.19, the extended capabilities of the **Lookup** data sources are available.</span></span> <span data-ttu-id="7564b-149">Když nastavíte možnost **Rozšířené** na **Ano** pro upravitelný zdroj dat vyhledávání, je nakonfigurovaný zdroj dat vyhledávání transformován na strukturovaný zdroj dat, který nabízí další funkce pro analýzu nakonfigurované sady pravidel.</span><span class="sxs-lookup"><span data-stu-id="7564b-149">When you set the **Extended** option to **Yes** for the editable lookup data source, the configured lookup data source is transformed to the structured data source that offers the additional capabilities to analyze the configured set of rules.</span></span> <span data-ttu-id="7564b-150">Následující obrázek znázorňuje tuto transformaci.</span><span class="sxs-lookup"><span data-stu-id="7564b-150">The following illustration shows this transformation.</span></span>

   ![Kontrola strukturovaného zdroje dat vyhledávání typu Výčet formátu\Vyhledávání](./media/er-lookup-data-sources-img9.gif)

- <span data-ttu-id="7564b-152">Podpoložka **Vyhledávání** je navržena jako funkce k nalezení nejvhodnějšího pravidla ze sady konfigurovatelných pravidel na základě poskytnuté sady parametrů.</span><span class="sxs-lookup"><span data-stu-id="7564b-152">The **Lookup** sub-item is designed as a function to find the most appropriate rule from the set of configurable rules based on the provided set of parameters.</span></span>
- <span data-ttu-id="7564b-153">Podpoložka **IsLookupResultSet** je navržena jako funkce, která přijímá zadanou hodnotu základního výčtového zdroje dat a vrací *logickou* hodnotu **True**, když sada pravidel obsahuje alespoň jedno pravidlo, pro které byla zadaná hodnota výčtu nakonfigurována jako vrácená hodnota.</span><span class="sxs-lookup"><span data-stu-id="7564b-153">The **IsLookupResultSet** sub-item is designed as a function to accept the provided value of the base enumeration data source and return the *Boolean* value of **True** when the set of rules contain at least one rule for which the provided enumeration value was configured as a returned value.</span></span> <span data-ttu-id="7564b-154">Tato funkce vrací *logickou* hodnotu **False**, když nejsou nakonfigurována žádná pravidla pro vrácení poskytnuté hodnoty výčtu.</span><span class="sxs-lookup"><span data-stu-id="7564b-154">This function returns the *Boolean* value of **False** when there are no rules configured to return the provided enumeration value.</span></span>
- <span data-ttu-id="7564b-155">Podpoložka **Nastavení** je navržena jako funkce, která vrací sadu nakonfigurovaných pravidel jako záznamy seznamu záznamů.</span><span class="sxs-lookup"><span data-stu-id="7564b-155">The **Setting** sub-item is designed as a function that returns the set of configured rules as records of a record list.</span></span> <span data-ttu-id="7564b-156">Vrácené hodnoty a sada parametrů nakonfigurovaných pravidel jsou prezentovány v každém vráceném záznamu jako pole příslušných datových typů:</span><span class="sxs-lookup"><span data-stu-id="7564b-156">The returned values and the set of parameters of the configured rules are presented in every returned record as fields of the relevant data types:</span></span>

    - <span data-ttu-id="7564b-157">Vrácená hodnota je uvedena jako pole **Výsledek vyhledávání**.</span><span class="sxs-lookup"><span data-stu-id="7564b-157">The returned value is presented as the **Lookup result** field.</span></span>
    - <span data-ttu-id="7564b-158">Konfigurované parametry jsou prezentovány jako pole s názvy parametrů (pole **Kód** v tomto příkladu).</span><span class="sxs-lookup"><span data-stu-id="7564b-158">The configured parameters are presented as fields having names of parameters (**Code** field in this example).</span></span>

<span data-ttu-id="7564b-159">Další informace o tom, jak konfigurovat zdroj dat **Vyhledávání**, viz [Konfigurace formátů ER tak, aby používaly parametry, které jsou specifikovány pro každou právnickou osobu](er-app-specific-parameters-configure-format.md).</span><span class="sxs-lookup"><span data-stu-id="7564b-159">For more information about to how configure the **Lookup** data source, see [Configure ER formats to use parameters that are specified per legal entity](er-app-specific-parameters-configure-format.md).</span></span> <span data-ttu-id="7564b-160">Informace o tom, jak nastavit pravidla vyhledávání, najdete v části [Nastavení parametrů formátu ER na právnickou osobu](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="7564b-160">To learn how to set the Lookup rules, see [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7564b-161">Další prostředky</span><span class="sxs-lookup"><span data-stu-id="7564b-161">Additional resources</span></span>

[<span data-ttu-id="7564b-162">Konfigurace formátů elektronického výkaznictví pro použití parametrů zadaných pro právnickou osobu</span><span class="sxs-lookup"><span data-stu-id="7564b-162">Configure ER formats to use parameters that are specified per legal entity</span></span>](er-app-specific-parameters-configure-format.md)

[<span data-ttu-id="7564b-163">Nastavení parametrů formátu elektronického výkaznictví podle právnické osoby</span><span class="sxs-lookup"><span data-stu-id="7564b-163">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)
