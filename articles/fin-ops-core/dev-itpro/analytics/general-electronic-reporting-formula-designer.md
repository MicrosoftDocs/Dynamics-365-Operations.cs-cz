---
title: Návrhář receptur v elektronickém výkaznictví
description: Toto téma obsahuje obecné informace o použití návrháře receptur v elektronickém výkaznictví (ER).
author: NickSelin
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2dcede0818630329a5608c2d294c9c9f4f749f13
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750125"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="9e5a1-103">Návrhář receptur v elektronickém výkaznictví</span><span class="sxs-lookup"><span data-stu-id="9e5a1-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="9e5a1-104">Toto téma popisuje, jak lze používat návrháře receptur v elektronickém výkaznictví.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="9e5a1-105">Při vytváření formátu pro určitý elektronický dokument pro elektronické výkaznictví můžete použít vzorce k převodu dat za účelem plnění požadavků na plnění a formátování daného dokumentu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="9e5a1-106">Tyto vzorce připomínají vzorce aplikace Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="9e5a1-107">V recepturách jsou podporovány různé typy funkcí: text, datum a čas, matematika, logika, informace a převod datových typů , stejně jako další funkce specifické pro danou obchodní doménu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="9e5a1-108">Přehled návrháře vzorců</span><span class="sxs-lookup"><span data-stu-id="9e5a1-108">Formula designer overview</span></span>

<span data-ttu-id="9e5a1-109">Elektronické výkaznictví podporuje návrháře receptur.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-109">ER supports the formula designer.</span></span> <span data-ttu-id="9e5a1-110">Proto můžete během návrhu konfigurovat výrazy, které lze použít pro následující úkoly za běhu:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="9e5a1-111">Transformujte data přijatá z databáze aplikace, která by měla být zadána do datového modelu elektronického výkaznictví navrženého jako datový zdroj pro formáty elektronického výkaznictví.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="9e5a1-112">(Tyto transformace mohou například zahrnovat filtrování, seskupení a převod typů dat.)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="9e5a1-113">Formátování dat, která musí být odeslána do generovaného elektronické dokument v souladu s rozvržením a podmínkami konkrétního formátu elektronického výkaznictví.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="9e5a1-114">(Formátování může být například provedeno v souladu s požadovaným jazykem, jazykovou verzí nebo kódováním).</span><span class="sxs-lookup"><span data-stu-id="9e5a1-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="9e5a1-115">Kontrola procesu vytváření elektronických dokumentů.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="9e5a1-116">(Například výrazy mohou povolit nebo zakázat výstup konkrétních prvků formátu, v závislosti na zpracování dat.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="9e5a1-117">Mohou rovněž přerušit proces vytváření dokumentu nebo odesílat zprávy uživateli.)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="9e5a1-118">Můžete otevřít stránku **Návrhář receptur** po provedení některé z následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="9e5a1-119">vazba položek zdroje dat na součásti datového modelu,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="9e5a1-120">vazba položek zdroje dat na součásti formátu,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="9e5a1-121">kompletní údržba vypočtených polí, která jsou součástí datových zdrojů.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="9e5a1-122">definování podmínek viditelnosti pro vstupní parametry uživatele,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="9e5a1-123">návrh transformací formátu,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-123">Design a format's transformations.</span></span>
- <span data-ttu-id="9e5a1-124">definování povolení podmínek pro součásti formátu,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="9e5a1-125">definování názvů souborů pro součásti souboru formátu,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="9e5a1-126">definování podmínek pro ověření kontroly procesu,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="9e5a1-127">definování textu zpráv pro ověření kontroly procesu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="9e5a1-128">Datová vazba</span><span class="sxs-lookup"><span data-stu-id="9e5a1-128">Data binding</span></span>

<span data-ttu-id="9e5a1-129">Návrháře receptur elektronického výkaznictví lze použít k definování výrazu, který převádí data přijatá ze zdrojů dat, aby tato data bylo možné zadat v příjemci dat za běhu následujícícmi způsoby:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="9e5a1-130">Ze zdrojů dat aplikace a parametrů spuštění do datového modelu elektronického výkaznictví,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="9e5a1-131">z datového modelu elektronického výkaznictví do formátu elektronického výkaznictví,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="9e5a1-132">Ze zdrojů dat aplikace a parametrů spuštění do formátu elektronického výkaznictví,</span><span class="sxs-lookup"><span data-stu-id="9e5a1-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="9e5a1-133">Následující obrázek znázorňuje návrh výraz tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="9e5a1-134">V tomto příkladu výraz zaokrouhluje hodnotu pole **Intrastat.AmountMST** v tabulce Intrastat na dvě desetinná místa a vrací zaokrouhlenou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="9e5a1-135">[![Výraz datové vazby](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="9e5a1-136">Je možné použít následující obrázek, který znázorňuje návrh výrazu tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="9e5a1-137">V tomto příkladu je výsledek navrženého výrazu zadán do komponenty **Transaction.InvoicedAmount** datového modelu **Vykazování daně**.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="9e5a1-138">[![Používaný výraz datové vazby](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="9e5a1-139">Navržená receptura `ROUND (Intrastat.AmountMST, 2)` zaokrouhluje za běhu hodnotu pole **AmountMST** pro každý záznam v tabulce Intrastat na dvě desetinná místa.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="9e5a1-140">Poté zadá zaokrouhlenou hodnotu do komponenty **Transaction.InvoicedAmount** datového modelu **Vykazování daně**.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="9e5a1-141">Formátování dat</span><span class="sxs-lookup"><span data-stu-id="9e5a1-141">Data formatting</span></span>

<span data-ttu-id="9e5a1-142">Návrháře receptur elektronického výkaznictví lze použít k definování výrazu, který naformátuje data přijatá ze zdrojů dat, aby tato data bylo možné odeslat jako součást generovaného elektronického dokumentu:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="9e5a1-143">Můžete mít formátování, které je třeba použít jako typické pravidlo, které by mělo být znovu použito pro formát.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="9e5a1-144">V takovém případě můžete uvést toto formátování jednou v konfiguraci formátu jako pojmenovanou transformaci, která má výraz formátování.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="9e5a1-145">Tuto pojmenovanou transformaci lze potom propojit s mnoha komponentami formátu, kde výstup musí být formátován podle vytvořeného výrazu formátování.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="9e5a1-146">Následující obrázek znázorňuje návrh transformace tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="9e5a1-147">V tomto příkladu ořeže transformace **TrimmedString** vstupní data typu dat *Řetězec* odstraněním počáteční a koncové mezery.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="9e5a1-148">Vrátí hodnotu oříznutého řetězce.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="9e5a1-149">[![Transformace](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="9e5a1-150">Je možné použít následující obrázek, který znázorňuje návrh transformace tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="9e5a1-151">V tomto příkladu více součástí formátu odesílá text jako výstup do generovaného elektrického dokumentu za běhu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="9e5a1-152">Všechny tyto součásti formátu odkazují na transofmraci **TrimmedString** podle názvu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="9e5a1-153">[![Použitá transformace](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="9e5a1-154">Když součásti formátu, jako je například součást **partyName** na předchozím obrázku, odkazují na transformaci **TrimmedString**, transformace odešle text jako výstup generovaného elektronického dokumentu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="9e5a1-155">Tento text nezahrnuje počáteční a koncové mezery.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="9e5a1-156">Pokud máte formátování, které je nutné použít jednotlivě, můžete toto formátování použít jako jednotlivý výraz vazby konkrétní součásti formátu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="9e5a1-157">Následující obrázek znázorňuje výraz tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="9e5a1-158">V tomto příkladu je součást formátu **partyType** vázána na zdroj dat pomocí výrazu, který převede příchozí data z pole **Model.Company.RegistrationType** ve zdroji dat na text s velkými písmeny.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="9e5a1-159">Výraz pak odešle tento text jako výstup do elektronického dokumentu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="9e5a1-160">[![Použití formátování na jednotlivou součást](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="9e5a1-161">Kontrola procesního toku</span><span class="sxs-lookup"><span data-stu-id="9e5a1-161">Process flow control</span></span>

<span data-ttu-id="9e5a1-162">Návrháře receptur elektronického výkaznictví lze použít k definování výrazů, které se používají k řízení toku procesu generovaných elektronických dokumentů.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="9e5a1-163">K dispozici jsou tyto úlohy:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="9e5a1-164">Definujte podmínky určující, kdy musí být zastaven proces vytvoření dokumentu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="9e5a1-165">Zadejte výrazy, které vytvoří zprávy pro uživatele o zastaveném procesu nebo vyvolají spuštění zpráv protokolu o pokračujícím procesu generování sestav.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="9e5a1-166">Zadejte názvy souborů generovaných elektronických dokumentů a řiďte podmínky jejich vytvoření.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="9e5a1-167">Každé pravidlo procesu řízení toku je navržen jako jednotlivé ověření.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="9e5a1-168">Následující obrázek znázorňuje ověření tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="9e5a1-169">Zde je vysvětlení konfigurace v tomto příkladu:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="9e5a1-170">Ověření je vyhodnoceno, když je uzel **INSTAT** vytvořen během generování souboru XML.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="9e5a1-171">Pokud je seznam transakcí prázdný, ověření zastaví proces spouštění a vrátí hodnotu **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="9e5a1-172">Ověření vrátí chybovou zpráva, která obsahuje textu popisku 70894 v upřednostňovaném jazyce uživatele.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="9e5a1-173">[![Ověření](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="9e5a1-174">Návrhář receptur elektronického výkaznictví lze také použít k vygenerování názvu souboru pro generovaný elektronický dokument a kontrolu procesu vytvoření souboru.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="9e5a1-175">Následující obrázek znázorňuje návrh kontroly procesního toku tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="9e5a1-176">Zde je vysvětlení konfigurace v tomto příkladu:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="9e5a1-177">Seznam záznamů z datového zdroje **model.Intrastat** je rozdělen do dávek.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="9e5a1-178">Každá dávka obsahuje až 1 000 záznamů.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="9e5a1-179">Výstup vytvoří soubor ZIP, který obsahuje jeden soubor ve formátu XML pro každou dávku, která byla vytvořena.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="9e5a1-180">Výraz vrátí název souboru pro generované elektronické dokumenty zřetězením názvu a přípony souboru.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="9e5a1-181">Pro druhou dávku a všechny následné dávky obsahuje název souboru ID dávky jako příponu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="9e5a1-182">Výraz umožňuje (vrácením hodnoty **TRUE**) proces vytváření souborů pro dávky, které obsahují alespoň jeden záznam.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="9e5a1-183">[![Kontrola procesního toku](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="9e5a1-184">Řízení obsahu dokumentů</span><span class="sxs-lookup"><span data-stu-id="9e5a1-184">Document content control</span></span>

<span data-ttu-id="9e5a1-185">Návrhář receptur elektronického výkaznictví lze použít ke konfiguraci výrazů, které určují, která data budou vložena do generovaných elektronických dokumentů za běhu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="9e5a1-186">Tyto výrazy mohou povolit nebo zakázat výstup konkrétních prvků formátu, v závislosti na zpracování dat a konfigurované logice.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="9e5a1-187">Tyto výrazy lze zadat pro jediný prvek formátu v poli **Povoleno** na kartě **Mapování** na stránce **Návrhář operací**.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="9e5a1-188">Výrazy můžete zadat jako logickou podmínku, která vrátí *logickou* hodnotu:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="9e5a1-189">Pokud podmínka vrátí hodnotu **True**, je spuštěn aktuální prvek formátu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="9e5a1-190">Pokud podmínka vrátí hodnotu **False**, aktuální prvek formátu je přeskočen.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="9e5a1-191">Následující obrázek znázorňuje výraz tohoto typu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="9e5a1-192">(Jako příklad použijeme verzi 11.12.11 konfigurace formátu **ISO20022 Credit transfer (NO)**, která je poskytována společností Microsoft.) Součást formátu **XMLheader** je nakonfigurována tak, aby popisovala strukturu zprávy o peněžním převodu podle standardů zpráv ISO 20022 XML.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="9e5a1-193">Součást formátu **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** je konfigurována pro přidání prvku XML **Ustrd** do generované zprávy a vložení informací o úhradě v nestrukturovaném formátu jako textu následujících prvků XML:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="9e5a1-194">Součást **PaymentNotes** slouží ke generování textu poznámek k platbě.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="9e5a1-195">Součást **DelimitedSequence** generuje čísla faktur oddělená čárkou, která slouží k vyrovnání aktuálního peněžního převodu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="9e5a1-196">[![Součásti PaymentNotes a DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="9e5a1-197">Součásti **PaymentNotes** a **DelimitedSequence** jsou označeny otazníkem.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="9e5a1-198">Otazník označuje, že použití součásti je podmíněné.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="9e5a1-199">V tomto případě je použití součástí založeno na následujících kritériích:</span><span class="sxs-lookup"><span data-stu-id="9e5a1-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="9e5a1-200">Výraz `@.PaymentsNotes <> ""` definovaný pro součást **PaymentNotes** umožňuje (vrácením hodnoty **TRUE**) naplnění prvku XML **Ustrd** textem poznámek k platbám, když tento text pro aktuální peněžní převod není prázdný.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="9e5a1-201">[![Výraz pro součást PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="9e5a1-202">Výraz `@.PaymentsNotes = ""` definovaný pro součást **DelimitedSequence** umožňuje (vrácením hodnoty **TRUE**) naplnění prvku XML **Ustrd** seznamem čísel faktur oddělených čárkami, které jsou použity k účtování aktuálního peněžního převodu v případě, že text platby poznámek k platbám k tomuto peněžnímu převodu je prázdný.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="9e5a1-203">[![Výraz pro součást DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="9e5a1-204">V závislosti na tomto nastavení bude generovaná zpráva pro každou platbu dlužníka – prvek XML **Ustrd** – obsahovat buď text poznámek k platbě, nebo, je-li tento text prázdný, seznam čárkami oddělených čísel faktur použitých k účtování této platby.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="9e5a1-205">Ověření konfigurovaných receptur</span><span class="sxs-lookup"><span data-stu-id="9e5a1-205">Validation of configured formulas</span></span>

<span data-ttu-id="9e5a1-206">Na stránce **návrháře receptur** vyberte **Test** pro ověření, jak funguje nakonfigurovaná receptura.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="9e5a1-207">[![Výběr testu pro ověření receptury](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="9e5a1-208">Pokud jsou požadovány hodnoty argumentů receptury, můžete otevřít dialogové okno **Testovat výraz** ze stránky **návrháře receptur**.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="9e5a1-209">Ve většině případů je nutné tyto argumenty ručně definovat, protože nakonfigurované vazby nejsou spuštěny v době návrhu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="9e5a1-210">Na kartě **Výsledek testu** na stránce **návrháře receptur** se zobrazí výsledek spuštění nakonfigurované receptury.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="9e5a1-211">Následující příklad ukazuje, jak lze otestovat recepturu nakonfigurovanou pro doménu zahraničního obchodu, aby bylo jisté, že kód komodity Intrastat obsahuje pouze číslice.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="9e5a1-212">Při testování této receptury můžete použít dialogové okno **Testovat výraz** k určení hodnoty kódu komodity Intrastat pro testování.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="9e5a1-213">[![Určení kódu komodity Intrastat pro testování](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="9e5a1-214">Po zadání kódu komodity Intrastat a výběru možnosti **OK** zobrazí karta **Výsledek testování** na stránce **návrháře receptur** výsledek provedení nakonfigurované receptury.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="9e5a1-215">Poté můžete vyhodnotit, zda je výsledek přijatelný.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="9e5a1-216">Pokud výsledek není přijatelný, můžete recepturu aktualizovat a znovu ji otestovat.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="9e5a1-217">[![Výsledek testu](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="9e5a1-218">Některé receptury nelze testovat v době návrhu.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="9e5a1-219">Receptura může například vrátit výsledek datového typu, který nelze zobrazit na kartě **Výsledek testu**. V tomto případě se zobrazí chybová zpráva oznamující, že recepturu nelze testovat.</span><span class="sxs-lookup"><span data-stu-id="9e5a1-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="9e5a1-220">[![Chybová zpráva](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="9e5a1-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="9e5a1-221">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="9e5a1-221">Additional resources</span></span>

- [<span data-ttu-id="9e5a1-222">Přehled elektronického výkaznictví</span><span class="sxs-lookup"><span data-stu-id="9e5a1-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="9e5a1-223">Jazyk receptur v elektronickém výkaznictví</span><span class="sxs-lookup"><span data-stu-id="9e5a1-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]