---
title: Úložiště záloh šablon ER
description: V tomto tématu je vysvětleno použití úložiště zálohy elektronického vykazování (ER) pro obnovení šablon.
author: NickSelin
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: b41760bb58cbef66146b3f1af6f30c6a35a18727
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/31/2021
ms.locfileid: "5743840"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="9714e-103">Úložiště záloh šablon ER</span><span class="sxs-lookup"><span data-stu-id="9714e-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="9714e-104">[Přehled elektronického výkaznictví](general-electronic-reporting.md) umožňuje podnikovým uživatelům konfiguraci formátů pro odchozí dokumenty v souladu s právními požadavky různých zemí a oblastí.</span><span class="sxs-lookup"><span data-stu-id="9714e-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="9714e-105">Konfigurované formáty ER mohou používat předdefinované šablony pro generování odchozích dokumentů v různých formátech, například sešity Microsoft Excel, dokumenty Microsoft Word nebo dokumenty PDF.</span><span class="sxs-lookup"><span data-stu-id="9714e-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="9714e-106">Šablony jsou vyplněny daty, které vyžaduje nakonfigurovaný datový tok pro generované dokumenty.</span><span class="sxs-lookup"><span data-stu-id="9714e-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="9714e-107">Každý konfigurovaný formát lze publikovat jako součást řešení elektronického vykazování.</span><span class="sxs-lookup"><span data-stu-id="9714e-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="9714e-108">Každé řešení ER lze exportovat z jedné instance Finance and Operations a importovat do jiné instance.</span><span class="sxs-lookup"><span data-stu-id="9714e-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="9714e-109">Systém ER používá možnosti [Konfigurovat správu dokumentů](../../fin-ops/organization-administration/configure-document-management.md) k ponechání požadovaných šablon pro stávající instanci Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="9714e-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="9714e-110">V závislosti na nastavení architektury ER, ukládání objektů Blob Microsoft Azure nebo složku Microsoft SharePoint lze vybrat jako fyzické umístění primárního úložiště pro šablony.</span><span class="sxs-lookup"><span data-stu-id="9714e-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="9714e-111">(Další informace naleznete v tématu [Konfigurace systému elektronického výkaznictví (ER)](electronic-reporting-er-configure-parameters.md).) Tabulka DocuValue obsahuje pro každou šablonu samostatný záznam.</span><span class="sxs-lookup"><span data-stu-id="9714e-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="9714e-112">V každém záznamu ukládá pole **AccessInformation** cestu k souboru šablony, který je umístěn v konfigurovaném umístění úložiště.</span><span class="sxs-lookup"><span data-stu-id="9714e-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="9714e-113">Při správě instancí Finance and Operations se můžete rozhodnout migrovat aktuální instanci do jiného umístění.</span><span class="sxs-lookup"><span data-stu-id="9714e-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="9714e-114">Můžete například migrovat instanci výroby do nového prostředí sandbox.</span><span class="sxs-lookup"><span data-stu-id="9714e-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="9714e-115">Pokud jste nakonfigurovali platformu ER pro ukládání šablon v úložišti objektů Blob, bude tabulka DocuValue v novém prostředí sandbox odkazovat na instanci ukládání objektů Blob v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="9714e-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="9714e-116">K této instanci však nelze přistupovat z prostředí izolovaného prostoru (sandbox), protože proces migrace nepodporuje migraci artefaktů v úložišti objektů BLOB.</span><span class="sxs-lookup"><span data-stu-id="9714e-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="9714e-117">Pokud se tedy pokusíte spustit formát ER, který používá šablonu pro generování obchodních dokumentů, dojde k výjimce a zobrazí se upozornění na chybějící šablonu.</span><span class="sxs-lookup"><span data-stu-id="9714e-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="9714e-118">Také budete navedeni pomocí nástroje čištění ER odstranit a poté znovu importovat konfiguraci formátu ER obsahující šablonu.</span><span class="sxs-lookup"><span data-stu-id="9714e-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="9714e-119">Vzhledem k tomu, že je možné provést několik konfigurací formátu ER, může být tento proces časově náročný.</span><span class="sxs-lookup"><span data-stu-id="9714e-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="9714e-120">Úložiště záloh šablon ER vám může pomoci vytvořit šablony tak, aby byly vždy k dispozici pro generování obchodních dokumentů.</span><span class="sxs-lookup"><span data-stu-id="9714e-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="9714e-121">Tuto funkci lze použít pouze v případě, že jako fyzické úložiště pro šablony ER bylo vybráno úložiště BLOB.</span><span class="sxs-lookup"><span data-stu-id="9714e-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

## <a name="automated-recovery-and-notification"></a><span data-ttu-id="9714e-122">Automatické obnovení a oznámení</span><span class="sxs-lookup"><span data-stu-id="9714e-122">Automated recovery and notification</span></span>

<span data-ttu-id="9714e-123">U této funkce je každá šablona nové konfigurace formátu ER v aktuálním prostředí automaticky uložena do umístění úložiště zálohy pro šablony (tabulka databáze ERDocuDatabaseStorage) v případě, že dojde k následujícím událostem:</span><span class="sxs-lookup"><span data-stu-id="9714e-123">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="9714e-124">Importujete novou konfiguraci formátu ER, která obsahuje šablonu.</span><span class="sxs-lookup"><span data-stu-id="9714e-124">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="9714e-125">Dokončili jste návrh verze konfigurace formátu ER, která obsahuje šablonu.</span><span class="sxs-lookup"><span data-stu-id="9714e-125">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="9714e-126">Záložní kopie šablon jsou migrovány do nové instance modulu Finance and Operations jako součást databáze aplikace.</span><span class="sxs-lookup"><span data-stu-id="9714e-126">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="9714e-127">Je-li pro generování odchozích dokumentů požadována šablona formátu ER, zpracování plateb dodavatelů včetně generování avíza o platbách a kontrolních sestav, například požadovaná šablona není v umístění primárního úložiště nalezena, dojde k následujícím událostem:</span><span class="sxs-lookup"><span data-stu-id="9714e-127">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="9714e-128">Pokud je tato šablona k dispozici v umístění úložiště zálohy, automaticky se převezme z umístění úložiště zálohy, obnoví se do hlavního umístění úložiště a použije se pro aktuální spuštění.</span><span class="sxs-lookup"><span data-stu-id="9714e-128">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="9714e-129">Každému uživateli, který je přiřazen k roli **Návrhář elektronického výkaznictví** nebo **Správce systému**, se zobrazí upozornění na chybějící šablonu v centru akcí.</span><span class="sxs-lookup"><span data-stu-id="9714e-129">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="9714e-130">Zpráva, která se zobrazí, závisí na hodnotě parametru **Automaticky spustit proceduru obnovení poškozených šablon v dávce**:</span><span class="sxs-lookup"><span data-stu-id="9714e-130">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="9714e-131">Je-li tento parametr nastaven na **Vypnuto**, je při spuštění dávkového zpracování doporučena automatická oprava podobných problémů pro jiné konfigurační šablony formátu ER.</span><span class="sxs-lookup"><span data-stu-id="9714e-131">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="9714e-132">Zpráva obsahuje odkaz, který lze použít ke spuštění dávkového zpracování.</span><span class="sxs-lookup"><span data-stu-id="9714e-132">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="9714e-133">Je-li tento parametr nastaven na **Zapnuto**, zobrazí se zpráva s upozorněním, že chybějící šablony byly zjištěny a že byl automaticky naplánovaný nový dávkový proces **Obnovit poškozené šablony ze zálohy interní databáze**.</span><span class="sxs-lookup"><span data-stu-id="9714e-133">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="9714e-134">Tento dávkový proces automaticky opraví podobné problémy pro ostatní šablony.</span><span class="sxs-lookup"><span data-stu-id="9714e-134">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="9714e-135">Chcete-li nastavit parametr **Automaticky spustit proceduru obnovení poškozených šablon v dávce**, postupujte dle následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="9714e-135">To set up the **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="9714e-136">V modulu Finance and Operations otevřete stránku **Správa organizace \> Elektronické výkaznictví \> Konfigurace**.</span><span class="sxs-lookup"><span data-stu-id="9714e-136">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="9714e-137">Na stránce **Konfigurace** v podokně akcí na kartě **Konfigurace** ve skupině **Pokročilá nastavení** vyberte **Parametry uživatelů**.</span><span class="sxs-lookup"><span data-stu-id="9714e-137">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="9714e-138">V dialogovém okně **Uživatelské parametry** nastavte požadovanou hodnotu pro parametr **Automatické spuštění procedury obnovy poškozených šablon v dávce**.</span><span class="sxs-lookup"><span data-stu-id="9714e-138">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="9714e-139">Tento parametr je definován pro konkrétního uživatele uživatele aplikace a protokolovanou společnost.</span><span class="sxs-lookup"><span data-stu-id="9714e-139">This parameter is defined as application user and logged company specific.</span></span>

![Stránka konfigurací elektronického výkaznictví](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="9714e-141">Na následujícím obrázku je znázorněn příklad zprávy, která se zobrazí při nastavení parametru **Automatické spuštění procedury obnovy poškozených šablon v dávce** na hodnotu **Zapnuto**.</span><span class="sxs-lookup"><span data-stu-id="9714e-141">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Stránka deníku plateb dodavatelů](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="9714e-143">Následující ilustrace znázorňuje dávkovou úlohu **Obnovit poškozené šablony ze zálohy interní databáze** na stránce **Dávková úloha**.</span><span class="sxs-lookup"><span data-stu-id="9714e-143">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Stránka Dávková úloha](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="9714e-145">Protokol spuštění s dokončenou dávkovou úlohou **Obnovit poškozené šablony ze zálohy interní databáze** obsahuje informace o šablonách, které byly obnoveny z umístění úložiště zálohy do umístění primárního úložiště.</span><span class="sxs-lookup"><span data-stu-id="9714e-145">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Stránka historie dávkových úloh](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="9714e-147">Ve výchozím nastavení je proces automatického vytváření záložních kopií šablon, které jsou umístěny v konfiguracích formátu ER, zapnutý.</span><span class="sxs-lookup"><span data-stu-id="9714e-147">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="9714e-148">Chcete-li zastavit vytváření záložních kopií šablon, nastavte možnost **Zastavit vytváření záložní kopie šablony** na **Ano** na kartě **Přílohy** na stránce **Parametry elektronického vykazování**.</span><span class="sxs-lookup"><span data-stu-id="9714e-148">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="9714e-149">Můžete otevřít tuto stránku z pracovního prostoru **Elektronické vykazování**.</span><span class="sxs-lookup"><span data-stu-id="9714e-149">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="9714e-150">Nastavíte-li možnost **Zastavit vytváření záložních kopií** na **Ano** a nechcete zachovat záložní kopie, které byly dříve vytvořeny ze šablon, vyberte možnost **Vyčistit úložiště záloh** na stránce **Parametry elektronického vykazování**.</span><span class="sxs-lookup"><span data-stu-id="9714e-150">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="9714e-151">Pokud jste upgradovali prostředí na Finance and Operations verze 10.0.5 (říjen 2019) a chcete migrovat do nového prostředí, které obsahuje konfigurace formátu ER, které lze spustit, vyberte možnost **Naplnit úložiště zálohy** na stránce **Parametry elektronického výkaznictví** před tím, než dojde k migraci.</span><span class="sxs-lookup"><span data-stu-id="9714e-151">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="9714e-152">Toto tlačítko spustí proces vytváření záložních kopií všech dostupných šablon, aby je bylo možné uložit do umístění úložiště záloh ER pro šablony.</span><span class="sxs-lookup"><span data-stu-id="9714e-152">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Stránka parametrů elektronického výkaznictví](./media/GER-BackupTemplates-5.png)

## <a name="manual-recovery"></a><span data-ttu-id="9714e-154">Ruční zotavení</span><span class="sxs-lookup"><span data-stu-id="9714e-154">Manual recovery</span></span>

<span data-ttu-id="9714e-155">Přejděte na položky **Správa organizace** \> **Elektronické výkaznictví** \> **Obnovit poškozené šablony**, abyste mohli ručně spustit proces obnovení šablon ER z umístění úložiště zálohy do umístění primárního úložiště.</span><span class="sxs-lookup"><span data-stu-id="9714e-155">Go to **Organization administration** \> **Electronic reporting** \> **Restore broken templates** to manually initiate the process of restoring ER templates from the backup storage location to the primary storage location.</span></span> <span data-ttu-id="9714e-156">Než tento proces zahájíte, na stránce **Obnovit poškozené šablony** můžete určit, zda bude prováděna interaktivně, nebo zda bude naplánován dávkový proces.</span><span class="sxs-lookup"><span data-stu-id="9714e-156">Before you start this process, on the **Restore broken templates** page you can specify whether it will be performed interactively, or the batch process will be scheduled for this.</span></span>

## <a name="supported-deployments"></a><span data-ttu-id="9714e-157">Podporovaná nasazení</span><span class="sxs-lookup"><span data-stu-id="9714e-157">Supported deployments</span></span>

<span data-ttu-id="9714e-158">V modulu Finance and Operations verze 10.0.5 je ukládání záloh šablon ER k dispozici pouze v cloudových nasazeních.</span><span class="sxs-lookup"><span data-stu-id="9714e-158">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="9714e-159">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="9714e-159">Additional resources</span></span>

[<span data-ttu-id="9714e-160">Přehled elektronického výkaznictví</span><span class="sxs-lookup"><span data-stu-id="9714e-160">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="9714e-161">Konfigurace architektury elektronického výkaznictví (ER)</span><span class="sxs-lookup"><span data-stu-id="9714e-161">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]