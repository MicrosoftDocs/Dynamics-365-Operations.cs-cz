---
title: "Datové zdroje mezi více společnostmi v modulu Elektronické výkaznictví"
description: "Toto téma vysvětluje, jak je možné používat datové zdroje mezi více společnostmi v modulu Elektronické výkaznictví (ER)."
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.translationtype: HT
ms.sourcegitcommit: 2fc887668171175d436b9eb281a35c1c9d089591
ms.openlocfilehash: 7f0f78d15e99397d61c3abace197cf1281d3769f
ms.contentlocale: cs-cz
ms.lasthandoff: 05/25/2018

---

# <a name="cross-company-data-sources-in-electronic-reporting"></a><span data-ttu-id="6430a-103">Datové zdroje mezi více společnostmi v modulu Elektronické výkaznictví</span><span class="sxs-lookup"><span data-stu-id="6430a-103">Cross-company data sources in Electronic reporting</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="6430a-104">Formáty v modulu Elektronické výkaznictví (ER) můžete navrhovat pro generování odchozích dokumentů v různých formátech.</span><span class="sxs-lookup"><span data-stu-id="6430a-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="6430a-105">Při generování dokumentu formát ER volá zdroje dat, které byly nakonfigurovány v odpovídajícím mapování modelu ER.</span><span class="sxs-lookup"><span data-stu-id="6430a-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="6430a-106">Aby bylo možné nakonfigurovat přístup k tabulkám aplikace pro načtení záznamu, můžete použít zdroje dat ER typu **záznamy tabulky**.</span><span class="sxs-lookup"><span data-stu-id="6430a-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="6430a-107">Když je tabulka pro přístup sdílená (to znamená tabulka s uloženými daty bez identifikátoru společnosti), tento zdroj dat vrátí všechny záznamy.</span><span class="sxs-lookup"><span data-stu-id="6430a-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="6430a-108">Když je tabulka přístupu závislá na společnosti (to znamená tabulka, kde jsou data uložená podle společností), vrátí tento zdroj dat pouze záznamy, které byly uloženy pro aktuální společnost (tj. kontext společnosti, ve kterém je spuštěný formát ER).</span><span class="sxs-lookup"><span data-stu-id="6430a-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="6430a-109">Každý zdroj dat typu **záznamy tabulky** v mapování modelu lze nyní označit jako zdroj dat mezi společnostmi.</span><span class="sxs-lookup"><span data-stu-id="6430a-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="6430a-110">Proto můžete použít zdroje dat ER typu **záznamy tabulky** pro přístup k tabulkám aplikace pro načtení záznamu.</span><span class="sxs-lookup"><span data-stu-id="6430a-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span> 

<span data-ttu-id="6430a-111">Pokud datový zdroj označíte jako mezi více společnostmi, dojde k následujícímu chování:</span><span class="sxs-lookup"><span data-stu-id="6430a-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="6430a-112">Zdroj dat, který odkazuje na libovolnou sdílenou tabulku kromě CompanyInfo vrátí všechny záznamy, které existují odkazované tabulce.</span><span class="sxs-lookup"><span data-stu-id="6430a-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="6430a-113">Zdroj dat, který se vztahuje k tabulce CompanyInfo i přesto, že CompanyInfo je ve sdílené tabulce, nevrátí záznamy obsahující identifikátor společnosti v zadaném rozsahu.</span><span class="sxs-lookup"><span data-stu-id="6430a-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="6430a-114">Zdroj dat pro jakoukoliv tabulku závislou na společnosti vrátí záznamy odkazované tabulky obsahující identifikátor společnosti v zadaném rozsahu.</span><span class="sxs-lookup"><span data-stu-id="6430a-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="6430a-115">V dialogovém okně dotazu systému, když je zapnutá možnost **požádat o dotaz** pro jakýkoli datový zdroj, který je označen jako mezi více společnostmi, je možné vybrat ručně jednu nebo více společností pro zahrnutí na kartu **Rozsah společnosti**.</span><span class="sxs-lookup"><span data-stu-id="6430a-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6430a-116">Podobně jako jiné filtry je filtr společnosti trvalý jako hodnota naposledy použitá pro dotazy při spuštění formátu ER.</span><span class="sxs-lookup"><span data-stu-id="6430a-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="6430a-117">Jestliže změníte hodnotu mezi více společnostmi pro zdroj dat, filtr se nezmění automaticky.</span><span class="sxs-lookup"><span data-stu-id="6430a-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="6430a-118">Pokud chcete použít jinou hodnotu mezi více společnostmi pro jiný zdroj dat, odstraňte odpovídající výběr konkrétního uživatele.</span><span class="sxs-lookup"><span data-stu-id="6430a-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="6430a-119">Pro každý zdroj dat, který je označen jako mezi více společnostmi, můžete vybrat záznamy, které použijete, pomocí funkcí **FILTER** a **WHERE** ve výrazu ER.</span><span class="sxs-lookup"><span data-stu-id="6430a-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="6430a-120">Pole **dataAreaID** lze také použít jako identifikátor společnosti.</span><span class="sxs-lookup"><span data-stu-id="6430a-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="6430a-121">V současné době je pole **dataAreaID** omezeno na následující typy podmínek při použití funkce **FILTER**:</span><span class="sxs-lookup"><span data-stu-id="6430a-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span> 

- <span data-ttu-id="6430a-122">Jsou podporovány pouze podmínky, které mají jedno porovnání pole **dataAreaID**.</span><span class="sxs-lookup"><span data-stu-id="6430a-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="6430a-123">Jsou povolena pouze porovnání, která mají výrazy nezávislé na záznamech položek v seznamu.</span><span class="sxs-lookup"><span data-stu-id="6430a-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="6430a-124">Následující výraz je tedy platný.</span><span class="sxs-lookup"><span data-stu-id="6430a-124">Therefore, the following expression is valid.</span></span>

    FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
    While shown below expressions will not pass the validation:
    FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
    FILTER (MyTable, 
        OR(
            MyTable.dataAreaID = $StringUserInputParameter1,
            MyTable.dataAreaID = $StringUserInputParameter2
        )
    )

<span data-ttu-id="6430a-125">Výchozí rozsah obsahuje všechny společnosti aktuální aplikace.</span><span class="sxs-lookup"><span data-stu-id="6430a-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="6430a-126">Může však být omezen.</span><span class="sxs-lookup"><span data-stu-id="6430a-126">However, it can be restricted.</span></span> <span data-ttu-id="6430a-127">Pokud chcete omezit rozsah přístupu k datům mezi více společnostmi u jednoho formátu ER, přiřaďte formátu určitou organizační hierarchii.</span><span class="sxs-lookup"><span data-stu-id="6430a-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="6430a-128">Když je hierarchie definovaná pro formát ER, jsou vráceny pouze záznamy pro právnické osoby, které jsou přítomny v přidělené hierarchii, přestože formát volá zdroje dat mezi společnostmi.</span><span class="sxs-lookup"><span data-stu-id="6430a-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="6430a-129">Pokud definujete pro formát ER odkaz na hierarchii, který již existuje, je použit výchozí rozsah a formát volá zdroje dat mezi společnostmi.</span><span class="sxs-lookup"><span data-stu-id="6430a-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="6430a-130">V takovém případě budou vráceny záznamy pro všechny společnosti v aplikaci.</span><span class="sxs-lookup"><span data-stu-id="6430a-130">In this situation, records for all application companies are returned.</span></span> 

<span data-ttu-id="6430a-131">Všimněte si, že když je zapnuta možnost **Použít koncept** pro přiřazení k jedné organizační hierarchii ER formátu, právnické osoby z pracovní verze této hierarchie budou použity k identifikaci rozsahu pro zdroje dat mezi společnostmi.</span><span class="sxs-lookup"><span data-stu-id="6430a-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="6430a-132">Pokud pracovní verzi neexistuje, budou použity právnické osoby z poslední publikované verze této organizační hierarchie.</span><span class="sxs-lookup"><span data-stu-id="6430a-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="6430a-133">Všimněte si, že když je vypnutá možnost **Použít koncept** pro přiřazení k jedné organizační hierarchii ER formátu, právnické osoby z naposledy publikované verze organizační hierarchie budou použity k identifikaci rozsahu pro zdroje dat mezi společnostmi.</span><span class="sxs-lookup"><span data-stu-id="6430a-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="6430a-134">Datum účinnosti organizačních hierarchií zatím v prostředí ER není podporováno.</span><span class="sxs-lookup"><span data-stu-id="6430a-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="6430a-135">Hierarchii lze přiřadit k formátu na konkrétní stránce, která je přístupné z pracovního prostoru ER nebo pomocí položky nabídky **Správa organizace -> elektronické sestavy -> Filtr právnické osoby pro formáty**.</span><span class="sxs-lookup"><span data-stu-id="6430a-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration -> Electronic reporting -> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="6430a-136">Uživateli musí být uděleno oprávnění pro přístup na stránku **Udržovat filtry právnické osoby pro formát** (ERMaintainFormatMappingLegalEntityFilters).</span><span class="sxs-lookup"><span data-stu-id="6430a-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="6430a-137">Omezení rozsahu právnických osob na základě hierarchie formátu se používá spolu s omezením, které může uživatel zadat ručně v dialogovém okně dotazu systému.</span><span class="sxs-lookup"><span data-stu-id="6430a-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="6430a-138">Křížení těchto omezení je použito při spuštění formátu.</span><span class="sxs-lookup"><span data-stu-id="6430a-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="6430a-139">Další informace o této funkci zobrazíte přehráním Průvodce záznamem úloh **Záznamy pro přístup ER tabulek závislosti společnosti v režimu mezi více společnostmi**, který je součástí obchodního procesu komponenty službu a řešení 7.5.4.3 IT získání/vývoj (10677) obchodního procesu a mohou být staženy ze služby [Stažení softwaru Microsoft](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="6430a-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="6430a-140">Tento Průvodce záznamem úloh vás provede procesem konfigurace mapování modelu ER a formátu ER tak, aby byl možný přístup k tabulkám aplikace v režimu mezi více společnostmi.</span><span class="sxs-lookup"><span data-stu-id="6430a-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="6430a-141">Pro dokončení průvodce záznamem úloh stáhněte následující soubory.</span><span class="sxs-lookup"><span data-stu-id="6430a-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="6430a-142">Konfigurace modelu dat – ER CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="6430a-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="6430a-143">Konfigurace formátu ER – CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="6430a-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)

