---
title: Výpočet dostupnosti zásob pro maloobchodní kanály
description: V tomto tématu je popsán způsob, jakým společnost může pomocí Microsoft Dynamics 365 Commerce zobrazit odhadovanou dostupnost na skladě pro produkty v online a obchodních kanálech.
author: hhainesms
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: fdf6df7e393bcc401e770bd1b8afcaedcadc2660
ms.sourcegitcommit: 593438a145672c55ff6a910eabce2939300b40ad
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/23/2021
ms.locfileid: "5937427"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="71fb7-103">Výpočet dostupnosti zásob pro maloobchodní kanály</span><span class="sxs-lookup"><span data-stu-id="71fb7-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

<span data-ttu-id="71fb7-104">V tomto tématu je popsán způsob, jakým společnost může pomocí Microsoft Dynamics 365 Commerce zobrazit odhadovanou dostupnost na skladě pro produkty v online a obchodních kanálech.</span><span class="sxs-lookup"><span data-stu-id="71fb7-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-inventory-availability"></a><span data-ttu-id="71fb7-105">Přesnost dostupnosti zásob</span><span class="sxs-lookup"><span data-stu-id="71fb7-105">Accuracy of inventory availability</span></span>

<span data-ttu-id="71fb7-106">Služba Commerce používá více serverů a databází k zajištění škálovatelnosti a výkonu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="71fb7-107">Proto je důležité, abyste pochopili, že dostupné hodnoty zásob, které jsou poskytovány prostřednictvím aplikace v rámci prodeje (POS), prostřednictvím rozhraní (API) pro dostupnost zásob e-Commerce a na stránkách zásob na skladě v Commerce Headquarters nemusí být 100% přesné v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="71fb7-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce headquarters might not be 100 percent accurate in real time.</span></span> <span data-ttu-id="71fb7-108">Pokud nebyly transakce vytvořené pro produkty v kanálu online nebo obchodu dosud synchronizovány s centrálou, nemusí být na stránkách zásob na skladě v centrále zobrazena přesná hodnota zásob v reálném čase pro tyto produkty.</span><span class="sxs-lookup"><span data-stu-id="71fb7-108">If transactions that are created for products in the online or store channel haven't yet been synced to headquarters, the on-hand inventory pages in headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="71fb7-109">Naopak, pokud jste nakonfigurovali společnost tak, aby uživatelé v centrále nebo v jiných integrovaných aplikacích mohli prodávat, získávat, vracet nebo jinak upravovat zásoby z obchodu nebo online skladu, může POS nebo online kanál obsahovat všechny informace, které jsou nutné k zobrazení přesné hodnoty v reálném čase pro položky.</span><span class="sxs-lookup"><span data-stu-id="71fb7-109">Conversely, if you configured your company so that users in headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show accurate real-time values for items.</span></span>

<span data-ttu-id="71fb7-110">Je důležité, abyste porozuměli tomu, že veškerá data dostupnosti na skladě, která jsou poskytována v průběhu operačního dne, jsou považována za odhadovanou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-110">It's critical to understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="71fb7-111">Pokud se tedy pokusíte porovnat informace o množství na skladě, které aplikace poskytuje se skutečnými fyzickými zásobami v regálech, nebo pokud se pokusíte porovnat hodnoty na skladě zobrazené v POS s údaji na skladě, které najdete pro stejný sklad v centrále, tyto hodnoty se mohou lišit.</span><span class="sxs-lookup"><span data-stu-id="71fb7-111">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in headquarters, the values might differ.</span></span> <span data-ttu-id="71fb7-112">Tento rozdíl v provozním dnu je očekávaný a neměl by být považován za problém.</span><span class="sxs-lookup"><span data-stu-id="71fb7-112">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="71fb7-113">Chcete-li auditovat data a ujistit se, že hodnoty, které jsou k dispozici v POS, rozhraní API a centrále, odpovídají skutečným fyzickým jednotkám, které jste našli v obchodě nebo ve skladu, nejlepším řešením je učinit tak po dokončení operací s kanálem pro daný den a po správné synchronizaci všech transakcí mezi centrálou a kanály.</span><span class="sxs-lookup"><span data-stu-id="71fb7-113">If you want to audit data and make sure that the values provided in POS, APIs, and headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between headquarters and the channels.</span></span>

## <a name="channel-side-inventory-calculation"></a><span data-ttu-id="71fb7-114">Výpočet zásob na straně kanálu</span><span class="sxs-lookup"><span data-stu-id="71fb7-114">Channel-side inventory calculation</span></span>

<span data-ttu-id="71fb7-115">Výpočet zásob na straně kanálu je mechanismus, který bere jako základ poslední známá data zásob kanálu v ústředí Commerce, a poté zohlední další změny zásob, ke kterým došlo na straně kanálu, které nejsou zahrnuty do tohoto základu pro výpočet téměř reálného stavu – odhadované vlastní zásoby v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="71fb7-115">The channel-side inventory calculation is a mechanism that takes the last-known channel inventory data in Commerce headquarters as a baseline, and then factors in additional inventory changes that occurred on the channel side that aren't included in that baseline to calculate a near-real-time estimated on-hand inventory.</span></span> 

<span data-ttu-id="71fb7-116">V logice výpočtu zásob na straně kanálu jsou aktuálně zohledněny následující změny zásob:</span><span class="sxs-lookup"><span data-stu-id="71fb7-116">The following inventory changes are currently considered in the channel-side inventory calculation logic:</span></span>

- <span data-ttu-id="71fb7-117">Zásoby prodávané prostřednictvím pokladních objednávek v obchodě</span><span class="sxs-lookup"><span data-stu-id="71fb7-117">Inventory sold through cash-and-carry orders in store</span></span>
- <span data-ttu-id="71fb7-118">Zásoby prodávané prostřednictvím objednávek zákazníků v obchodě nebo online kanálu</span><span class="sxs-lookup"><span data-stu-id="71fb7-118">Inventory sold through customer orders in store or online channel</span></span>
- <span data-ttu-id="71fb7-119">Zásoby vrácené do skladu</span><span class="sxs-lookup"><span data-stu-id="71fb7-119">Inventory returned to store</span></span>
- <span data-ttu-id="71fb7-120">Zásoby vydané (výběr, zabalení, odeslání) ze skladu</span><span class="sxs-lookup"><span data-stu-id="71fb7-120">Inventory fulfilled (pick, pack, ship) from store warehouse</span></span>

<span data-ttu-id="71fb7-121">Chcete-li použít výpočet zásob na straně kanálu, je nezbytným předpokladem odeslání pravidelného snímku údajů o zásobách z centrály vytvořeného úlohou **Dostupnost produktu** do databází kanálu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-121">To use the channel-side inventory calculation, as a prerequisite a periodic snapshot of inventory data from headquarters created by the **Product availability** job must be sent to the channel databases.</span></span> <span data-ttu-id="71fb7-122">Snímek představuje informace, které má ústředí k dispozici o zásobách pro určitou kombinaci produktu nebo varianty produktu a skladu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-122">The snapshot represents the information that headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="71fb7-123">Zahrnuje pouze transakce zásob, které byly zpracovány a zaúčtovány v centrále v době, kdy byl snímek pořízen, a nemusí být 100% přesný v reálném čase kvůli neustálému zpracování prodeje, ke kterému dochází na distribuovaných serverech.</span><span class="sxs-lookup"><span data-stu-id="71fb7-123">It includes only the inventory transactions that were processed and posted in headquarters at the time when the snapshot was taken, and it might not be 100 percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

- <span data-ttu-id="71fb7-124">Pokud byly zásoby prodávány pro produkt ve skladu prostřednictvím hotovostního a mezipodnikového prodeje odběratele v aplikaci POS, nebude centrála okamžitě obsahovat informace o související transakci výdeje zásob pro daný prodej.</span><span class="sxs-lookup"><span data-stu-id="71fb7-124">If inventory was sold for a product in a store through a cash-and-carry or asynchronous customer order sale in the POS application, headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="71fb7-125">Centrála bude obsahovat informace o zásobách, které jsou prodány pro tyto typy prodeje obchodu pouze poté, co úloha P nahraje související transakci z databáze kanálů obchodu do centrály a související prodejní objednávky jsou vytvořeny prostřednictvím výpisu zaúčtování nebo dávkové zpracování postupného informačního kanálu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-125">Headquarters will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into headquarters and the related sales orders are created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="71fb7-126">Proces vytvoření objednávky v centrále vytvoří související skladové transakce.</span><span class="sxs-lookup"><span data-stu-id="71fb7-126">The process of creating the orders in headquarters creates the related inventory transactions.</span></span> 
- <span data-ttu-id="71fb7-127">U kanálů s kanály elektronického obchodování obsahuje centrála informace o skladových transakcích pouze po odeslání transakcí do centrály prostřednictvím úlohy P a dokončení procesu synchronizace objednávky.</span><span class="sxs-lookup"><span data-stu-id="71fb7-127">For e-commerce channel orders, headquarters has information about the inventory transactions only after the transactions are sent to headquarters through the P-job and the order synchronization process is completed.</span></span>

<span data-ttu-id="71fb7-128">Chcete-li vytvořit snímek zásob v rámci centrály, postupujte podle následujících kroků.</span><span class="sxs-lookup"><span data-stu-id="71fb7-128">To take a snapshot of inventory in Commerce headquarters, follow these steps.</span></span>

1. <span data-ttu-id="71fb7-129">Přejděte na **Retail and Commerce \> Retail and Commerce IT \> Produkty a zásoby \> Dostupnost produktu**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-129">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="71fb7-130">Klepnutím na tlačítko **OK** spustíte úlohu **Dostupnost produktu**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-130">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="71fb7-131">Tuto úlohu lze rovněž naplánovat tak, aby byla spuštěna v dávce.</span><span class="sxs-lookup"><span data-stu-id="71fb7-131">You can also schedule this job to run in batch.</span></span>

<span data-ttu-id="71fb7-132">Po dokončení úlohy **Dostupnost produktu** musí být zachycená data přesunuta do databází kanálů tak, aby poslední snímek zásob služby centrály mohl být zvážen při výpočtu odhadovaných zásob na skladě.</span><span class="sxs-lookup"><span data-stu-id="71fb7-132">After the **Product availability** job has finished running, the data that was captured must be pushed to the channel databases, so that the latest headquarters inventory snapshot can be considered in the channel-side calculation of estimated on-hand inventory.</span></span>

<span data-ttu-id="71fb7-133">Chcete-li synchronizovat data snímků z centrály do databází vašeho kanálu, postupujte takto.</span><span class="sxs-lookup"><span data-stu-id="71fb7-133">To sync snapshot data from headquarters to your channel databases, follow these steps.</span></span>

1. <span data-ttu-id="71fb7-134">Přejděte na **Retail and Commerce \> IT pro Retail and Commerce \> Plán distribuce**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-134">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="71fb7-135">Spusťte úlohu **1130** (**Dostupnost produktu**), která synchronizuje data úlohy **Dostupnost produktu** vytvořená z centrály do databází vašeho kanálu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-135">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job has created from headquarters to your channel databases.</span></span>

## <a name="inventory-availability-apis-for-e-commerce"></a><span data-ttu-id="71fb7-136">Rozhraní API pro dostupnost zásob pro elektronický obchod</span><span class="sxs-lookup"><span data-stu-id="71fb7-136">Inventory availability APIs for e-commerce</span></span>

<span data-ttu-id="71fb7-137">Commerce poskytuje následující rozhraní API pro scénáře elektronického obchodu pro dotazování dostupnosti zásob produktu:</span><span class="sxs-lookup"><span data-stu-id="71fb7-137">Commerce provides the following APIs for e-commerce scenarios to query inventory availability of a product:</span></span>

- <span data-ttu-id="71fb7-138">**GetEstimatedAvailability** – Pomocí tohoto rozhraní API můžete dotazovat zásoby produktu nebo varianty produktu ve skladu online kanálu nebo ve skladech, které jsou propojeny se skupinou plnění online kanálu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-138">**GetEstimatedAvailability** – Use this API to query inventory for a product or product variant in the online channel warehouse or warehouses that are linked to the online channel's fulfillment group.</span></span>
- <span data-ttu-id="71fb7-139">**GetEstimatedProductWarehouseAvailability** – pomocí tohoto rozhraní API můžete dotazovat zásoby pro produkt nebo variantu produktu z určitého skladu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-139">**GetEstimatedProductWarehouseAvailability** – Use this API to query inventory for a product or product variant from a specific warehouse.</span></span>

> [!NOTE]
> <span data-ttu-id="71fb7-140">Tato rozhraní API nahrazují API **GetProductAvailabilities** a **GetAvailableInventoryNearby** v Commerce verze 10.0.7 a starší.</span><span class="sxs-lookup"><span data-stu-id="71fb7-140">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Commerce release 10.0.7 and earlier.</span></span>

<span data-ttu-id="71fb7-141">Obě API interně používají logiku výpočtu na straně kanálu a vrací odhadované **fyzicky dostupné** množství, množství **celkem k dispozici**, **měrná jednotka (UoM)** a **úroveň zásob** pro požadovaný produkt a sklad.</span><span class="sxs-lookup"><span data-stu-id="71fb7-141">Both APIs internally use the channel-side calculation logic and return estimated **physical available** quantity, **total available** quantity, **unit of measure (UoM)**, and **inventory level** for the requested product and warehouse.</span></span> <span data-ttu-id="71fb7-142">Vrácené hodnoty lze v případě potřeby zobrazit na webu elektronického obchodu nebo je lze použít k aktivaci jiné obchodní logiky na vašem webu elektronického obchodu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-142">The returned values can be shown on your e-commerce site if you want, or they can be used to trigger other business logic on your e-commerce site.</span></span> <span data-ttu-id="71fb7-143">Můžete například zabránit nákupu produktů s úrovní zásob „není skladem“.</span><span class="sxs-lookup"><span data-stu-id="71fb7-143">For example, you can prevent the purchase of products with an "out of stock" inventory level.</span></span>

<span data-ttu-id="71fb7-144">Přestože jiná rozhraní API, která jsou k dispozici v Commerce, mohou přejít přímo do centrály a načíst množství na skladě pro produkty, nedoporučujeme, aby se používaly v prostředí elektronického obchodování z důvodu potenciálních problémů s výkonem a souvisejícího dopadu, který mohou tyto časté požadavky mít na serverech centrály.</span><span class="sxs-lookup"><span data-stu-id="71fb7-144">Although other APIs that are available in Commerce can go directly to headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-commerce environment because of potential performance issues and the impact that these frequent requests can have on your headquarters servers.</span></span> <span data-ttu-id="71fb7-145">Navíc s výpočtem na straně kanálu mohou dvě výše uvedená rozhraní API poskytnout přesnější odhad dostupnosti produktu zohledněním transakcí vytvořených v kanálech, které ústředí dosud nejsou známy.</span><span class="sxs-lookup"><span data-stu-id="71fb7-145">Additionally, with channel-side calculation, the two APIs mentioned above can provide a more accurate estimate of a product's availability by taking into account the transactions created in the channels that aren’t yet known to headquarters.</span></span>

<span data-ttu-id="71fb7-146">Chcete-li obě rozhraní API použít, musíte povolit funkci **Výpočet optimalizované dostupnosti produktu** prostřednictvím pracovního prostoru **Správa funkcí** v centrále.</span><span class="sxs-lookup"><span data-stu-id="71fb7-146">To use the two APIs, you must enable the **Optimized product availability calculation** feature through the **Feature management** workspace in headquarters.</span></span> <span data-ttu-id="71fb7-147">Pokud vaše kanály online a obchodu používají stejné sklady plnění, musíte také povolit funkci **Vylepšená logika výpočtu zásob na straně kanálu elektronického obchodu**, která má logiku výpočtu na straně kanálu v rámci dvou rozhraní API pro zohlednění neodeslaných transakcí (cash-and-carry, objednávky zákazníků, vrácení) vytvořených v kanálu obchodu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-147">If your online and store channels use the same fulfillment warehouses, you must also enable the **Enhanced e-Commerce channel-side inventory calculation logic** feature to have the channel-side calculation logic within the two APIs to factor in the unposted transactions (cash-and-carry, customer orders, returns) created in the store channel.</span></span> <span data-ttu-id="71fb7-148">Budete muset spustit úlohu **1070** (**Konfigurace kanálu**) po povolení těchto funkcí.</span><span class="sxs-lookup"><span data-stu-id="71fb7-148">You will need to run the **1070** (**Channel configuration**) job after enabling these features.</span></span>

<span data-ttu-id="71fb7-149">Chcete-li definovat, jak má být ve výstupu API vráceno množství produktu, postupujte takto.</span><span class="sxs-lookup"><span data-stu-id="71fb7-149">To define how product quantity should be returned in the API output, follow these steps.</span></span>

1. <span data-ttu-id="71fb7-150">Přejděte na možnost **Retail a Commerce \> Nastavení centrály \> Parametry \> Parametry obchodu**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-150">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce parameters**.</span></span>
1. <span data-ttu-id="71fb7-151">Vyberte kartu **Zásoby** a poté na rychlé kartě **Rozhraní API dostupnosti zásob pro elektronický obchod** nakonfigurujte hodnotu nastavení **Množství ve výstupu API**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-151">Select the **Inventory** tab, and then on the **Inventory availability APIs for e-Commerce** FastTab configure the value of the **Quantity in API output** setting.</span></span>
1. <span data-ttu-id="71fb7-152">Spusťte úlohu **1070** (**Konfigurace kanálu**), aby se synchronizovala poslední nastavení do kanálů.</span><span class="sxs-lookup"><span data-stu-id="71fb7-152">Run the **1070** (**Channel configuration**) job to sync the latest setting to channels.</span></span>

<span data-ttu-id="71fb7-153">Nastavení **Množství ve výstupu API** poskytuje tři možnosti:</span><span class="sxs-lookup"><span data-stu-id="71fb7-153">The **Quantity in API output** setting provides three options:</span></span>

- <span data-ttu-id="71fb7-154">**Vrátit množství zásob** – Ve výstupu API se vrací fyzické dostupné a celkové dostupné množství požadovaného produktu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-154">**Return inventory quantity** - Physical available and total available quantity of a requested product are returned in API output.</span></span>
- <span data-ttu-id="71fb7-155">**Vrátit množství zásob odečtením vyrovnávací paměti zásob** – Množství vrácené ve výstupu API se upraví odečtením hodnoty vyrovnávací paměti zásob.</span><span class="sxs-lookup"><span data-stu-id="71fb7-155">**Return inventory quantity subtracting inventory buffer** - The quantity returned in the API output is adjusted by subtracting the inventory buffer value.</span></span> <span data-ttu-id="71fb7-156">Další informace o vyrovnávací paměti zásob viz [Konfigurace vyrovnávací paměti zásob a úrovní zásob](inventory-buffers-levels.md).</span><span class="sxs-lookup"><span data-stu-id="71fb7-156">For more information about the inventory buffer, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>
- <span data-ttu-id="71fb7-157">**Nevrátit množství zásob** – Ve výstupu rozhraní API se vrátí pouze úroveň zásob.</span><span class="sxs-lookup"><span data-stu-id="71fb7-157">**Not return inventory quantity** - Only the inventory level is returned in the API output.</span></span> <span data-ttu-id="71fb7-158">Další informace o úrovních zásob viz [Konfigurace vyrovnávací paměti zásob a úrovní zásob](inventory-buffers-levels.md).</span><span class="sxs-lookup"><span data-stu-id="71fb7-158">For more information about inventory levels, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>

<span data-ttu-id="71fb7-159">Můžete použít parametr API `QuantityUnitTypeValue` k určení typu jednotky, ve které chcete, aby rozhraní API vrátila množství.</span><span class="sxs-lookup"><span data-stu-id="71fb7-159">You can use the `QuantityUnitTypeValue` API parameter to specify the unit type in which you would like the APIs to return quantity.</span></span> <span data-ttu-id="71fb7-160">Tento parametr podporuje možnosti **jednotka zásob** (výchozí), **nákupní jednotka** a **prodejní jednotka**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-160">This parameter supports the **inventory unit** (default), **purchase unit**, and **sell unit** options.</span></span> <span data-ttu-id="71fb7-161">Vrácené množství je zaokrouhleno na definovanou přesnost odpovídající měrné jednotce (UOM) v centrále.</span><span class="sxs-lookup"><span data-stu-id="71fb7-161">The returned quantity is rounded to the defined precision of the corresponding unit of measure (UOM) in headquarters.</span></span>

<span data-ttu-id="71fb7-162">Rozhraní API **GetEstimatedAvailability** nabízí následující vstupní parametry pro podporu různých scénářů dotazů:</span><span class="sxs-lookup"><span data-stu-id="71fb7-162">The **GetEstimatedAvailability** API offers the following input parameters to support different query scenarios:</span></span>

- <span data-ttu-id="71fb7-163">`DefaultWarehouseOnly` – Tento parametr použijte k dotazování na zásoby produktu ve výchozím skladu online kanálu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-163">`DefaultWarehouseOnly` - Use this parameter to query inventory for a product in the online channel's default warehouse.</span></span> 
- <span data-ttu-id="71fb7-164">`FilterByChannelFulfillmentGroup` a `SearchArea` – Pomocí těchto dvou parametrů můžete dotazovat zásoby produktu ze všech míst vyzvednutí v konkrétní oblasti vyhledávání na základě parametrů `longitude`, `latitude` a `radius`.</span><span class="sxs-lookup"><span data-stu-id="71fb7-164">`FilterByChannelFulfillmentGroup` and `SearchArea` - Use these two parameters to query inventory for a product from all pickup locations within a specific search area, based on `longitude`, `latitude`, and `radius`.</span></span> 
- <span data-ttu-id="71fb7-165">`FilterByChannelFulfillmentGroup` a `DeliveryModeTypeFilterValue` – Tyto dva parametry použijte k dotazování na zásoby produktu ze specifických skladů, které jsou propojeny se skupinou plnění online kanálu a jsou nakonfigurovány tak, aby podporovaly určité způsoby doručení.</span><span class="sxs-lookup"><span data-stu-id="71fb7-165">`FilterByChannelFulfillmentGroup` and `DeliveryModeTypeFilterValue` - Use these two parameters to query inventory for a product from specific warehouses that are linked to an online channel's fulfillment group and are configured to support certain modes of delivery.</span></span> <span data-ttu-id="71fb7-166">Parametr `DeliveryModeTypeFilterValue` podporuje možnosti **vše** (výchozí), **doprava** a **vyzvednutí**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-166">The `DeliveryModeTypeFilterValue` parameter supports the **all** (default), **shipping**, and **pickup** options.</span></span> <span data-ttu-id="71fb7-167">Například ve scénáři, kde lze online objednávku splnit z více přepravních skladů, můžete tyto dva parametry použít k dotazu na dostupnost zásob produktu ve všech těchto přepravních skladech.</span><span class="sxs-lookup"><span data-stu-id="71fb7-167">For example, in a scenario where an online order can be fulfilled from multiple shipping warehouses, you can use these two parameters to query a product's inventory availability in all of those shipping warehouses.</span></span> <span data-ttu-id="71fb7-168">Rozhraní API v tomto případě vrací množství produktu a úroveň zásob v každém z přepravních skladů, plus agregované množství a agregovanou úroveň zásob ze všech přepravních skladů v rozsahu dotazu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-168">The API in this case returns the product's on-hand quantity and inventory level in each of the shipping warehouses, plus an aggregated quantity and an aggregated inventory level from all shipping warehouses in the query scope.</span></span>
 
<span data-ttu-id="71fb7-169">Buy box Commerce, výběr obchodu, seznam přání, košík a ikona košíku využívají výše uvedená rozhraní API a parametry k zobrazování zpráv na úrovni zásob na webu elektronického obchodu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-169">The Commerce buy box, store selector, wishlist, cart, and cart icon modules consume the APIs and parameters mentioned above to display inventory level messages across the e-commerce site.</span></span> <span data-ttu-id="71fb7-170">Nástroj pro tvorbu webů Commerce poskytuje různá nastavení inventáře pro řízení chování zboží a nákupu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-170">Commerce site builder provides various inventory settings to control merchandising and purchase behavior.</span></span> <span data-ttu-id="71fb7-171">Další informace [Použít nastavení zásob](inventory-settings.md).</span><span class="sxs-lookup"><span data-stu-id="71fb7-171">For more information, see [Apply inventory settings](inventory-settings.md).</span></span>

## <a name="pos-inventory-lookup-with-channel-side-calculation"></a><span data-ttu-id="71fb7-172">Vyhledávání zásob POS s výpočtem na straně kanálu</span><span class="sxs-lookup"><span data-stu-id="71fb7-172">POS inventory lookup with channel-side calculation</span></span>

<span data-ttu-id="71fb7-173">V Commerce verze 10.0.9 a starší se operace **Vyhledávání zásob** z POS použila při volání služby centrály k získání informací o zásobách pro vybraný produkt, pro aktuální obchod uživatele i pro všechny ostatní obchody, které jsou nakonfigurovány pro skupinu plnění, jako součást konfigurace kanálu pro daný obchod.</span><span class="sxs-lookup"><span data-stu-id="71fb7-173">In the Commerce release 10.0.9 and earlier, the **Inventory lookup** operation in POS used a real-time service call to headquarters to get inventory information for the selected product for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="71fb7-174">Ve verzi Commerce 10.0.10 a novější můžete vypnout volání služby v reálném čase do centrály a místo toho použít výpočet na straně kanálu na serveru Commerce k určení okamžitých zásob, které jsou fyzicky k dispozici pro obchod a další umístění, která jsou definována ve skupině plnění.</span><span class="sxs-lookup"><span data-stu-id="71fb7-174">In Commerce release 10.0.10 and later, you can turn off real-time service calls to headquarters and instead use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="71fb7-175">Tato konfigurace vypočtených zásob kanálů je rovněž užitečná pro místa, kde je připojení k Internetu nespolehlivé, protože nemusíte být online pro získání vyhledávání zásob z centrály.</span><span class="sxs-lookup"><span data-stu-id="71fb7-175">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups headquarters.</span></span>

<span data-ttu-id="71fb7-176">Je-li výpočet na straně kanálu správně nakonfigurován a spravován, může poskytovat spolehlivější odhad aktuálních skladových zásob, protože používá transakční data, která jsou uložena v databázi kanálů Commerce, ale centrála ještě nemusí tyto informace obsahovat.</span><span class="sxs-lookup"><span data-stu-id="71fb7-176">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory because it uses the transactional data that is in the Commerce channel database but that headquarters might not yet have information about.</span></span> <span data-ttu-id="71fb7-177">Použijete-li například existující volání v reálném čase služby pro vyhledávání zásob v POS, nebude mít centrála k dispozici informace o prodeji a převodu, které se právě vyskytly u produktu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-177">For example, if you use the existing real-time service call for inventory lookups in POS, headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="71fb7-178">Hodnota množství na skladě, kterou centrála vrátí pro daný produkt, však pravděpodobně překročí skutečné množství na skladě pro obchod o jednu jednotku.</span><span class="sxs-lookup"><span data-stu-id="71fb7-178">Therefore, the on-hand inventory value that headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="71fb7-179">Pokud však použijete výpočet na straně kanálu, bude prodej uskutečněný a přenesený do výpočtu určen a odečten od zobrazené hodnoty množství na skladě.</span><span class="sxs-lookup"><span data-stu-id="71fb7-179">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="71fb7-180">Ačkoliv hodnoty, které jsou vyvolány výpočtem na straně kanálu a jsou v reálném čase, poskytují pouze odhady množství na skladě, hodnota, kterou výpočet na straně kanálu poskytuje, je pro aktuální obchod mnohem pravděpodobnější.</span><span class="sxs-lookup"><span data-stu-id="71fb7-180">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

<span data-ttu-id="71fb7-181">Ke konfiguraci operace POS **Vyhledávání zásob** v centrále s použitím logiky výpočtu na straně kanálu a vypnutí volání služby v reálném čase postupujte takto.</span><span class="sxs-lookup"><span data-stu-id="71fb7-181">To configure the POS **Inventory lookup** operation in headquarters to use the channel-side calculation logic and turn off real-time service call, follow these steps.</span></span>

1. <span data-ttu-id="71fb7-182">Přejděte na **Maloobchodní a velkoobchodní prodej \> Instalace kanálu \> Nastavení POS \> Profily POS \> Funkční profily**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-182">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="71fb7-183">Vyberte funkční profil.</span><span class="sxs-lookup"><span data-stu-id="71fb7-183">Select a functionality profile.</span></span>
1. <span data-ttu-id="71fb7-184">Na pevné záložce **Funkce** v části **Výpočet dostupnosti zásob** změňte hodnotu pole **Režim výpočtu dostupnosti zásob** ze **Služby v reálném čase** na **Kanál**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-184">On the **Functions** FastTab, in the **Inventory availability calculation** section, change the value of **Inventory availability calculation mode** from **Real time service** to **Channel**.</span></span> <span data-ttu-id="71fb7-185">Všechny funkční profily standardně používají volání služby v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="71fb7-185">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="71fb7-186">Chcete-li použít výpočetní logiku na straně kanálu, je nutné změnit hodnotu tohoto pole.</span><span class="sxs-lookup"><span data-stu-id="71fb7-186">You must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="71fb7-187">Tato změna ovlivní všechny maloobchodní obchody propojené s vybraným profilem funkčnosti.</span><span class="sxs-lookup"><span data-stu-id="71fb7-187">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="71fb7-188">Poté je nutné synchronizovat změny kanálů pomocí procesu plánu distribuce v centrále následujícím postupem.</span><span class="sxs-lookup"><span data-stu-id="71fb7-188">You must then sync the changes to the channels through the distribution schedule process in headquarters by following these steps.</span></span>

1. <span data-ttu-id="71fb7-189">Přejděte na **Retail and Commerce \> IT pro Retail and Commerce \> Plán distribuce**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-189">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="71fb7-190">Spusťte úlohu **1070** (**konfigurace kanálu**).</span><span class="sxs-lookup"><span data-stu-id="71fb7-190">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="71fb7-191">Po dokončení konfigurace již informace o fyzicky dostupných zásobách nepoužívají volání služby v reálném čase, pokud uživatel v aplikaci POS používá operaci **Vyhledávání zásob** (standardní a maticová zobrazení).</span><span class="sxs-lookup"><span data-stu-id="71fb7-191">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="71fb7-192">Místo toho jsou data o fyzicky dostupných zásobách pro aktuální obchod a všech obchodech ve skupině plnění vypočítána na základě posledního známého snímku, který byl dodán do databáze kanálů ze služby Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="71fb7-192">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="71fb7-193">Hodnota snímku je dále upřesněna výpočtem na straně kanálu za účelem nastavení fyzicky dostupné hodnoty na základě dalších transakcí prodeje nebo vrácení, které existují pro vybraný produkt v databázi kanálů, které nebyly zahrnuty do posledního synchronizovaný snímek z úlohy 1130.</span><span class="sxs-lookup"><span data-stu-id="71fb7-193">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="71fb7-194">Pokud databáze kanálu neobsahuje transakční data pro žádný ze skladů nebo obchodů ve skupině plnění, neobsahuje žádné další transakce, které lze rozlišit do přepočtu hodnoty.</span><span class="sxs-lookup"><span data-stu-id="71fb7-194">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="71fb7-195">Nejlepším odhadem množství na skladě, které lze zobrazit pro tyto sklady nebo obchody, jsou data z posledního snímku služby Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="71fb7-195">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="71fb7-196">Obrazovky **Splnění objednávky** v POS také využívají výpočet na straně kanálu a zobrazení množství na skladě pro položky v případě, že je vybrán řádek plnění objednávky a uživatel zobrazí panel **Podrobnosti** pro množství na skladě pro vybranou položku.</span><span class="sxs-lookup"><span data-stu-id="71fb7-196">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="71fb7-197">Optimalizace dat zásob</span><span class="sxs-lookup"><span data-stu-id="71fb7-197">Optimize your inventory data</span></span>

<span data-ttu-id="71fb7-198">Chcete-li zajistit nejlepší možný odhad zásob, je důležité, abyste používali následující úlohy služby Commerce Batch a spouštěli je často:</span><span class="sxs-lookup"><span data-stu-id="71fb7-198">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="71fb7-199">**Úloha P** – úlohu P lze najít na stránce **Plány distribuce** a měla by být spouštěna často.</span><span class="sxs-lookup"><span data-stu-id="71fb7-199">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="71fb7-200">Tato úloha přináší objednávky e-Commerce, asynchronní objednávky odběratele, které vytvořil POS, a objednávky v hotovosti vytvořené z databází kanálů do služby Commerce Headquarters, aby mohly být dále zpracovány.</span><span class="sxs-lookup"><span data-stu-id="71fb7-200">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="71fb7-201">Dokud nebudou tato data synchronizována z kanálu do služby Commerce Headquarters, nemá obchodní ústředí žádné informace o úpravách zásob pro produkty v skladech, které jsou výsledkem těchto transakcí.</span><span class="sxs-lookup"><span data-stu-id="71fb7-201">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="71fb7-202">**Synchronizovat objednávky** – Tato úloha zpracuje neformátovaná transakční data ve službě Commerce Headquarters, která úloha P poskytuje a převádí transakce e-Commerce a asynchronní objednávky odběratele do prodejních objednávek v Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="71fb7-202">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="71fb7-203">Dokud nebude tato úloha zpracována a nebudou vytvořeny prodejní objednávky, nebudou vytvořeny žádné skladové transakce.</span><span class="sxs-lookup"><span data-stu-id="71fb7-203">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="71fb7-204">To znamená, že množství na skladě v Commerce Headquarters tyto transakce nebere v úvahu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-204">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="71fb7-205">**Výpočet transakčních výpisů v dávce** – pro transakce cash-and-carry, které jsou vytvořeny v obchodě, proces postupného zaúčtování informačního kanálu zajišťuje efektivní aktualizaci skladů, které souvisejí s prodejem.</span><span class="sxs-lookup"><span data-stu-id="71fb7-205">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="71fb7-206">Chcete-li získat nejúčinnější zpracování skladových transakcí pro objednávky cash-and-carry, nezapomeňte nakonfigurovat systém tak, aby používal [postupné zaúčtování kanálu](./trickle-feed.md).</span><span class="sxs-lookup"><span data-stu-id="71fb7-206">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](./trickle-feed.md).</span></span>
- <span data-ttu-id="71fb7-207">**Zaúčtovat transakční příkazy v dávce** – Tato úloha je také vyžadována pro postupné zaúčtování kanálu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-207">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="71fb7-208">Následuje po úloze **Vypočítat transakční výpisy v dávce**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-208">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="71fb7-209">Tato úloha systematicky zaúčtuje vypočtené výkazy, takže prodejní objednávky pro prodeje cash-and-carry jsou vytvořeny v Commerce Headquarters a Commerce Headquarters přesněji odráží zásoby vašeho obchodu.</span><span class="sxs-lookup"><span data-stu-id="71fb7-209">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="71fb7-210">**Dostupnost produktu** – Tato úloha vytvoří snímek zásob z služby Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="71fb7-210">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="71fb7-211">**1130 (dostupnost produktu)** – Tato úloha se nachází na stránce **Plány distribuce** a měla by být spuštěna bezprostředně po úloze **Dostupnosti produktu**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-211">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="71fb7-212">Tato úloha přepravuje data snímku zásob z Commerce Headquarters do databází kanálů.</span><span class="sxs-lookup"><span data-stu-id="71fb7-212">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

> [!NOTE]
> - <span data-ttu-id="71fb7-213">Obecně je nejlepší spouštět úlohy **Dostupnost produktu** a **1130** každou hodinu a naplánovat P-úlohu, synchronizovat objednávky a úlohy související s postupným účtováním se stejnou nebo vyšší frekvencí.</span><span class="sxs-lookup"><span data-stu-id="71fb7-213">It is a best practice to run the **Product availability** and **1130** jobs on an hourly basis, and to schedule P-job, synchronize orders, and trickle feed posting-related jobs with the same or higher frequency.</span></span>
> - <span data-ttu-id="71fb7-214">Z důvodů výkonnosti je při výpočtu dostupnosti zásob na straně kanálu použit k vytvoření požadavku na dostupnost zásob pomocí rozhraní API e-Commerce nebo nové logiky zásob na straně POS v případě, že uplynul dostatečný čas pro opětovné spuštění výpočetní logiky.</span><span class="sxs-lookup"><span data-stu-id="71fb7-214">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="71fb7-215">Výchozí mezipaměť je nastavena na 60 sekund.</span><span class="sxs-lookup"><span data-stu-id="71fb7-215">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="71fb7-216">Zapnuli jste například výpočet na straně kanálu pro váš obchod a zobrazili jste množství na skladě pro produkt na stránce pro **Vyhledávání zásob**.</span><span class="sxs-lookup"><span data-stu-id="71fb7-216">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="71fb7-217">Je-li poté prodána jedna jednotka produktu, nebude stránka **Vyhledávání zásob** ukazovat snížený stav zásob, dokud nebude mezipaměť vymazána.</span><span class="sxs-lookup"><span data-stu-id="71fb7-217">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="71fb7-218">Jakmile uživatelé zaúčtují transakce v POS, měli by počkat 60 sekund, než se ověří, že množství na skladě bylo sníženo.</span><span class="sxs-lookup"><span data-stu-id="71fb7-218">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="71fb7-219">Pokud váš obchodní scénář vyžaduje menší čas v mezipaměti, požádejte o pomoc pracovníka technické podpory.</span><span class="sxs-lookup"><span data-stu-id="71fb7-219">If your business scenario requires a smaller cache time, contact your product support representative for assistance.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
