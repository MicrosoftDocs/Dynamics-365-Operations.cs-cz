---
title: Ukázka integrace fiskální služby pro Českou republiku
description: V tomto tématu je uveden přehled fiskální integrace pro Českou republiku.
author: josaw
manager: annbe
ms.date: 05/16/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Czech Republic
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-4-1
ms.dyn365.ops.version: 10.0.2
ms.openlocfilehash: 1cd5dead8906b37c30acea7acbd26f53e2e10ee4
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/15/2021
ms.locfileid: "5225731"
---
# <a name="fiscal-registration-service-integration-sample-for-czech-republic"></a><span data-ttu-id="e4540-103">Ukázka integrace fiskální služby pro Českou republiku</span><span class="sxs-lookup"><span data-stu-id="e4540-103">Fiscal registration service integration sample for Czech Republic</span></span>


[!include[banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="e4540-104">Úvod</span><span class="sxs-lookup"><span data-stu-id="e4540-104">Introduction</span></span>

<span data-ttu-id="e4540-105">Pro účely splnění fiskálních požadavků na registrační pokladny v České republice obsahuje funkce Dynamics 365 Commerce pro Českou republiku vzorovou integraci pokladního místa (POS) s externí fiskální registrační službou.</span><span class="sxs-lookup"><span data-stu-id="e4540-105">To meet local fiscal requirements for cash registers in the Czech Republic, the Dynamics 365 Commerce functionality for the Czech Republic includes a sample integration of the point of sale (POS) with an external fiscal registration service.</span></span> <span data-ttu-id="e4540-106">Vzorek rozšiřuje [funkci fiskální integrace](fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-106">The sample extends the [fiscal integration functionality](fiscal-integration-for-retail-channel.md).</span></span> <span data-ttu-id="e4540-107">Je založena na řešení [EFR (Electronic Fiscal Register)](https://efsta.org/sicherheitsloesungen/) od [EFSTA](https://efsta.org/) a umožňuje komunikaci se službou EFR přes protokol HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e4540-107">It's based on the [EFR (Electronic Fiscal Register)](https://efsta.org/sicherheitsloesungen/) solution from [EFSTA](https://efsta.org/) and enables communication with the EFR service via the HTTPS protocol.</span></span> <span data-ttu-id="e4540-108">Služba EFR zajišťuje elektronickou registraci prodeje (EET - Elektronická evidence tržeb), tj. online převodu prodejních údajů do fiskální webové služby daňových úřadů.</span><span class="sxs-lookup"><span data-stu-id="e4540-108">The EFR service ensures Electronic Registration of Sales (EET - Elektronická evidence tržeb), that is, the online transmission of the sales data to a fiscal web service of tax authorities.</span></span>

<span data-ttu-id="e4540-109">Služba EFR by měla být hostována hardwarovou stanicí Commerce nebo samostatným počítačem, se kterým se lze propojit z hardwarové stanice.</span><span class="sxs-lookup"><span data-stu-id="e4540-109">The EFR service should be hosted on either the Commerce Hardware station or a separate machine that can be connected to from the Hardware station.</span></span> <span data-ttu-id="e4540-110">Ukázka je poskytnuta ve formě zdrojového kódu a je součástí sady software development kit (SDK) pro maloobchod.</span><span class="sxs-lookup"><span data-stu-id="e4540-110">The sample is provided in the form of source code and is part of the Retail software development kit (SDK).</span></span>

<span data-ttu-id="e4540-111">Společnost Microsoft nevydává žádný hardware, software nebo dokumentaci k EFSTA.</span><span class="sxs-lookup"><span data-stu-id="e4540-111">Microsoft doesn't release any hardware, software, or documentation from EFSTA.</span></span> <span data-ttu-id="e4540-112">Informace o tom, jak řešení EFR získat a provozovat, vám poskytne [EFSTA](https://efsta.org/kontakt/).</span><span class="sxs-lookup"><span data-stu-id="e4540-112">For information about how to get the EFR solution and operate it, contact [EFSTA](https://efsta.org/kontakt/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="e4540-113">Scénáře</span><span class="sxs-lookup"><span data-stu-id="e4540-113">Scenarios</span></span>

<span data-ttu-id="e4540-114">Následující scénáře uvádějí vzorek integrace fiskální registrační služby pro Českou republiku.</span><span class="sxs-lookup"><span data-stu-id="e4540-114">The following scenarios are covered by the fiscal registration service integration sample for the Czech Republic.</span></span>

- <span data-ttu-id="e4540-115">Registrace transakcí v hotovosti ve službě daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-115">Registration of cash transactions in the fiscal registration service.</span></span>

    - <span data-ttu-id="e4540-116">Odešlete podrobná data transakce do služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-116">Send detailed transaction data to the fiscal registration service.</span></span> <span data-ttu-id="e4540-117">Tyto údaje obsahují informace o řádku prodeje a informace o slevách, platbách a daních</span><span class="sxs-lookup"><span data-stu-id="e4540-117">This data includes sales line information, and information about discounts, payments, and taxes.</span></span> <span data-ttu-id="e4540-118">Služba daňové registrace dále odesílá data do webové služby finančního úřadu a přijímá od ní potvrzení obsahující daňový identifikační kód transakce.</span><span class="sxs-lookup"><span data-stu-id="e4540-118">The fiscal registration service further sends the data to the web-service of tax authorities and receives a confirmation from it that includes the fiscal identification code of the transaction.</span></span>
    - <span data-ttu-id="e4540-119">Zaznamenejte odpověď z daňové registrační služby.</span><span class="sxs-lookup"><span data-stu-id="e4540-119">Capture a response from the fiscal registration service.</span></span> <span data-ttu-id="e4540-120">Tato odpověď obsahuje finanční údaje, například daňový identifikační kód a bezpečnostní kód transakce atd.</span><span class="sxs-lookup"><span data-stu-id="e4540-120">This response includes fiscal data such as the fiscal identification code and the security code of the transaction, etc.</span></span>
    - <span data-ttu-id="e4540-121">Vytiskněte finanční údaje pro registrovanou transakci na účtence.</span><span class="sxs-lookup"><span data-stu-id="e4540-121">Print the fiscal data for a registered transaction on the receipt.</span></span>

- <span data-ttu-id="e4540-122">Registrace operací dárkových poukazů a vkladů pro odběratele ve službě daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-122">Registration of gift card operations and customer deposits in the fiscal registration service.</span></span>

    - <span data-ttu-id="e4540-123">Vydejte nebo přidejte peníze na dárkový poukaz.</span><span class="sxs-lookup"><span data-stu-id="e4540-123">Issue or add money to a gift card.</span></span>
    - <span data-ttu-id="e4540-124">Zaregistrujte vklad na účet odběratele.</span><span class="sxs-lookup"><span data-stu-id="e4540-124">Register a customer account deposit.</span></span>
    - <span data-ttu-id="e4540-125">Vytvořte objednávku odběratele a registrujte zálohu pro objednávku.</span><span class="sxs-lookup"><span data-stu-id="e4540-125">Create a customer order and register a deposit for the order.</span></span>
    - <span data-ttu-id="e4540-126">Upravte objednávku odběratele a přepište zálohu pro objednávku.</span><span class="sxs-lookup"><span data-stu-id="e4540-126">Edit a customer order and override the deposit for the order.</span></span>
    - <span data-ttu-id="e4540-127">Zrušte objednávku odběratele a refundujte zálohu pro objednávku.</span><span class="sxs-lookup"><span data-stu-id="e4540-127">Cancel a customer order and refund the deposit for the order.</span></span>

- <span data-ttu-id="e4540-128">Zpracování chyb, jako jsou následující možnosti.</span><span class="sxs-lookup"><span data-stu-id="e4540-128">Error handling, such as the following options.</span></span>

    - <span data-ttu-id="e4540-129">Opakujte fiskální registraci, pokud to je možné, například když není k dispozici služba fiskální registrace, není připravena nebo nereaguje.</span><span class="sxs-lookup"><span data-stu-id="e4540-129">Retry fiscal registration if a retry is possible, such as if the fiscal registration service isn't available, isn't ready, or isn't responding.</span></span>
    - <span data-ttu-id="e4540-130">Odložte fiskální registraci.</span><span class="sxs-lookup"><span data-stu-id="e4540-130">Postpone fiscal registration.</span></span>
    - <span data-ttu-id="e4540-131">Přeskočte daňovou registraci nebo označte transakci jako registrovanou a zahrňte informační kódy pro zaznamenání důvodu chyby a dalších informací.</span><span class="sxs-lookup"><span data-stu-id="e4540-131">Skip fiscal registration, or mark the transaction as registered, and include info codes to capture the reason for the failure and additional information.</span></span>
    - <span data-ttu-id="e4540-132">Zkontrolujte dostupnost služby daňové registrace, dříve než otevřete novou transakci prodeje nebo ji dokončíte.</span><span class="sxs-lookup"><span data-stu-id="e4540-132">Check the availability of the fiscal registration service before a new sales transaction is opened or a sales transaction is finalized.</span></span>

### <a name="default-data-mapping"></a><span data-ttu-id="e4540-133">Výchozí mapování dat</span><span class="sxs-lookup"><span data-stu-id="e4540-133">Default data mapping</span></span>

<span data-ttu-id="e4540-134">Následující výchozí mapování dat je součástí konfigurace poskytovatele fiskálního dokumentu, který je poskytován jako fiskální vzorek integrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-134">The following default data mapping is included in the fiscal document provider configuration that is provided as part of the fiscal integration sample.</span></span>

- <span data-ttu-id="e4540-135">Mapování sazeb daně z přidané hodnoty (DPH):</span><span class="sxs-lookup"><span data-stu-id="e4540-135">Value-added tax (VAT) rates mapping:</span></span>

    <span data-ttu-id="e4540-136">*A: 21,00; B: 15,00; C: 10,00; Z: 0,00*</span><span class="sxs-lookup"><span data-stu-id="e4540-136">*A: 21.00; B: 15.00; C: 10.00; Z: 0.00*</span></span>

- <span data-ttu-id="e4540-137">Výchozí mapování skupiny DPH.</span><span class="sxs-lookup"><span data-stu-id="e4540-137">Default VAT group mapping.</span></span> <span data-ttu-id="e4540-138">Jakékoli částky DPH, které nelze mapovat na některou z předem určených skupin DPH, budou připsány výchozí (základní) skupině DPH:</span><span class="sxs-lookup"><span data-stu-id="e4540-138">Any VAT amounts that cannot be mapped to one of the predetermined VAT groups will be attributed to the default (basic) VAT group:</span></span>

    <span data-ttu-id="e4540-139">*O*</span><span class="sxs-lookup"><span data-stu-id="e4540-139">*A*</span></span>

- <span data-ttu-id="e4540-140">Vložte zálohu mapování skupiny DPH.</span><span class="sxs-lookup"><span data-stu-id="e4540-140">Deposit VAT group mapping.</span></span> <span data-ttu-id="e4540-141">Částky zálohy odběratele a zálohy objednávky odběratele budou připsány skupině DPH zálohy:</span><span class="sxs-lookup"><span data-stu-id="e4540-141">Customer deposit amounts and customer order deposit amounts will be attributed to the deposit VAT group:</span></span>

    <span data-ttu-id="e4540-142">*Z*</span><span class="sxs-lookup"><span data-stu-id="e4540-142">*Z*</span></span>

### <a name="gift-cards"></a><span data-ttu-id="e4540-143">Dárkové poukazy</span><span class="sxs-lookup"><span data-stu-id="e4540-143">Gift cards</span></span>

<span data-ttu-id="e4540-144">Ukázka integrace daňové registrační služby implementuje následující pravidla související s dárkovými poukazy.</span><span class="sxs-lookup"><span data-stu-id="e4540-144">The fiscal registration service integration sample implements the following rules that are related to gift cards.</span></span>

- <span data-ttu-id="e4540-145">Řádky prodeje, které souvisejí s operacemi *Vydat dárkový poukaz* nebo *Přidat k dárkovému poukazu* v prodejních transakcích jsou označeny zvláštním atributem při registraci transakce v daňové registrační službě.</span><span class="sxs-lookup"><span data-stu-id="e4540-145">Sales lines that are related to the *Issue gift card* or *Add to gift card* operations in a sales transaction are marked with a special attribute when the transaction is registered in the fiscal registration service.</span></span>
- <span data-ttu-id="e4540-146">Platba dárkovým poukazem je považována za běžnou platbu a je označena zvláštním atributem při registraci transakce ve službě daňové registrace</span><span class="sxs-lookup"><span data-stu-id="e4540-146">A payment by gift card is considered a regular payment and marked with a special attribute when the transaction is registered in the fiscal registration service.</span></span>

### <a name="customer-account-deposits-and-customer-order-deposits"></a><span data-ttu-id="e4540-147">Vklady na účet odběratele a vklady objednávky odběratele</span><span class="sxs-lookup"><span data-stu-id="e4540-147">Customer account deposits and customer order deposits</span></span>

<span data-ttu-id="e4540-148">Ukázka integrace daňové registrační služby implementuje následující pravidla, která souvisí s vklady na účtu odběratele a vklady objednávky odběratelů.</span><span class="sxs-lookup"><span data-stu-id="e4540-148">The fiscal registration service integration sample implements the following rules that are related to customer account deposits and customer order deposits.</span></span>

- <span data-ttu-id="e4540-149">Transakce související s vkladem na účet odběratele nebo je vklad objednávky zákazníka registrována ve službě daňové registrace jako samostatný řádek transakce a je označen zvláštním atributem.</span><span class="sxs-lookup"><span data-stu-id="e4540-149">A transaction that is related to a customer account deposit or a customer order deposit is registered in the fiscal registration service as a single line transaction and is marked with a special attribute.</span></span> <span data-ttu-id="e4540-150">Skupina DPH zálohy je zadána v tomto řádku.</span><span class="sxs-lookup"><span data-stu-id="e4540-150">The deposit VAT group is specified in this line.</span></span>
- <span data-ttu-id="e4540-151">Při vytvoření hybridní objednávky odběratele, tedy objednávky odběratele, která obsahuje produkty, které lze převést mimo obchod odběratelem a k produktům, které budou vyzvednuty nebo expedovány, obsahuje transakce registrovaná ve službě daňové registrace obsahuje řádky pro produkty, které jsou prováděny, a také řádku objednávky vkladu.</span><span class="sxs-lookup"><span data-stu-id="e4540-151">When a hybrid customer order is created, that is, a customer order that contains products that can be carried out of the store by the customer, as well as products that will be picked up or shipped later, the transaction registered in the fiscal registration service contains lines for the products that are carried out, as well as a line for the order deposit.</span></span>
- <span data-ttu-id="e4540-152">Platba z účtu zákazníka je považována za běžnou platbu a je označena zvláštním atributem při registraci transakce ve službě daňové registrace</span><span class="sxs-lookup"><span data-stu-id="e4540-152">A payment from a customer account is considered a regular payment and marked with a special attribute when the transaction is registered in the fiscal registration service.</span></span>
- <span data-ttu-id="e4540-153">Částka vkladu objednávky odběratele použitá na objednávce odběratele v operaci *Vyzvednout* je považována za běžnou platbu a je označena zvláštním atributem při registraci transakce daňové registrace služby.</span><span class="sxs-lookup"><span data-stu-id="e4540-153">The customer order deposit amount that is applied to a customer order *Pick up* operation is considered a regular payment and marked with a special attribute when the transaction is registered in the fiscal registration service.</span></span>

### <a name="offline-registration"></a><span data-ttu-id="e4540-154">Offline registrace</span><span class="sxs-lookup"><span data-stu-id="e4540-154">Offline registration</span></span>

<span data-ttu-id="e4540-155">Pokud se nezdaří službě daňové registrace přenášet data transakce fiskálních webové služby finančního úřadu (například z důvodu limitu odezvy) a chcete dostat potvrzení z webové služby (to znamená fiskální identifikační kód transakce), generuje místní podpis transakce a zahrne ho jako speciální kód chyby v odpovědi.</span><span class="sxs-lookup"><span data-stu-id="e4540-155">If the fiscal registration service fails to transmit transaction data to the fiscal web service of tax authorities (e.g. due to the response timeout) and to receive a confirmation from the web-service (that is, the fiscal identification code of the transaction), it generates a local signature for the transaction and includes it and a special error code in the response.</span></span> <span data-ttu-id="e4540-156">Služba daňové registrace znovu odešle transakce v původní objednávce na pozadí ihned po obnovení síťového připojení.</span><span class="sxs-lookup"><span data-stu-id="e4540-156">The fiscal registration service resends transactions in original order in background as soon as the network connection is restored.</span></span>

### <a name="limitations-of-the-sample"></a><span data-ttu-id="e4540-157">Omezení vzorku</span><span class="sxs-lookup"><span data-stu-id="e4540-157">Limitations of the sample</span></span>

<span data-ttu-id="e4540-158">Služba daňové registrace podporuje pouze scénáře, kde je součástí ceny daň z prodeje.</span><span class="sxs-lookup"><span data-stu-id="e4540-158">The fiscal registration service supports only scenarios where sales tax is included in the price.</span></span> <span data-ttu-id="e4540-159">Proto musí být možnost **Ceny zahrnují DPH** nastavena na **Ano** pro obchody a odběratele.</span><span class="sxs-lookup"><span data-stu-id="e4540-159">Therefore, the **Price include sales tax** option must be set to **Yes** for both stores and customers.</span></span>

## <a name="set-up-commerce-for-czech-republic"></a><span data-ttu-id="e4540-160">Natavení aplikace Commerce pro Českou republiku</span><span class="sxs-lookup"><span data-stu-id="e4540-160">Set up Commerce for Czech Republic</span></span>

<span data-ttu-id="e4540-161">Tato část popisuje nastavení Commerce, která jsou specifická a doporučená pro Českou republiku.</span><span class="sxs-lookup"><span data-stu-id="e4540-161">This section describes the Commerce settings that are specific to and recommended for the Czech Republic.</span></span> <span data-ttu-id="e4540-162">Další informace naleznete v tématu [Domovská stránka Commerce](../index.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-162">For more information, see [Commerce home page](../index.md).</span></span>

<span data-ttu-id="e4540-163">Chcete-li použít funkci specifickou pro Českou republiku, je nutné zadat následující nastavení.</span><span class="sxs-lookup"><span data-stu-id="e4540-163">To use the Czech-specific functionality, you must specify the following settings.</span></span>

- <span data-ttu-id="e4540-164">V primární adrese právnické osoby nastavte pole **země/oblasti** na **CZE** (Česká republika).</span><span class="sxs-lookup"><span data-stu-id="e4540-164">In the primary address of the legal entity, set the **Country/region** field to **CZE** (Czech Republic).</span></span>
- <span data-ttu-id="e4540-165">V profilu funkce POS každého obchodu, který se nachází v rámci České republiky, nastavte pole **kód ISO** na **CZ** (Česká republika).</span><span class="sxs-lookup"><span data-stu-id="e4540-165">In the POS functionality profile of every store that is located in the Czech Republic, set the **ISO code** field to **CZ** (Czech Republic).</span></span>

<span data-ttu-id="e4540-166">Zadejte také následující nastavení pro Českou republiku.</span><span class="sxs-lookup"><span data-stu-id="e4540-166">You must also specify the following settings for the Czech Republic.</span></span> <span data-ttu-id="e4540-167">Po dokončení instalace musíte spustit příslušné distribuční úlohy.</span><span class="sxs-lookup"><span data-stu-id="e4540-167">Note that you must run appropriate distribution jobs after you complete the setup.</span></span>

### <a name="set-up-vat-per-czech-republic"></a><span data-ttu-id="e4540-168">Nastavení DPH pro Českou republiku</span><span class="sxs-lookup"><span data-stu-id="e4540-168">Set up VAT per Czech Republic</span></span>


<span data-ttu-id="e4540-169">Musíte vytvořit kódy DPH, skupiny daní DPH a skupiny DPH za zboží.</span><span class="sxs-lookup"><span data-stu-id="e4540-169">You must create sales tax codes, sales tax groups, and item sales tax groups.</span></span> <span data-ttu-id="e4540-170">Musíte také nastavit informace o DPH pro produkty a služby.</span><span class="sxs-lookup"><span data-stu-id="e4540-170">You must also set up sales tax information for products and services.</span></span> <span data-ttu-id="e4540-171">Další informace o způsobu nastavení a použití funkcí DPH získáte v části [Přehled DPH](../../financials/general-ledger/indirect-taxes-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-171">For more information about how to set up and use sales tax features, see [Sales tax overview](../../financials/general-ledger/indirect-taxes-overview.md).</span></span>


### <a name="set-up-stores"></a><span data-ttu-id="e4540-172">Nastavení obchodů</span><span class="sxs-lookup"><span data-stu-id="e4540-172">Set up stores</span></span>

<span data-ttu-id="e4540-173">Na stránce **Všechny obchody** aktualizujte podrobnosti o obchodu.</span><span class="sxs-lookup"><span data-stu-id="e4540-173">On the **All stores** page, update the store details.</span></span> <span data-ttu-id="e4540-174">Je nutné konkrétně nastavit následující parametry.</span><span class="sxs-lookup"><span data-stu-id="e4540-174">Specifically, set the following parameters.</span></span>

- <span data-ttu-id="e4540-175">V poli **Skupina DPH** zadejte skupinu DPH, kterou chcete použít pro prodeje výchozímu odběrateli.</span><span class="sxs-lookup"><span data-stu-id="e4540-175">In the **Sales tax group** field, specify the sales tax group that should be used for sales to the default customer.</span></span>
- <span data-ttu-id="e4540-176">Nastavte možnost **Ceny jsou včetně DPH** na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="e4540-176">Set the **Prices include sales tax** option to **Yes**.</span></span>
- <span data-ttu-id="e4540-177">V poli **název** zadejte název společnosti.</span><span class="sxs-lookup"><span data-stu-id="e4540-177">Set the **Name** field to the company name.</span></span> <span data-ttu-id="e4540-178">Tato změna pomáhá zajistit, že se název společnosti zobrazí na dokladu o prodeji.</span><span class="sxs-lookup"><span data-stu-id="e4540-178">This change helps guarantee that the company name appears on a sales receipt.</span></span> <span data-ttu-id="e4540-179">Případně můžete přidat název společnosti na prodejní doklad jako volný text.</span><span class="sxs-lookup"><span data-stu-id="e4540-179">Alternatively, you can add the company name to the sales receipt layout as free-form text.</span></span>
- <span data-ttu-id="e4540-180">Nastavte **daňové identifikační číslo (DIČ)** na identifikační číslo společnosti.</span><span class="sxs-lookup"><span data-stu-id="e4540-180">Set the **Tax identification number (TIN)** field to the company identification number.</span></span> <span data-ttu-id="e4540-181">Tato změna pomáhá zajistit, že se identifikační číslo společnosti zobrazí na dokladu o prodeji.</span><span class="sxs-lookup"><span data-stu-id="e4540-181">This change helps guarantee that the company identification number appears on a sales receipt.</span></span> <span data-ttu-id="e4540-182">Případně můžete přidat identifikační číslo společnosti na prodejní doklad jako volný text.</span><span class="sxs-lookup"><span data-stu-id="e4540-182">Alternatively, you can add the company identification number to the sales receipt layout as free-form text.</span></span>

### <a name="set-up-functionality-profiles"></a><span data-ttu-id="e4540-183">Nastavení funkčních profilů</span><span class="sxs-lookup"><span data-stu-id="e4540-183">Set up functionality profiles</span></span>

<span data-ttu-id="e4540-184">Nastavte funkční profily POS.</span><span class="sxs-lookup"><span data-stu-id="e4540-184">Set up POS functionality profiles.</span></span>

- <span data-ttu-id="e4540-185">Na pevné záložce **Číslování dokladů** nastavte číslování dokladů vytvořením nebo aktualizací záznamů pro typy příjmových transakcí **Prodej**, **Prodejní objednávka** a **Vrácení**.</span><span class="sxs-lookup"><span data-stu-id="e4540-185">On the **Receipt numbering** FastTab, set up receipt numbering by creating or updating records for the **Sale**, **Sales order**, and **Return** receipt transaction types.</span></span>

### <a name="set-up-registration-numbers"></a><span data-ttu-id="e4540-186">Nastavení registračních čísel</span><span class="sxs-lookup"><span data-stu-id="e4540-186">Set up registration numbers</span></span>

1. <span data-ttu-id="e4540-187">Přejděte na položky **Správa organizace \> Globální adresář \> Typy registrace \> Typy registrace**.</span><span class="sxs-lookup"><span data-stu-id="e4540-187">Go to **Organization administration \> Global address book \> Registration types \> Registration types**.</span></span> <span data-ttu-id="e4540-188">Vytvořte nový typ registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-188">Create a new registration type.</span></span> <span data-ttu-id="e4540-189">Určete pole **Země/oblast** na **CZE** (Česká republika) a omezte je na organizaci.</span><span class="sxs-lookup"><span data-stu-id="e4540-189">Specify the **Country/region** field to **CZE** (Czech Republic) and make it restricted to Organization.</span></span>
2. <span data-ttu-id="e4540-190">Přejděte na položky **Správa organizace \> Globální adresář \> Typy registrace \> Kategorie registrace**.</span><span class="sxs-lookup"><span data-stu-id="e4540-190">Go to **Organization administration \> Global address book \> Registration types \> Registration categories**.</span></span> <span data-ttu-id="e4540-191">Vytvořte novou kategorii registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-191">Create a new registration category.</span></span> <span data-ttu-id="e4540-192">Vyberte typ registrace z předchozího kroku a nastavte **kategorii registrace** na **ID místa obchodu**.</span><span class="sxs-lookup"><span data-stu-id="e4540-192">Select the registration type from the previous step and set the **Registration category** to **Business Premise ID**.</span></span>
3. <span data-ttu-id="e4540-193">Přejděte do nabídky **Správa organizace \> Organizace \> Provozní jednotky**.</span><span class="sxs-lookup"><span data-stu-id="e4540-193">Go to **Organization administration \> Organizations \> Operating units**.</span></span> <span data-ttu-id="e4540-194">Pro každý obchod v rámci České republiky vyberte jednotku vztahující se k obchodu.</span><span class="sxs-lookup"><span data-stu-id="e4540-194">For each store located in the Czech Republic, select the unit related to the store.</span></span> <span data-ttu-id="e4540-195">Na pevné záložce **Adresa** rozbalte rozevírací seznam **Další možnosti** a vyberte **Upřesnit**.</span><span class="sxs-lookup"><span data-stu-id="e4540-195">On the **Address** FastTab expand the **More options** drop-down list and select **Advanced**.</span></span> 
4. <span data-ttu-id="e4540-196">Na otevřené stránce **spravovat adresy** je nutné zadat následující nastavení.</span><span class="sxs-lookup"><span data-stu-id="e4540-196">On the opened **Manage addresses** page you must specify following setting.</span></span>

    - <span data-ttu-id="e4540-197">Na pevné záložce **Adresa** nastavte pole **země/oblast** na **CZE**.</span><span class="sxs-lookup"><span data-stu-id="e4540-197">On the **Address** FastTab set the **Country/region** field to **CZE**.</span></span>
    - <span data-ttu-id="e4540-198">Na pevné záložce **ID registrace** vytvořte nový záznam.</span><span class="sxs-lookup"><span data-stu-id="e4540-198">On the **Registration ID** FastTab create a new record.</span></span> <span data-ttu-id="e4540-199">Vyberte dříve vytvořený typ registrace a nastavte registrační číslo.</span><span class="sxs-lookup"><span data-stu-id="e4540-199">Select the registration type created earlier and set the registration number.</span></span>

### <a name="configure-custom-fields-so-that-they-can-be-used-in-receipt-formats-for-sales-receipts"></a><span data-ttu-id="e4540-200">Nakonfigurujte vlastní pole tak, aby bylo možné použít je ve formátech příjemky pro prodejní příjemky</span><span class="sxs-lookup"><span data-stu-id="e4540-200">Configure custom fields so that they can be used in receipt formats for sales receipts</span></span>

<span data-ttu-id="e4540-201">Můžete konfigurovat jazykový text a vlastní pole, která se používají ve formátech příjemky POS.</span><span class="sxs-lookup"><span data-stu-id="e4540-201">You can configure the language text and custom fields that are used in the POS receipt formats.</span></span> <span data-ttu-id="e4540-202">Výchozí společnost uživatele, který vytvoří nastavení příjmu, musí být stejná právnická osoba, pro kterou se vytváří nastavení text jazyka.</span><span class="sxs-lookup"><span data-stu-id="e4540-202">The default company of the user who creates the receipt setup should be the same legal entity where the language text setup is created.</span></span> <span data-ttu-id="e4540-203">Alternativně lze vytvořit texty ve stejném jazyce, které mají být vytvořeny ve výchozí společnosti uživatele a právnické osobě prodejny, pro kterou se nastavení vytváří.</span><span class="sxs-lookup"><span data-stu-id="e4540-203">Alternatively, the same language texts should be created in both the user's default company and the legal entity of the store that the setup is created for.</span></span>

<span data-ttu-id="e4540-204">Na stránce **jazykový text** přidejte následující záznamy popisků vlastního pole rozvržení účtenky.</span><span class="sxs-lookup"><span data-stu-id="e4540-204">On the **Language text** page, add the following records for the labels of the custom fields for receipt layouts.</span></span> <span data-ttu-id="e4540-205">Upozorňujeme, že hodnoty **ID jazyka**, **ID textu** a **Text**, které jsou zobrazeny v tabulce, jsou jenom příklady.</span><span class="sxs-lookup"><span data-stu-id="e4540-205">Note that the **Language ID**, **Text ID**, and **Text** values that are shown in the table are just examples.</span></span> <span data-ttu-id="e4540-206">Lze je změnit tak, aby splňovaly vaše požadavky.</span><span class="sxs-lookup"><span data-stu-id="e4540-206">You can change them to meet your requirements.</span></span> <span data-ttu-id="e4540-207">Hodnoty **ID textu**, které budete používat, však musí být jedinečné a musí být rovny nebo větší než 900001.</span><span class="sxs-lookup"><span data-stu-id="e4540-207">However, the **Text ID** values that you use must be unique, and they must be equal to or more than 900001.</span></span>

<span data-ttu-id="e4540-208">Přidejte následující štítky POS do oddílu **POS** v poli **Jazykový text** z tabulky:</span><span class="sxs-lookup"><span data-stu-id="e4540-208">Add the following POS labels to the **POS** section of **Language text** from the table:</span></span>

| <span data-ttu-id="e4540-209">ID jazyka</span><span class="sxs-lookup"><span data-stu-id="e4540-209">Language ID</span></span> | <span data-ttu-id="e4540-210">ID textu</span><span class="sxs-lookup"><span data-stu-id="e4540-210">Text ID</span></span> | <span data-ttu-id="e4540-211">Text</span><span class="sxs-lookup"><span data-stu-id="e4540-211">Text</span></span>                   |
|-------------|---------|------------------------|
| <span data-ttu-id="e4540-212">cs</span><span class="sxs-lookup"><span data-stu-id="e4540-212">en-US</span></span>       | <span data-ttu-id="e4540-213">900001</span><span class="sxs-lookup"><span data-stu-id="e4540-213">900001</span></span>  | <span data-ttu-id="e4540-214">ID provozovny/pokladny</span><span class="sxs-lookup"><span data-stu-id="e4540-214">ID provozovny/pokladny</span></span> |
| <span data-ttu-id="e4540-215">cs</span><span class="sxs-lookup"><span data-stu-id="e4540-215">en-US</span></span>       | <span data-ttu-id="e4540-216">900002</span><span class="sxs-lookup"><span data-stu-id="e4540-216">900002</span></span>  | <span data-ttu-id="e4540-217">BKP</span><span class="sxs-lookup"><span data-stu-id="e4540-217">BKP</span></span>                    |
| <span data-ttu-id="e4540-218">cs</span><span class="sxs-lookup"><span data-stu-id="e4540-218">en-US</span></span>       | <span data-ttu-id="e4540-219">900003</span><span class="sxs-lookup"><span data-stu-id="e4540-219">900003</span></span>  | <span data-ttu-id="e4540-220">FIK</span><span class="sxs-lookup"><span data-stu-id="e4540-220">FIK</span></span>                    |
| <span data-ttu-id="e4540-221">cs</span><span class="sxs-lookup"><span data-stu-id="e4540-221">en-US</span></span>       | <span data-ttu-id="e4540-222">900004</span><span class="sxs-lookup"><span data-stu-id="e4540-222">900004</span></span>  | <span data-ttu-id="e4540-223">PKP</span><span class="sxs-lookup"><span data-stu-id="e4540-223">PKP</span></span>                    |
| <span data-ttu-id="e4540-224">cs</span><span class="sxs-lookup"><span data-stu-id="e4540-224">en-US</span></span>       | <span data-ttu-id="e4540-225">900005</span><span class="sxs-lookup"><span data-stu-id="e4540-225">900005</span></span>  | <span data-ttu-id="e4540-226">Informace</span><span class="sxs-lookup"><span data-stu-id="e4540-226">Info</span></span>                   |
| <span data-ttu-id="e4540-227">cs</span><span class="sxs-lookup"><span data-stu-id="e4540-227">en-US</span></span>       | <span data-ttu-id="e4540-228">900006</span><span class="sxs-lookup"><span data-stu-id="e4540-228">900006</span></span>  | <span data-ttu-id="e4540-229">Pořadové číslo</span><span class="sxs-lookup"><span data-stu-id="e4540-229">Sequence number</span></span>        |

<span data-ttu-id="e4540-230">Na stránce **Vlastní pole** přidejte následující záznamy popisků vlastního pole rozvržení účtenky.</span><span class="sxs-lookup"><span data-stu-id="e4540-230">On the **Custom fields** page, add the following records for the custom fields for receipt layouts.</span></span> <span data-ttu-id="e4540-231">Upozorňujeme, že hodnoty **ID textu titulku** musí odpovídat hodnotám **ID textu**, které jste zadali na stránce **jazykový text**:</span><span class="sxs-lookup"><span data-stu-id="e4540-231">Note that **Caption text ID** values must correspond to the **Text ID** values that you specified on the **Language text** page:</span></span>

| <span data-ttu-id="e4540-232">Název</span><span class="sxs-lookup"><span data-stu-id="e4540-232">Name</span></span>                 | <span data-ttu-id="e4540-233">Typ</span><span class="sxs-lookup"><span data-stu-id="e4540-233">Type</span></span>    | <span data-ttu-id="e4540-234">ID textu titulku</span><span class="sxs-lookup"><span data-stu-id="e4540-234">Caption text ID</span></span> |
|----------------------|---------|-----------------|
| <span data-ttu-id="e4540-235">TLT</span><span class="sxs-lookup"><span data-stu-id="e4540-235">TLT</span></span>                  | <span data-ttu-id="e4540-236">Účtenka</span><span class="sxs-lookup"><span data-stu-id="e4540-236">Receipt</span></span> | <span data-ttu-id="e4540-237">900001</span><span class="sxs-lookup"><span data-stu-id="e4540-237">900001</span></span>          |
| <span data-ttu-id="e4540-238">SEC</span><span class="sxs-lookup"><span data-stu-id="e4540-238">SEC</span></span>                  | <span data-ttu-id="e4540-239">Účtenka</span><span class="sxs-lookup"><span data-stu-id="e4540-239">Receipt</span></span> | <span data-ttu-id="e4540-240">900002</span><span class="sxs-lookup"><span data-stu-id="e4540-240">900002</span></span>          |
| <span data-ttu-id="e4540-241">SIGN</span><span class="sxs-lookup"><span data-stu-id="e4540-241">SIGN</span></span>                 | <span data-ttu-id="e4540-242">Účtenka</span><span class="sxs-lookup"><span data-stu-id="e4540-242">Receipt</span></span> | <span data-ttu-id="e4540-243">900003</span><span class="sxs-lookup"><span data-stu-id="e4540-243">900003</span></span>          |
| <span data-ttu-id="e4540-244">FISCAL</span><span class="sxs-lookup"><span data-stu-id="e4540-244">FISCAL</span></span>               | <span data-ttu-id="e4540-245">Účtenka</span><span class="sxs-lookup"><span data-stu-id="e4540-245">Receipt</span></span> | <span data-ttu-id="e4540-246">900004</span><span class="sxs-lookup"><span data-stu-id="e4540-246">900004</span></span>          |
| <span data-ttu-id="e4540-247">INFO</span><span class="sxs-lookup"><span data-stu-id="e4540-247">INFO</span></span>                 | <span data-ttu-id="e4540-248">Účtenka</span><span class="sxs-lookup"><span data-stu-id="e4540-248">Receipt</span></span> | <span data-ttu-id="e4540-249">900005</span><span class="sxs-lookup"><span data-stu-id="e4540-249">900005</span></span>          |
| <span data-ttu-id="e4540-250">CONTINUOUSNUMBER</span><span class="sxs-lookup"><span data-stu-id="e4540-250">CONTINUOUSNUMBER</span></span>     | <span data-ttu-id="e4540-251">Účtenka</span><span class="sxs-lookup"><span data-stu-id="e4540-251">Receipt</span></span> | <span data-ttu-id="e4540-252">900006</span><span class="sxs-lookup"><span data-stu-id="e4540-252">900006</span></span>          |

### <a name="configure-receipt-formats"></a><span data-ttu-id="e4540-253">Konfigurace formátů příjemky</span><span class="sxs-lookup"><span data-stu-id="e4540-253">Configure receipt formats</span></span>

<span data-ttu-id="e4540-254">Pro každý požadovaný formát příjemky změňte hodnotu pole **Chování tisku** na **vždy tisknout**.</span><span class="sxs-lookup"><span data-stu-id="e4540-254">For every required receipt format, change the value of the **Print behavior** field to **Always print**.</span></span>

<span data-ttu-id="e4540-255">V Návrháři formátu příjemky přidejte následující vlastní pole do příslušných oddílů příjemky.</span><span class="sxs-lookup"><span data-stu-id="e4540-255">In the Receipt format designer, add the following custom fields to the appropriate receipt sections.</span></span> <span data-ttu-id="e4540-256">Všimněte si, že názvy polí odpovídají jazykovým textům, které jste definovali v předchozím oddílu.</span><span class="sxs-lookup"><span data-stu-id="e4540-256">Note that field names correspond to the language texts that you defined in the previous section.</span></span>

- <span data-ttu-id="e4540-257">**Záhlaví:** Přidejte následující pole.</span><span class="sxs-lookup"><span data-stu-id="e4540-257">**Header:** Add the following fields.</span></span>

    - <span data-ttu-id="e4540-258">**Název obchodu** a **daňové identifikační číslo**: tato pole umožňují vytisknout na účtenky název a identifikační číslo společnosti.</span><span class="sxs-lookup"><span data-stu-id="e4540-258">**Store name** and **Tax Identification Number**: these fields are used to print the company name and identity number on receipts.</span></span> <span data-ttu-id="e4540-259">Případně můžete přidat název společnosti a číslo identity do rozvržení jako volný text.</span><span class="sxs-lookup"><span data-stu-id="e4540-259">Alternatively, you can add the company name and identity number to the layout as free-form text.</span></span>
    - <span data-ttu-id="e4540-260">**Adresa obchodu**, **datum**, **čas 24H**, **čísla účtenky**, a **číslo registrační pokladny**.</span><span class="sxs-lookup"><span data-stu-id="e4540-260">**Store address**, **Date**, **Time 24H**, **Receipt Number**, and **Register number**.</span></span>
    - <span data-ttu-id="e4540-261">**Číselná řada**: Toto pole identifikuje počet hotovostních transakcí daňové registrace služby.</span><span class="sxs-lookup"><span data-stu-id="e4540-261">**Sequence number**: this field identifies the number of the cash transaction in the fiscal registration service.</span></span>

- <span data-ttu-id="e4540-262">**Řádky:** Přidejte následující pole.</span><span class="sxs-lookup"><span data-stu-id="e4540-262">**Lines:** Add the following fields.</span></span>

    - <span data-ttu-id="e4540-263">**Název položky**</span><span class="sxs-lookup"><span data-stu-id="e4540-263">**Item name**</span></span>
    - <span data-ttu-id="e4540-264">**Množství**</span><span class="sxs-lookup"><span data-stu-id="e4540-264">**Qty**</span></span>
    - <span data-ttu-id="e4540-265">**Celková cena s daní**</span><span class="sxs-lookup"><span data-stu-id="e4540-265">**Total price with tax**</span></span>

- <span data-ttu-id="e4540-266">**Zápatí:** Přidejte následující pole.</span><span class="sxs-lookup"><span data-stu-id="e4540-266">**Footer:** Add the following fields.</span></span>

    - <span data-ttu-id="e4540-267">Pole platby, aby se vytiskly částky platby pro každou metodu platby.</span><span class="sxs-lookup"><span data-stu-id="e4540-267">Payment fields, so that the payment amounts for each payment method are printed.</span></span> <span data-ttu-id="e4540-268">Například přidejte pole **název úhrady** a **Částka úhrady** na jeden řádek rozvržení.</span><span class="sxs-lookup"><span data-stu-id="e4540-268">For example, add the **Tender name** and **Tender amount** fields to one line of the layout.</span></span>
    - <span data-ttu-id="e4540-269">**ID provozovny/pokladny**: toto pole vytiskne identifikátory obchodních prostorů a registrační pokladny.</span><span class="sxs-lookup"><span data-stu-id="e4540-269">**ID provozovny/pokladny**: this field prints the identifiers of the business premises and the cash register.</span></span>
    - <span data-ttu-id="e4540-270">**BKP**: Toto pole vytiskne bezpečnostní kód plátce daně, který přiřazuje služba daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-270">**BKP**: this field prints the taxpayer's security code that is assigned by the fiscal registration service.</span></span>
    - <span data-ttu-id="e4540-271">**FIK**: toto pole vytiskne daňový identifikační kód transakce, který přiděluje webová služba daňového úřadu v případě úspěšné online registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-271">**FIK**: this field prints the fiscal identification code of the transaction that is assigned by the web-service of tax authorities in case of successful online registration.</span></span>
    - <span data-ttu-id="e4540-272">**PKP**: Toto pole vytiskne kód podpisu správce daně, který je generován v případě offline registrace u služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-272">**PKP**: this field prints the taxpayer's signature code that is generated by the fiscal registration service in case of offline registration.</span></span>
    - <span data-ttu-id="e4540-273">**Informace**: Toto pole vytiskne doplňkové informace ze služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-273">**Info**: this field prints the additional information from the fiscal registration service.</span></span>

<span data-ttu-id="e4540-274">Další informace o tom, jak pracovat s formáty příjemek, naleznete v tématu [Nastavení a návrh formátů příjmu](../receipt-templates-printing.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-274">For more information about how to work with receipt formats, see [Set up and design receipt formats](../receipt-templates-printing.md).</span></span>

### <a name="configure-fiscal-integration"></a><span data-ttu-id="e4540-275">Konfigurace fiskální integrace</span><span class="sxs-lookup"><span data-stu-id="e4540-275">Configure fiscal integration</span></span>

<span data-ttu-id="e4540-276">Postupujte podle kroků pro nastavení fiskální integrace popsané v části [Nastavení fiskální integrace pro kanály Commerce](setting-up-fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-276">Complete the fiscal integration setup steps as described in [Set up the fiscal integration for Commerce channels](setting-up-fiscal-integration-for-retail-channel.md).</span></span>

- <span data-ttu-id="e4540-277">[Nastavení procesu fiskální registrace](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="e4540-277">[Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span> <span data-ttu-id="e4540-278">Všimněte si také nastavení pro proces fiskální registrace, který je [specifický pro tuto ukázku služby fiskální registrace](#set-up-the-registration-process).</span><span class="sxs-lookup"><span data-stu-id="e4540-278">Note also the settings for the fiscal registration process that are [specific to this fiscal registration service integration sample](#set-up-the-registration-process).</span></span>
- <span data-ttu-id="e4540-279">[Nastavení zpracování chyb](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="e4540-279">[Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>
- <span data-ttu-id="e4540-280">[Povolit ruční provedení zápisu odložené daňové registrace](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="e4540-280">[Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

## <a name="deployment-guidelines-for-cash-registers-for-czech-republic"></a><span data-ttu-id="e4540-281">Pokyny k nasazení registračních pokladen pro Českou republiku</span><span class="sxs-lookup"><span data-stu-id="e4540-281">Deployment guidelines for cash registers for Czech Republic</span></span>

<span data-ttu-id="e4540-282">Ukázka integrace fiskální služby pro Českou republiku je součástí sady Retail SDK.</span><span class="sxs-lookup"><span data-stu-id="e4540-282">The fiscal registration service integration sample for the Czech Republic is part of the Retail SDK.</span></span> <span data-ttu-id="e4540-283">Informace o instalaci a použití sady Retail SDK naleznete v tématu [Architektura sady Retail software development kit (SDK)](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-283">For information about how to install and use the Retail SDK, see the [Retail software development kit (SDK) architecture](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="e4540-284">Tento příklad sestává z rozšíření pro CRT a hardwarovou stanici.</span><span class="sxs-lookup"><span data-stu-id="e4540-284">This sample consists of extensions for the CRT and Hardware station.</span></span> <span data-ttu-id="e4540-285">Ke spuštění tohoto příkladu musíte změnit a sestavit projekty CRT a hardwarové stanice.</span><span class="sxs-lookup"><span data-stu-id="e4540-285">To run this sample, you must modify and build the CRT and Hardware station projects.</span></span> <span data-ttu-id="e4540-286">Doporučujeme používat nemodifikovanou sadu Retail SDK k provedení změn, které jsou popsány v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="e4540-286">We recommend that you use an unmodified Retail SDK to make the changes that are described in this topic.</span></span> <span data-ttu-id="e4540-287">Rovněž doporučujeme používat zdrojový systému kontroly, jako je například Azure DevOps, kde žádné soubory nebyly dosud změněny.</span><span class="sxs-lookup"><span data-stu-id="e4540-287">We also recommend that you use a source control system, such as Azure DevOps, where no files have been changed yet.</span></span>

<span data-ttu-id="e4540-288">Tento postup slouží k nastavení vývojového prostředí, abyste mohli testovat a rozšířit vzorek.</span><span class="sxs-lookup"><span data-stu-id="e4540-288">Follow these steps to set up a development environment so that you can test and extend the sample.</span></span>

### <a name="enable-commerce-runtime-extensions"></a><span data-ttu-id="e4540-289">Povolit rozšíření služby Commerce runtime</span><span class="sxs-lookup"><span data-stu-id="e4540-289">Enable Commerce runtime extensions</span></span>

<span data-ttu-id="e4540-290">Komponenty rozšíření CRT jsou součástí ukázek CRT.</span><span class="sxs-lookup"><span data-stu-id="e4540-290">The CRT extension components are included in the CRT samples.</span></span> <span data-ttu-id="e4540-291">Pro dokončení následujících postupů otevřete řešení CRT, **CommerceRuntimeSamples.sln**, v části **RetailSdk\\SampleExtensions\\CommerceRuntime**.</span><span class="sxs-lookup"><span data-stu-id="e4540-291">To complete the following procedures, open the CRT solution, **CommerceRuntimeSamples.sln**, under **RetailSdk\\SampleExtensions\\CommerceRuntime**.</span></span>

#### <a name="documentproviderefrsample-component"></a><span data-ttu-id="e4540-292">Komponenta DocumentProvider.EFRSample</span><span class="sxs-lookup"><span data-stu-id="e4540-292">DocumentProvider.EFRSample component</span></span>

1. <span data-ttu-id="e4540-293">Najděte projekt **Runtime.Extensions.DocumentProvider.EFRSample** a vytvořte ho.</span><span class="sxs-lookup"><span data-stu-id="e4540-293">Find the **Runtime.Extensions.DocumentProvider.EFRSample** project, and build it.</span></span>
2. <span data-ttu-id="e4540-294">Ve složce **Runtime.Extensions.DocumentProvider.EFRSample\\bin\\Debug** vyhledejte soubor sestavení **Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll**.</span><span class="sxs-lookup"><span data-stu-id="e4540-294">In the **Runtime.Extensions.DocumentProvider.EFRSample\\bin\\Debug** folder, find the **Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll** assembly file.</span></span>
3. <span data-ttu-id="e4540-295">Zkopírujte soubor sestavení do složky rozšíření CRT:</span><span class="sxs-lookup"><span data-stu-id="e4540-295">Copy the assembly file to the CRT extensions folder:</span></span>

    - <span data-ttu-id="e4540-296">**Commerce Scale Unit::** Zkopírujte sestavení do složky **\\bin\\ext** v umístění serveru Microsoft Internet Information Services (IIS) Commerce Scale Unit.</span><span class="sxs-lookup"><span data-stu-id="e4540-296">**Commerce Scale Unit:** Copy the assembly to the **\\bin\\ext** folder under the Microsoft Internet Information Services (IIS) Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="e4540-297">**Místní CRT v Modern POS:** Zkopírujte sestavení do složky **\\ext** v umístění místního makléře klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="e4540-297">**Local CRT on Modern POS:** Copy the assembly to the **\\ext** folder under the local CRT client broker location.</span></span>

4. <span data-ttu-id="e4540-298">Najděte konfigurační soubor rozšíření pro CRT:</span><span class="sxs-lookup"><span data-stu-id="e4540-298">Find the extension configuration file for CRT:</span></span>

    - <span data-ttu-id="e4540-299">**Commerce Scale Unit:** Soubor je nazván **commerceruntime.ext.config** a je uložen ve složce **bin\\ext.** pod umístěním webu IIS Commerce Scale Unit:.</span><span class="sxs-lookup"><span data-stu-id="e4540-299">**Commerce Scale Unit:** The file is named **commerceruntime.ext.config**, and it's in the **bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="e4540-300">**Místní CRT v Modern POS:** Soubor je nazván **CommerceRuntime.MPOSOffline.Ext.config** a nachází se v místní složce zprostředkovatele klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="e4540-300">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

5. <span data-ttu-id="e4540-301">Zaregistrujte změnu CRT v konfiguračním souboru rozšíření.</span><span class="sxs-lookup"><span data-stu-id="e4540-301">Register the CRT change in the extension configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.EFRSample" />
    ```

#### <a name="documentproviderdatamodelefr-component"></a><span data-ttu-id="e4540-302">Komponenta DocumentProvider.DataModelEFR</span><span class="sxs-lookup"><span data-stu-id="e4540-302">DocumentProvider.DataModelEFR component</span></span>

1. <span data-ttu-id="e4540-303">Najděte projekt **Runtime.Extensions.DocumentProvider.DataModelEFR** a vytvořte ho.</span><span class="sxs-lookup"><span data-stu-id="e4540-303">Find the **Runtime.Extensions.DocumentProvider.DataModelEFR** project, and build it.</span></span>
2. <span data-ttu-id="e4540-304">Ve složce **Runtime.Extensions.DocumentProvider.DataModelEFR\\bin\\Debug** vyhledejte soubor sestavení **Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll**.</span><span class="sxs-lookup"><span data-stu-id="e4540-304">In the **Runtime.Extensions.DocumentProvider.DataModelEFR\\bin\\Debug** folder, find the **Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll** assembly file.</span></span>
3. <span data-ttu-id="e4540-305">Zkopírujte soubor sestavení do složky rozšíření CRT:</span><span class="sxs-lookup"><span data-stu-id="e4540-305">Copy the assembly file to the CRT extensions folder:</span></span>

    - <span data-ttu-id="e4540-306">**Commerce Scale Unit::** Zkopírujte sestavení do složky **\\bin\\ext** v umístění serveru Commerce Scale Unit.</span><span class="sxs-lookup"><span data-stu-id="e4540-306">**Commerce Scale Unit:** Copy the assembly to the **\\bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="e4540-307">**Místní CRT v Modern POS:** Zkopírujte sestavení do složky **\\ext** v umístění místního makléře klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="e4540-307">**Local CRT on Modern POS:** Copy the assembly to the **\\ext** folder under the local CRT client broker location.</span></span>

4. <span data-ttu-id="e4540-308">Najděte konfigurační soubor rozšíření pro CRT:</span><span class="sxs-lookup"><span data-stu-id="e4540-308">Find the extension configuration file for CRT:</span></span>

    - <span data-ttu-id="e4540-309">**Commerce Scale Unit:** Soubor je nazván **commerceruntime.ext.config** a je uložen ve složce **bin\\ext.** pod umístěním webu IIS Commerce Scale Unit:.</span><span class="sxs-lookup"><span data-stu-id="e4540-309">**Commerce Scale Unit:** The file is named **commerceruntime.ext.config**, and it's in the **bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="e4540-310">**Místní CRT v Modern POS:** Soubor je nazván **CommerceRuntime.MPOSOffline.Ext.config** a nachází se v místní složce zprostředkovatele klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="e4540-310">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

5. <span data-ttu-id="e4540-311">Zaregistrujte změnu CRT v konfiguračním souboru rozšíření.</span><span class="sxs-lookup"><span data-stu-id="e4540-311">Register the CRT change in the extension configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR" />
    ```

#### <a name="update-extension-configuration-file"></a><span data-ttu-id="e4540-312">Aktualizace konfiguračního souboru rozšíření</span><span class="sxs-lookup"><span data-stu-id="e4540-312">Update extension configuration file</span></span>

1. <span data-ttu-id="e4540-313">Najděte konfigurační soubor rozšíření pro CRT:</span><span class="sxs-lookup"><span data-stu-id="e4540-313">Find the extension configuration file for CRT:</span></span>

    - <span data-ttu-id="e4540-314">**Commerce Scale Unit:** Soubor je nazván **commerceruntime.ext.config** a je uložen ve složce **bin\\ext.** pod umístěním webu IIS Commerce Scale Unit:.</span><span class="sxs-lookup"><span data-stu-id="e4540-314">**Commerce Scale Unit:** The file is named **commerceruntime.ext.config**, and it's in the **bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="e4540-315">**Místní CRT v Modern POS:** Soubor je nazván **CommerceRuntime.MPOSOffline.Ext.config** a nachází se v místní složce zprostředkovatele klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="e4540-315">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

2. <span data-ttu-id="e4540-316">Zaregistrujte změnu CRT v konfiguračním souboru rozšíření.</span><span class="sxs-lookup"><span data-stu-id="e4540-316">Register the CRT change in the extension configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Microsoft.Dynamics.Commerce.Runtime.ReceiptsCzechia" />
    ```

### <a name="enable-hardware-station-extensions"></a><span data-ttu-id="e4540-317">Povolení rozšíření hardwarové stanice</span><span class="sxs-lookup"><span data-stu-id="e4540-317">Enable Hardware station extensions</span></span>

<span data-ttu-id="e4540-318">Komponenty rozšíření hardwarové stanice jsou součástí ukázek hardwarové stanice.</span><span class="sxs-lookup"><span data-stu-id="e4540-318">The Hardware station extension components are included in the Hardware station samples.</span></span> <span data-ttu-id="e4540-319">Pro dokončení následujících postupů otevřete řešení CRT, **HardwareStationSamples.sln** v části **RetailSdk\\SampleExtensions\\HardwareStation**.</span><span class="sxs-lookup"><span data-stu-id="e4540-319">To complete the following procedures, open the solution, **HardwareStationSamples.sln.sln**, under **RetailSdk\\SampleExtensions\\HardwareStation**.</span></span>

#### <a name="efrsample-component"></a><span data-ttu-id="e4540-320">Komponenta EFRSample</span><span class="sxs-lookup"><span data-stu-id="e4540-320">EFRSample component</span></span>

1. <span data-ttu-id="e4540-321">Najděte projekt **HardwareStation.Extension.EFRSample** a vytvořte ho.</span><span class="sxs-lookup"><span data-stu-id="e4540-321">Find the **HardwareStation.Extension.EFRSample** project, and build it.</span></span>
2. <span data-ttu-id="e4540-322">Ve složce **Extension.EFRSample\\bin\\Debug** vyhledejte následující soubory:</span><span class="sxs-lookup"><span data-stu-id="e4540-322">In the **Extension.EFRSample\\bin\\Debug** folder, find following files:</span></span>

    - <span data-ttu-id="e4540-323">Sestavení **Contoso.Commerce.HardwareStation.EFRSample.dll**</span><span class="sxs-lookup"><span data-stu-id="e4540-323">The **Contoso.Commerce.HardwareStation.EFRSample.dll** assembly</span></span>
    - <span data-ttu-id="e4540-324">Sestavení **Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll**</span><span class="sxs-lookup"><span data-stu-id="e4540-324">The **Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll** assembly</span></span>

3. <span data-ttu-id="e4540-325">Zkopírujte soubory sestavení do složky rozšíření hardwarové stanice:</span><span class="sxs-lookup"><span data-stu-id="e4540-325">Copy the assembly files to the Hardware station extensions folder:</span></span>

    - <span data-ttu-id="e4540-326">**Sdílená hardwarové stanice:** Zkopírujte složku **bin** pod umístění webu hardwarové stanice IIS.</span><span class="sxs-lookup"><span data-stu-id="e4540-326">**Shared hardware station:** Copy the files to the **bin** folder under the IIS Hardware station site location.</span></span>
    - <span data-ttu-id="e4540-327">**Vyhrazená hardwarová stanice pro Modern POS:** Zkopírujte soubory do stanice zprostředkovatele klienta Modern POS.</span><span class="sxs-lookup"><span data-stu-id="e4540-327">**Dedicated hardware station on Modern POS:** Copy the files to the Modern POS client broker location.</span></span>

4. <span data-ttu-id="e4540-328">Najděte konfigurační soubor rozšíření hardwarová stanice.</span><span class="sxs-lookup"><span data-stu-id="e4540-328">Find the extension configuration file for the Hardware station's extensions.</span></span> <span data-ttu-id="e4540-329">Název souboru je **HardwareStation.Extension.config**.</span><span class="sxs-lookup"><span data-stu-id="e4540-329">The file is named **HardwareStation.Extension.config**.</span></span>

    - <span data-ttu-id="e4540-330">**Sdílená hardwarové stanice:** Soubor se nachází pod umístěním webu hardwarové stanice IIS.</span><span class="sxs-lookup"><span data-stu-id="e4540-330">**Shared hardware station:** The file is located under the IIS Hardware station site location.</span></span>
    - <span data-ttu-id="e4540-331">**Vyhrazená hardwarová stanice pro Modern POS:** Soubor se nachází ve stanici zprostředkovatele klienta Modern POS.</span><span class="sxs-lookup"><span data-stu-id="e4540-331">**Dedicated hardware station on Modern POS:** The file is located under the Modern POS client broker location.</span></span>

5. <span data-ttu-id="e4540-332">Přidejte následující řádek do oddílu **composition** konfiguračního souboru.</span><span class="sxs-lookup"><span data-stu-id="e4540-332">Add the following line to the **composition** section of the configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.HardwareStation.EFRSample.dll" />
    ```

### <a name="set-up-the-registration-process"></a><span data-ttu-id="e4540-333">Nastavení procesu registrace</span><span class="sxs-lookup"><span data-stu-id="e4540-333">Set up the registration process</span></span>

<span data-ttu-id="e4540-334">Pokud chcete povolit registrační proces, postupujte pomocí následujících kroků pro nastavení Headquarters.</span><span class="sxs-lookup"><span data-stu-id="e4540-334">To enable the registration process, follow these steps to set up Headquarters.</span></span> <span data-ttu-id="e4540-335">Další informace naleznete v tématu [Nastavení fiskálního registračního procesu](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="e4540-335">For more details, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

1. <span data-ttu-id="e4540-336">Přejděte na možnost **Retail a Commerce \> Nastavení centrály \> Parametry \> Sdílené parametry obchodu**.</span><span class="sxs-lookup"><span data-stu-id="e4540-336">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="e4540-337">Na kartě **Obecné** nastavte možnost **Povolit fiskální integraci** na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="e4540-337">On the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span>
2. <span data-ttu-id="e4540-338">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Fiskální integrace \> Fiskální konektory** a vyhledejte konfiguraci konektoru.</span><span class="sxs-lookup"><span data-stu-id="e4540-338">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connectors**, and load the connector configuration.</span></span> <span data-ttu-id="e4540-339">Umístění souboru je **RetailSdk\\SampleExtensions\\HardwareStation\\Extension.EFRSample\\Configuration\\ConnectorEFRSample.xml**.</span><span class="sxs-lookup"><span data-stu-id="e4540-339">The file location is **RetailSdk\\SampleExtensions\\HardwareStation\\Extension.EFRSample\\Configuration\\ConnectorEFRSample.xml**.</span></span>
3. <span data-ttu-id="e4540-340">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Fiskální integrace \> Poskytovatelé fiskálních dokumentů** a vyhledejte konfiguraci poskytovatele dokumentu.</span><span class="sxs-lookup"><span data-stu-id="e4540-340">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal document providers**, and load the document provider configuration.</span></span> <span data-ttu-id="e4540-341">Konfigurační soubor je **RetailSdk\\SampleExtensions\\CommerceRuntime\\Extensions.DocumentProvider.EFRSample\\Configuration\\DocumentProviderFiscalEFRSampleCzech.xml**.</span><span class="sxs-lookup"><span data-stu-id="e4540-341">The configuration file is  **RetailSdk\\SampleExtensions\\CommerceRuntime\\Extensions.DocumentProvider.EFRSample\\Configuration\\DocumentProviderFiscalEFRSampleCzech.xml**.</span></span>
4. <span data-ttu-id="e4540-342">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Fiskální integrace \> Funkční profily Connector**.</span><span class="sxs-lookup"><span data-stu-id="e4540-342">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Connector functional profiles**.</span></span> <span data-ttu-id="e4540-343">Vytvořte nový funkční profil konektoru.</span><span class="sxs-lookup"><span data-stu-id="e4540-343">Create a new connector functional profile.</span></span> <span data-ttu-id="e4540-344">Vyberte poskytovatele dokumentu a dříve načtený konektor.</span><span class="sxs-lookup"><span data-stu-id="e4540-344">Select the document provider and the connector that you loaded earlier.</span></span> <span data-ttu-id="e4540-345">Aktualizujte nastavení mapování dat podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="e4540-345">Update the data mapping settings as required.</span></span>
5. <span data-ttu-id="e4540-346">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Fiskální integrace \> Technické profily Connector**.</span><span class="sxs-lookup"><span data-stu-id="e4540-346">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Connector technical profiles**.</span></span> <span data-ttu-id="e4540-347">Vytvořte nový technický profil konektoru a vyberte konektor, který jste načetli předtím.</span><span class="sxs-lookup"><span data-stu-id="e4540-347">Create a new connector technical profile, and select the connector that you loaded earlier.</span></span> <span data-ttu-id="e4540-348">Aktualizujte nastavení připojení podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="e4540-348">Update the connection settings as required.</span></span>
6. <span data-ttu-id="e4540-349">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Fiskální integrace \> Skupiny fiskálního konektoru**.</span><span class="sxs-lookup"><span data-stu-id="e4540-349">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connector groups**.</span></span> <span data-ttu-id="e4540-350">Vytvořte novou skupinu fiskálního konektoru pro funkční profil konektoru, který jste vytvořili předtím.</span><span class="sxs-lookup"><span data-stu-id="e4540-350">Create a new fiscal connector group, for the connector functional profile that you created earlier.</span></span>
7. <span data-ttu-id="e4540-351">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Fiskální integrace \> Proces fiskální registrace**.</span><span class="sxs-lookup"><span data-stu-id="e4540-351">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**.</span></span> <span data-ttu-id="e4540-352">Vytvořte nový procesu daňové registrace, krok procesu fiskální registrace a vyberte skupinu fiskálního konektoru, kterou jste předtím vytvořili.</span><span class="sxs-lookup"><span data-stu-id="e4540-352">Create a new fiscal registration process, a fiscal registration process step, and select the fiscal connector group that you created earlier.</span></span>
8. <span data-ttu-id="e4540-353">Přejděte na **Maloobchodní a velkoobchodní prodej \> Instalace kanálu \> Nastavení POS \> Profily POS \> Funkční profily**.</span><span class="sxs-lookup"><span data-stu-id="e4540-353">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span> <span data-ttu-id="e4540-354">Vyberte funkční profil, který je připojena k obchodu, kde by měl být aktivován proces registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-354">Select a functionality profile that is linked to the store where the registration process should be activated.</span></span> <span data-ttu-id="e4540-355">Na pevné záložce **Proces fiskální registrace** vyberte proces fiskální registrace, který jste předtím vytvořili.</span><span class="sxs-lookup"><span data-stu-id="e4540-355">On the **Fiscal registration process** FastTab, select the fiscal registration process that you created earlier.</span></span>
9. <span data-ttu-id="e4540-356">Přejděte na **Retail a Commerce \> Nastavení kanálu \> Nastavení POS \> Profily POS \> Hardwarové profily**.</span><span class="sxs-lookup"><span data-stu-id="e4540-356">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**.</span></span> <span data-ttu-id="e4540-357">Vyberte hardwarový profil spojený s hardwarovou stanicí, ke které bude připojena fiskální tiskárna.</span><span class="sxs-lookup"><span data-stu-id="e4540-357">Select a hardware profile that is linked to the Hardware station that the fiscal printer will be connected to.</span></span> <span data-ttu-id="e4540-358">Na pevné záložce **Fiskální příslušenství** vyberte technický profil konektoru, který jste vytvořili dříve.</span><span class="sxs-lookup"><span data-stu-id="e4540-358">On the **Fiscal peripherals** FastTab, select the connector technical profile that you created earlier.</span></span>
10. <span data-ttu-id="e4540-359">Spusťte plán distribuce (**Retail a Commerce \> IT Retail a Commerce \> plán distribuce**) a vyberte úlohy **1070** a **1090** k přenosu dat do databáze kanálů.</span><span class="sxs-lookup"><span data-stu-id="e4540-359">Open the distribution schedule (**Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**), and select jobs **1070** and **1090** to transfer data to the channel database.</span></span>

### <a name="production-environment"></a><span data-ttu-id="e4540-360">Produkční prostředí</span><span class="sxs-lookup"><span data-stu-id="e4540-360">Production environment</span></span>

<span data-ttu-id="e4540-361">Předchozí postup umožňuje rozšíření, která jsou součástí ukázky integraci vzorku služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-361">The previous procedure enables the extensions that are components of the fiscal registration service integration sample.</span></span> <span data-ttu-id="e4540-362">Kromě toho musíte provést následující postup k vytvoření balíčků pro nasazení, které obsahují komponenty Commerce a použití těchto balíčků v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="e4540-362">In addition, you must follow these steps to create deployable packages that contain Commerce components, and to apply those packages in a production environment.</span></span>

1. <span data-ttu-id="e4540-363">Proveďte následující změny v balíčku konfiguračních souborů ve složce **RetailSdk\\Assets**.</span><span class="sxs-lookup"><span data-stu-id="e4540-363">Make the following changes in the package configuration files under the **RetailSdk\\Assets** folder.</span></span>

    - <span data-ttu-id="e4540-364">V konfiguračních souborech **commerceruntime.ext.config** a **CommerceRuntime.MPOSOffline.Ext.config** přidejte následující řádky do části **composition**.</span><span class="sxs-lookup"><span data-stu-id="e4540-364">In the **commerceruntime.ext.config** and **CommerceRuntime.MPOSOffline.Ext.config** configuration files, add the following lines to the **composition** section.</span></span>

        ``` xml 
        <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.EFRSample" />
        <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR" />
        <add source="assembly" value="Microsoft.Dynamics.Commerce.Runtime.ReceiptsCzechia" />
        ```

    - <span data-ttu-id="e4540-365">V konfiguračním souboru **HardwareStation.Extension.config** přidejte následující řádek do oddílu **composition**.</span><span class="sxs-lookup"><span data-stu-id="e4540-365">In the **HardwareStation.Extension.config** configuration file, add the following line to the **composition** section.</span></span>

        ``` xml
        <add source="assembly" value="Contoso.Commerce.HardwareStation.EFRSample" />
        ```

2. <span data-ttu-id="e4540-366">Proveďte následující změny v konfiguračním souboru balíčku přizpůsobení **BuildTools\\Customization.settings**.</span><span class="sxs-lookup"><span data-stu-id="e4540-366">Make the following changes in the **BuildTools\\Customization.settings** package customization configuration file.</span></span>

    - <span data-ttu-id="e4540-367">Přidejte následující řádky pro zahrnutí rozšíření CRT do nasaditelných balíčků.</span><span class="sxs-lookup"><span data-stu-id="e4540-367">Add the following lines to include the CRT extensions in the deployable packages.</span></span>

        ``` xml
        <ISV_CommerceRuntime_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll" />
        <ISV_CommerceRuntime_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll" />
        <ISV_HardwareStation_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll" />
        ```

    - <span data-ttu-id="e4540-368">Přidáte následující řádek pro zahrnutí rozšíření hardwarové stanice do balíčků pro nasazení.</span><span class="sxs-lookup"><span data-stu-id="e4540-368">Add the following line to include the Hardware station extension in the deployable packages.</span></span>

        ``` xml
        <ISV_HardwareStation_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.HardwareStation.EFRSample" />
        ```

3. <span data-ttu-id="e4540-369">Spuste příkazový řádek MSBuild pro program Visual Studio a spusťte **msbuild** ve složce Retail SDK pro vytvoření balíčků k nasazení.</span><span class="sxs-lookup"><span data-stu-id="e4540-369">Start the MSBuild Command Prompt for Visual Studio utility, and run **msbuild** under the Retail SDK folder to create deployable packages.</span></span>
4. <span data-ttu-id="e4540-370">Balíčky použijte pomocí služby Microsoft Dynamics Lifecycle Services (LCS) nebo ručně.</span><span class="sxs-lookup"><span data-stu-id="e4540-370">Apply the packages via Microsoft Dynamics Lifecycle Services (LCS) or manually.</span></span> <span data-ttu-id="e4540-371">Další informace naleznete v tématu [Vytvoření balíčků pro nasazení](../dev-itpro/retail-sdk/retail-sdk-packaging.md).</span><span class="sxs-lookup"><span data-stu-id="e4540-371">For more information, see [Create deployable packages](../dev-itpro/retail-sdk/retail-sdk-packaging.md).</span></span>
5. <span data-ttu-id="e4540-372">Proveďte všechny požadované úkoly nastavení, které jsou popsány v části [Nastavení Commerce pro Českou republiku](#set-up-commerce-for-czech-republic).</span><span class="sxs-lookup"><span data-stu-id="e4540-372">Complete all the required setup tasks that are described in the [Set up Commerce for Czech Republic](#set-up-commerce-for-czech-republic) section.</span></span>

## <a name="design-of-extensions"></a><span data-ttu-id="e4540-373">Návrh rozšíření</span><span class="sxs-lookup"><span data-stu-id="e4540-373">Design of extensions</span></span>

### <a name="commerce-runtime-extension-design"></a><span data-ttu-id="e4540-374">Návrh obchodního rozšíření doby běhu</span><span class="sxs-lookup"><span data-stu-id="e4540-374">Commerce runtime extension design</span></span>

<span data-ttu-id="e4540-375">Účelem rozšíření je, ab poskytovatel daňového dokumentu generoval dokumenty specifické pro službu a zpracovával odpovědi z daňové registrační služby.</span><span class="sxs-lookup"><span data-stu-id="e4540-375">The purpose of the extension that is a fiscal document provider is to generate service-specific documents and handle responses from the fiscal registration service.</span></span>

<span data-ttu-id="e4540-376">Rozšíření CRT je **Runtime.Extensions.DocumentProvider.EFRSample**.</span><span class="sxs-lookup"><span data-stu-id="e4540-376">The CRT extension is **Runtime.Extensions.DocumentProvider.EFRSample**.</span></span>

<span data-ttu-id="e4540-377">Podrobnější informace o návrhu řešení fiskální integrace získáte v části [Ukázky procesu fiskální registrace pro fiskální zařízení](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="e4540-377">For more details about the design of the fiscal integration solution, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

#### <a name="request-handler"></a><span data-ttu-id="e4540-378">Obslužná rutina požadavku</span><span class="sxs-lookup"><span data-stu-id="e4540-378">Request handler</span></span>
    
<span data-ttu-id="e4540-379">Existuje jedna obslužná rutina požadavku **DocumentProviderEFRFiscalCZE** pro zprostředkovatele dokumentu, která slouží ke generování fiskálních dokumentů pro službu daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-379">There is a single **DocumentProviderEFRFiscalCZE** request handler for document provider, which is used to generate fiscal documents for the fiscal registration service.</span></span>

<span data-ttu-id="e4540-380">Tato rutina je zděděna z rozhraní **INamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="e4540-380">This handler is inherited from the **INamedRequestHandler** interface.</span></span> <span data-ttu-id="e4540-381">Metoda **HandlerName** je odpovědná za vrácení názvu obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="e4540-381">The **HandlerName** method is responsible for returning the name of the handler.</span></span> <span data-ttu-id="e4540-382">Název obslužné rutiny by měl odpovídat názvu poskytovatele dokumentu zprostředkovatele, zadanému v Headquarters.</span><span class="sxs-lookup"><span data-stu-id="e4540-382">The handler name should match the connector document provider name that is specified in Headquarters.</span></span>

<span data-ttu-id="e4540-383">Konektor podporuje následující požadavky.</span><span class="sxs-lookup"><span data-stu-id="e4540-383">The connector supports the following requests.</span></span>

- <span data-ttu-id="e4540-384">**GetFiscalDocumentDocumentProviderRequest** – tento požadavek obsahuje informace o dokladu, o němž by měl být vygenerován dokument.</span><span class="sxs-lookup"><span data-stu-id="e4540-384">**GetFiscalDocumentDocumentProviderRequest** – This request contains information about what document should be generated.</span></span> <span data-ttu-id="e4540-385">Vrátí dokument specifický pro službu, který má být registrován ve službě daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-385">It returns a service-specific document that should be registered in the fiscal registration service.</span></span>
- <span data-ttu-id="e4540-386">**GetSupportedRegistrableEventsDocumentProviderRequest** – tento požadavek vrací seznam událostí, k jejichž odběru se uživatelé přihlašují.</span><span class="sxs-lookup"><span data-stu-id="e4540-386">**GetSupportedRegistrableEventsDocumentProviderRequest** – This request returns the list of events to subscribe to.</span></span> <span data-ttu-id="e4540-387">V současné době jsou podporovány tyto události: prodeje, účet zákazníka, vklady a vklady objednávky odběratele.</span><span class="sxs-lookup"><span data-stu-id="e4540-387">Currently, the following events are supported: sales, customer account deposits and customer order deposits.</span></span>
- <span data-ttu-id="e4540-388">**GetFiscalRegisterResponseToSaveDocumentProviderRequest** – tento požadavek vrací odpověď daňové registrační služby.</span><span class="sxs-lookup"><span data-stu-id="e4540-388">**GetFiscalRegisterResponseToSaveDocumentProviderRequest** – This request returns the response from the fiscal registration service.</span></span> <span data-ttu-id="e4540-389">Tato odpověď je serializován tak, aby tvořila řetězec připravený k uložení.</span><span class="sxs-lookup"><span data-stu-id="e4540-389">This response is serialized to form a string so that it's ready to be saved.</span></span>

#### <a name="configuration"></a><span data-ttu-id="e4540-390">Konfigurace</span><span class="sxs-lookup"><span data-stu-id="e4540-390">Configuration</span></span>

<span data-ttu-id="e4540-391">Konfigurační soubor **DocumentProviderFiscalEFRSampleCzech** se nachází ve složce **Konfigurace** procesu rozšíření.</span><span class="sxs-lookup"><span data-stu-id="e4540-391">The **DocumentProviderFiscalEFRSampleCzech** configuration file is located in the **Configuration** folder of the extension project.</span></span>
<span data-ttu-id="e4540-392">Tento soubor slouží k povolení nastavení pro zprostředkovatele dokumentu ke konfiguraci z Headquarters.</span><span class="sxs-lookup"><span data-stu-id="e4540-392">The purpose of this file is to enable settings for the document provider to be configured from Headquarters.</span></span> <span data-ttu-id="e4540-393">Formát souboru je v souladu s požadavky na konfiguraci fiskální integrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-393">The file format is aligned with the requirements for fiscal integration configuration.</span></span> <span data-ttu-id="e4540-394">Jsou přidána následující nastavení.</span><span class="sxs-lookup"><span data-stu-id="e4540-394">The following settings are added.</span></span>

- <span data-ttu-id="e4540-395">Mapování sazeb DPH</span><span class="sxs-lookup"><span data-stu-id="e4540-395">VAT rates mapping</span></span>
- <span data-ttu-id="e4540-396">Výchozí skupina DPH</span><span class="sxs-lookup"><span data-stu-id="e4540-396">Default VAT group</span></span>
- <span data-ttu-id="e4540-397">Skupina DPH zálohy</span><span class="sxs-lookup"><span data-stu-id="e4540-397">Deposit VAT group</span></span>

### <a name="hardware-station-extension-design"></a><span data-ttu-id="e4540-398">Design rozšíření hardwarové stanice</span><span class="sxs-lookup"><span data-stu-id="e4540-398">Hardware station extension design</span></span>

<span data-ttu-id="e4540-399">Účelem rozšíření je fiskální konektor určený ke komunikaci se službou daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-399">The purpose of the extension that is a fiscal connector is to communicate with the fiscal registration service.</span></span>

<span data-ttu-id="e4540-400">Rozšíření hardwarové stanice je **HardwareStation.Extension.EFRSample**.</span><span class="sxs-lookup"><span data-stu-id="e4540-400">The Hardware station extension is **HardwareStation.Extension.EFRSample**.</span></span> <span data-ttu-id="e4540-401">Rozšíření hardwarové stanice používá protokol HTTP k odesílání dokumentů, které rozšíření  CRT generuje pro daňovou registrační službu.</span><span class="sxs-lookup"><span data-stu-id="e4540-401">The Hardware station extension uses the HTTP protocol to submit documents that the CRT extension generates to the fiscal registration service.</span></span> <span data-ttu-id="e4540-402">Také zpracovává odpovědi, které jsou přijaty ze služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-402">It also handles the responses that are received from the fiscal registration service.</span></span>

#### <a name="request-handler"></a><span data-ttu-id="e4540-403">Obslužná rutina požadavku</span><span class="sxs-lookup"><span data-stu-id="e4540-403">Request handler</span></span>

<span data-ttu-id="e4540-404">Obslužná rutina požadavku **EFRHandler** je vstupní bod pro práci s požadavky služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-404">The **EFRHandler** request handler is the entry point for handling requests to the fiscal registration service.</span></span>

<span data-ttu-id="e4540-405">Tato rutina je zděděna z rozhraní **INamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="e4540-405">The handler is inherited from the **INamedRequestHandler** interface.</span></span> <span data-ttu-id="e4540-406">Metoda **HandlerName** je odpovědná za vrácení názvu obslužné rutiny.</span><span class="sxs-lookup"><span data-stu-id="e4540-406">The **HandlerName** method is responsible for returning the name of the handler.</span></span> <span data-ttu-id="e4540-407">Název obslužné rutiny by měl odpovídat názvu poskytovatele dokumentu fiskálního konektoru zadanému v Headquarters.</span><span class="sxs-lookup"><span data-stu-id="e4540-407">The handler name should match the fiscal connector name that is specified in Headquarters.</span></span>

<span data-ttu-id="e4540-408">Konektor podporuje následující požadavky.</span><span class="sxs-lookup"><span data-stu-id="e4540-408">The connector supports the following requests.</span></span>

- <span data-ttu-id="e4540-409">**SubmitDocumentFiscalDeviceRequest** – tento požadavek odesílá dokumenty službě daňové registrace a z ní vrátí odpověď.</span><span class="sxs-lookup"><span data-stu-id="e4540-409">**SubmitDocumentFiscalDeviceRequest** – This request sends documents to the fiscal registration service and returns a response from it.</span></span>
- <span data-ttu-id="e4540-410">**IsReadyFiscalDeviceRequest** – tento požadavek se používá pro kontrolu stavu služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-410">**IsReadyFiscalDeviceRequest** – This request is used for a health check of the fiscal registration service.</span></span>
- <span data-ttu-id="e4540-411">**InitializeFiscalDeviceRequest** – tento požadavek se používá pro inicializaci stavu služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-411">**InitializeFiscalDeviceRequest** – This request is used to initialize the fiscal registration service.</span></span>

#### <a name="configuration"></a><span data-ttu-id="e4540-412">Konfigurace</span><span class="sxs-lookup"><span data-stu-id="e4540-412">Configuration</span></span>

<span data-ttu-id="e4540-413">Konfigurační soubor se nachází ve složce **Konfigurace** projektu rozšíření.</span><span class="sxs-lookup"><span data-stu-id="e4540-413">The configuration file is located in the **Configuration** folder of the extension project.</span></span> <span data-ttu-id="e4540-414">Tento soubor slouží k povolení nastavení pro fiskální konektor ke konfiguraci z Headquarters.</span><span class="sxs-lookup"><span data-stu-id="e4540-414">The purpose of the file is to enable settings for the fiscal connector to be configured from Headquarters.</span></span> <span data-ttu-id="e4540-415">Formát souboru je v souladu s požadavky na konfiguraci fiskální integrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-415">The file format is aligned with the requirements for fiscal integration configuration.</span></span> <span data-ttu-id="e4540-416">Jsou přidána následující nastavení.</span><span class="sxs-lookup"><span data-stu-id="e4540-416">The following settings are added.</span></span>

- <span data-ttu-id="e4540-417">**Adresa koncového bodu** – adresa URL služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-417">**Endpoint address** – The URL of the fiscal registration service.</span></span>
- <span data-ttu-id="e4540-418">**Časový limit** – doba v milisekundách, po kterou bude čekat ovladač na odpověď od služby daňové registrace.</span><span class="sxs-lookup"><span data-stu-id="e4540-418">**Timeout** – The amount of time, in milliseconds, that the driver will wait for a response from the fiscal registration service.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]