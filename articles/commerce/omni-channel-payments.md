---
title: Přehled omnikanálových plateb
description: Toto téma poskytuje přehled omnikanálových plateb v aplikaci Dynamics 365 Commerce.
author: rubendel
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 7b99b5f7b5b972d41e0831995bde69e9041369b9
ms.sourcegitcommit: cabd991fda2bfcabb55db84c225b24a7bb061631
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/12/2021
ms.locfileid: "6028004"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="d3517-103">Přehled omnikanálových plateb</span><span class="sxs-lookup"><span data-stu-id="d3517-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="d3517-104">Toto téma poskytuje přehled omnikanálových plateb v aplikaci Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="d3517-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="d3517-105">Obsahuje obsáhlý seznam podporovaných scénářů, informace o funkcích, nastavení a řešení problémů a popis některých typických problémů.</span><span class="sxs-lookup"><span data-stu-id="d3517-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="d3517-106">Klíčové podmínky</span><span class="sxs-lookup"><span data-stu-id="d3517-106">Key terms</span></span>

| <span data-ttu-id="d3517-107">Termín</span><span class="sxs-lookup"><span data-stu-id="d3517-107">Term</span></span> | <span data-ttu-id="d3517-108">Popis</span><span class="sxs-lookup"><span data-stu-id="d3517-108">Description</span></span> |
|---|---|
| <span data-ttu-id="d3517-109">Token </span><span class="sxs-lookup"><span data-stu-id="d3517-109">Token</span></span> | <span data-ttu-id="d3517-110">Řetězec dat, který platební procesor poskytuje jako referenční.</span><span class="sxs-lookup"><span data-stu-id="d3517-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="d3517-111">Tokeny mohou představovat čísla platebních karet, autorizace plateb a předchozí zachycená platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="d3517-112">Tokeny jsou důležité, protože pomáhají zachovat citlivá data z prodejního systému (POS).</span><span class="sxs-lookup"><span data-stu-id="d3517-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="d3517-113">Někdy se také nazývají *reference*.</span><span class="sxs-lookup"><span data-stu-id="d3517-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="d3517-114">Token karty</span><span class="sxs-lookup"><span data-stu-id="d3517-114">Card token</span></span> | <span data-ttu-id="d3517-115">Token, který platební procesor poskytuje pro uložení v systému POS.</span><span class="sxs-lookup"><span data-stu-id="d3517-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="d3517-116">Token karty může používat pouze obchodník, který jej obdrží.</span><span class="sxs-lookup"><span data-stu-id="d3517-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="d3517-117">Tokeny karty se někdy označují také jako *reference karty*.</span><span class="sxs-lookup"><span data-stu-id="d3517-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="d3517-118">Token (autorizace) platby</span><span class="sxs-lookup"><span data-stu-id="d3517-118">Authorization (auth) token</span></span> | <span data-ttu-id="d3517-119">Jedinečný identifikátor, který platební proces poskytuje jako součást odpovědi, kterou odešle do systému POS poté, co systém POS provede požadavek na autorizaci.</span><span class="sxs-lookup"><span data-stu-id="d3517-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="d3517-120">Autorizační token lze později použít v případě, že je procesor vyzván k provádění akcí, jako je například stornování nebo zrušení autorizace.</span><span class="sxs-lookup"><span data-stu-id="d3517-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="d3517-121">Používá se však nejčastěji k zaznamenání finančních prostředků při splnění objednávky nebo finalizaci transakce.</span><span class="sxs-lookup"><span data-stu-id="d3517-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="d3517-122">Tokeny autorizace se někdy označují také jako *reference autorizace*.</span><span class="sxs-lookup"><span data-stu-id="d3517-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="d3517-123">Token zachycení</span><span class="sxs-lookup"><span data-stu-id="d3517-123">Capture token</span></span> | <span data-ttu-id="d3517-124">Reference, kterou platební procesor poskytuje systému POS při finalizaci nebo zachycení platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="d3517-125">Token zachycení lze poté použít pro odkazování na záznam platby v následných operacích, jako je například požadavek na refundaci.</span><span class="sxs-lookup"><span data-stu-id="d3517-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="d3517-126">Karta není přítomna</span><span class="sxs-lookup"><span data-stu-id="d3517-126">Card not present</span></span> | <span data-ttu-id="d3517-127">Termín, který odkazuje na platební transakce, u nichž není zobrazena fyzická karta.</span><span class="sxs-lookup"><span data-stu-id="d3517-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="d3517-128">Tyto transakce mohou například nastat ve scénářích elektronického obchodu nebo kontaktních středisek.</span><span class="sxs-lookup"><span data-stu-id="d3517-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="d3517-129">Pro tyto transakce jsou informace související s platbou zadány ručně na webu elektronického obchodu, v toku kontaktního centra nebo na POS nebo v platebním terminálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="d3517-130">Karta je přítomna</span><span class="sxs-lookup"><span data-stu-id="d3517-130">Card present</span></span> | <span data-ttu-id="d3517-131">Termín, který odkazuje na platební transakce, ve kterých se zobrazuje a používá v platebním terminálu, který je připojen k systému Microsoft Dynamics 365 POS.</span><span class="sxs-lookup"><span data-stu-id="d3517-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="d3517-132">Přehled</span><span class="sxs-lookup"><span data-stu-id="d3517-132">Overview</span></span>

<span data-ttu-id="d3517-133">Pojem *omnikanálové platby* obecně popisuje schopnost vytvořit objednávku v jednom kanálu a splnit ji v jiném kanálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="d3517-134">Klíčem pro podporu omnikanálové platby je zachování platebních detailů spolu ze zbytkem detailů objednávky a následné použití těchto platebních detailů, když je objednávka stažena nebo zpracována v jiném kanálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="d3517-135">Klasickým příkladem je scénář "koupit online, vyzvednout v obchodě".</span><span class="sxs-lookup"><span data-stu-id="d3517-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="d3517-136">V tomto scénáři jsou údaje o platbě doplněny při vytvoření objednávky online.</span><span class="sxs-lookup"><span data-stu-id="d3517-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="d3517-137">Poté jsou v POS odvolány, aby v okamžiku vyzvednutí byla stržena platba z platební karty zákazníka.</span><span class="sxs-lookup"><span data-stu-id="d3517-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="d3517-138">Všechny scénáře popsané v tomto tématu lze implementovat pomocí standardní sady Software Development Kit (SDK) plateb dodávané s aplikací Commerce.</span><span class="sxs-lookup"><span data-stu-id="d3517-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="d3517-139">Konektor [Dynamics 365 Payment Connector for Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) poskytuje přednastavenou implementaci každého scénáře, který je zde popsán.</span><span class="sxs-lookup"><span data-stu-id="d3517-139">The [Dynamics 365 Payment Connector for Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="d3517-140">Předpoklady</span><span class="sxs-lookup"><span data-stu-id="d3517-140">Prerequisites</span></span>

<span data-ttu-id="d3517-141">Každý scénář, který je popsán v tomto tématu, vyžaduje platební konektor, který podporuje omnikanálové platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="d3517-142">Konektor Adyen lze také použít ihned po vybalení, protože podporuje scénáře, které jsou k dispozici v sadě SDK plateb.</span><span class="sxs-lookup"><span data-stu-id="d3517-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="d3517-143">Další informace o tom, jak implementovat konektory platby, a obecné informace o sadě SDK naleznete na stránce [Maloobchod pro profesionály IT a vývojáře](/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="d3517-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="d3517-144">Podporované verze</span><span class="sxs-lookup"><span data-stu-id="d3517-144">Supported versions</span></span>

<span data-ttu-id="d3517-145">Schopnosti omnikanálové platby, které jsou popsány v tomto tématu, byly vydány v rámci Microsoft Dynamics 365 for Retail verze 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="d3517-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="d3517-146">Konektory "Přítomná karta" a "Nepřítomná karta"</span><span class="sxs-lookup"><span data-stu-id="d3517-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="d3517-147">Sada SDK plateb spoléhá na dvě sady aplikačních programovacích rozhraní (API) pro platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="d3517-148">První sada rozhraní API je pojmenovaná **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="d3517-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="d3517-149">Používá se k implementaci konektorů pro platby "karta není přítomna", které lze použít v kontaktních střediscích a na platformě elektronického obchodování Microsoft Dynamics.</span><span class="sxs-lookup"><span data-stu-id="d3517-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="d3517-150">Další informace o rozhraní **iPaymentProcessor** naleznete v dokumentu white paper [Implementace platebního konektoru a platebního zařízení](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf), který se věnuje platbám.</span><span class="sxs-lookup"><span data-stu-id="d3517-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="d3517-151">Druhá sada rozhraní API je pojmenovaná **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="d3517-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="d3517-152">Podporuje implementaci integrace plateb "karta přítomna", která používá platební terminál.</span><span class="sxs-lookup"><span data-stu-id="d3517-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="d3517-153">Další informace o rozhraní **iNamedRequestHandler** získáte v části [Vytvoření integrace platby pro platební terminál](/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="d3517-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="d3517-154">Instalace a konfigurace</span><span class="sxs-lookup"><span data-stu-id="d3517-154">Setup and configuration</span></span>

<span data-ttu-id="d3517-155">Jsou požadovány následující součásti a kroky nastavení:</span><span class="sxs-lookup"><span data-stu-id="d3517-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="d3517-156">**integrace eCommerce:** Podpora scénářů, jejichž pořadí pochází z online výlohy, vyžaduje integraci s aplikací Commerce.</span><span class="sxs-lookup"><span data-stu-id="d3517-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="d3517-157">Další informace o sadě Retail e-Commerce SDK naleznete v tématu [sada SDK (Software Development Kit) platformy elektronického obchodování](/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="d3517-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="d3517-158">V ukázkovém prostředí podporuje referenční výkladní skříň scénáře omniplateb.</span><span class="sxs-lookup"><span data-stu-id="d3517-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="d3517-159">**Konfigurace online plateb:** nastavení online kanálu musí obsahovat platební konektor, který byl aktualizován pro podporu omniplateb.</span><span class="sxs-lookup"><span data-stu-id="d3517-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="d3517-160">Případně lze použít konektor pro platby po vybalení.</span><span class="sxs-lookup"><span data-stu-id="d3517-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="d3517-161">Informace o konfiguraci konektoru plateb Adyen pro online obchody naleznete v tématu [Konektor plateb Adyen](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce)</span><span class="sxs-lookup"><span data-stu-id="d3517-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="d3517-162">Kromě kroků nastavení eCommerce popsaných v tomto tématu musí být nastaven parametr **Povolit nastavení informací o platbě v elektronickém obchododování** na hodnotu **Pravda** v nastavení konektoru Adyen.</span><span class="sxs-lookup"><span data-stu-id="d3517-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="d3517-163">**Konfigurace omnikanálových plateb:** V účetním systému přejděte na **Maloobchod a velkoobchod \> Nastavení centrály \> Parametry \> Sdílené parametry velkoobchodu**.</span><span class="sxs-lookup"><span data-stu-id="d3517-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="d3517-164">Pak na kartě **Omnikanálové platby** nastavte možnost **Použít omnikanálové platby** na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="d3517-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="d3517-165">Ve verzích Commerce 10.0.12 a novějších je toto nastavení v pracovním prostoru **Správa funkcí**.</span><span class="sxs-lookup"><span data-stu-id="d3517-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="d3517-166">Vyberte **Omnikanálové platby** a klikněte na **Povolit hned**.</span><span class="sxs-lookup"><span data-stu-id="d3517-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="d3517-167">**Platební služby:** Kontaktní centrum používá výchozí platební konektor na stránce **Platební služby** ke zpracování plateb.</span><span class="sxs-lookup"><span data-stu-id="d3517-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="d3517-168">Chcete-li podporovat scénáře jako například "koupit pomocí call centra, vyzvednout v obchodě", musí být tento výchozí konektor platby musí být konektor Adyen platby nebo platební konektor splňující požadavky na implementaci pro platby pomocí Omni kanálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="d3517-169">**Služba EFT:** platby prostřednictvím platebního terminálu je nutné nastavit na pevné záložce **Služba EFT** hardwarového profilu.</span><span class="sxs-lookup"><span data-stu-id="d3517-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="d3517-170">Konektor Adyen podporuje scénáře omnikanálových plateb ihned po vybalení.</span><span class="sxs-lookup"><span data-stu-id="d3517-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="d3517-171">Ostatní platební konektory, které **podporují** rozhraní iNamedRequestHandler, mohou být použity také v případě, že podporují omnikanálové platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="d3517-172">**Dostupnost platebního konektoru**: Pokud je objednávka odvolána, řádky úhrady plateb, které jsou odvolány spolu s objednávkou, obsahují název platebního konektoru, který byl použit k vytvoření autorizací přiřazených k dané objednávce.</span><span class="sxs-lookup"><span data-stu-id="d3517-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="d3517-173">Po splnění objednávky se sada SDK Platby pokusí použít stejný konektor, který byl použit k vytvoření původního povolení.</span><span class="sxs-lookup"><span data-stu-id="d3517-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="d3517-174">Proto musí být pro záznam k dispozici platební konektor, který má stejné vlastnosti obchodníka.</span><span class="sxs-lookup"><span data-stu-id="d3517-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="d3517-175">**Typy karet:** pro správné fungování omni kanálů musí mít každý kanál stejné nastavení pro typy úhrad, které lze použít pro omni kanál.</span><span class="sxs-lookup"><span data-stu-id="d3517-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="d3517-176">Toto nastavení zahrnuje ID metod plateb a ID typů karet.</span><span class="sxs-lookup"><span data-stu-id="d3517-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="d3517-177">Pokud má například typ úhrady **Karty** ID **2** v nastavení online obchodu, měl by mít stejné ID v nastavení maloobchodu.</span><span class="sxs-lookup"><span data-stu-id="d3517-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="d3517-178">Stejný požadavek se vztahuje na ID typů karet.</span><span class="sxs-lookup"><span data-stu-id="d3517-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="d3517-179">Pokud je číslo karty **12** v online obchodu nastaveno na **VISA**, stejné ID by mělo být nastaveno pro maloobchod.</span><span class="sxs-lookup"><span data-stu-id="d3517-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="d3517-180">Retail Modern POS pro Windows nebo Android se zabudovanou hardwarovou stanicí   -nebo-</span><span class="sxs-lookup"><span data-stu-id="d3517-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="d3517-181">Modern POS pro iOS nebo Cloud POS s připojenou sdílenou hardwarovou stanicí.</span><span class="sxs-lookup"><span data-stu-id="d3517-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="d3517-182">Základní princip podporující omnikanálové platby</span><span class="sxs-lookup"><span data-stu-id="d3517-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="d3517-183">Platební konektory a zpracovatelé plateb používají tokeny nebo odkazy, které odkazují na interakce související s platbami kartou.</span><span class="sxs-lookup"><span data-stu-id="d3517-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="d3517-184">Je-li například požadováno ověření platby, je k dispozici odkaz na tuto autorizaci.</span><span class="sxs-lookup"><span data-stu-id="d3517-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="d3517-185">Proto může být autorizace odkazována později při zachycení finančních prostředků v době plnění.</span><span class="sxs-lookup"><span data-stu-id="d3517-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="d3517-186">Tato autorizace je jedinečná pro obchodníka, platební konektor a procesor.</span><span class="sxs-lookup"><span data-stu-id="d3517-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="d3517-187">Pokud byla objednávka, která byla vytvořena v režimu online, vydána v obchodě, je nutné stornovat a používat stejné platební podrobnosti pro tuto objednávku.</span><span class="sxs-lookup"><span data-stu-id="d3517-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="d3517-188">Pokud jsou původní podrobnosti poskytnuty jako součást žádosti o zaznamenání platby na původní autorizaci, může zpracovatel platby zpracovat požadavek a zaznamenat platbu.</span><span class="sxs-lookup"><span data-stu-id="d3517-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="d3517-189">Chcete-li správně odkazovat na online objednávku, musí být k dispozici také konektor platby "karta není přítomna", který podporuje stejný procesor.</span><span class="sxs-lookup"><span data-stu-id="d3517-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="d3517-190">Tímto způsobem může systém POS mít jeden procesor pro platby "kartou", ale může mít také přístup k jiným platebním konektorům, aby mohl vyplnit objednávky vytvořené v jiných kanálech pomocí různých platebních procesorů.</span><span class="sxs-lookup"><span data-stu-id="d3517-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="d3517-191">Podporované scénáře</span><span class="sxs-lookup"><span data-stu-id="d3517-191">Supported scenarios</span></span>

<span data-ttu-id="d3517-192">Podporovány jsou následující scénáře omnikanálových plateb:</span><span class="sxs-lookup"><span data-stu-id="d3517-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="d3517-193">Nákup online, vyzvednutí v obchodě</span><span class="sxs-lookup"><span data-stu-id="d3517-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="d3517-194">Nákup v kontaktním středisku a vyzvednutí v obchodě</span><span class="sxs-lookup"><span data-stu-id="d3517-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="d3517-195">Nákup v obchodě A, vyzvednutí v obchodě B</span><span class="sxs-lookup"><span data-stu-id="d3517-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="d3517-196">Nákup v obchodě A, odeslání zákazníkovi</span><span class="sxs-lookup"><span data-stu-id="d3517-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="d3517-197">Platby provedené v call centru, které se mapují na platební funkci „Normální“, musí být označeny jako **Zaplatit předem** = **Ano**, aby se promítly do splatné částky při odvolání objednávky v POS.</span><span class="sxs-lookup"><span data-stu-id="d3517-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="d3517-198">Platby nezaplacené předem typu „Normální“ nebudou při odvolání objednávky v POS rozpoznány.</span><span class="sxs-lookup"><span data-stu-id="d3517-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="d3517-199">Jsou podporovány i varianty těchto scénářů.</span><span class="sxs-lookup"><span data-stu-id="d3517-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="d3517-200">Například online objednávka může obsahovat jak řádky, které budou expedovány zákazníkovi, tak řádky, které budou v obchodě vydány.</span><span class="sxs-lookup"><span data-stu-id="d3517-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="d3517-201">Všechny možnosti plnění objednávky jsou podporovány prostřednictvím omnikanálových plateb.</span><span class="sxs-lookup"><span data-stu-id="d3517-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="d3517-202">V následujících oddílech jsou popsány kroky pro jednotlivé scénáře a ukazují, jak spustit scénář pomocí ukázkových dat.</span><span class="sxs-lookup"><span data-stu-id="d3517-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="d3517-203">Nákup online, vyzvednutí v obchodě</span><span class="sxs-lookup"><span data-stu-id="d3517-203">Buy online, pick up in store</span></span>

<span data-ttu-id="d3517-204">Než začnete, musíte se ujistit, že jsou splněny následující předpoklady:</span><span class="sxs-lookup"><span data-stu-id="d3517-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="d3517-205">Máte referenční výkladní skříň, kde je konfigurován konektor Adyen.</span><span class="sxs-lookup"><span data-stu-id="d3517-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="d3517-206">Možnost **Omnikanálové platby** na stránce **Sdílené parametry velkoobchodu** je nastavená na **Pravda**.</span><span class="sxs-lookup"><span data-stu-id="d3517-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="d3517-207">V novějších verzích je toto nastavení přesunuto do pracovního prostoru **Správa funkcí**, kde si můžete vybrat funkci **Omnikanálové platby** a kliknout na **Povolit hned**.</span><span class="sxs-lookup"><span data-stu-id="d3517-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="d3517-208">Platební konektor Adyen je nakonfigurován pro registrační pokladnu Houston POS.</span><span class="sxs-lookup"><span data-stu-id="d3517-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="d3517-209">Retail Modern POS pro Windows nebo Android se zabudovanou hardwarovou stanicí   -nebo-</span><span class="sxs-lookup"><span data-stu-id="d3517-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="d3517-210">Modern POS pro iOS nebo Cloud POS s připojenou sdílenou hardwarovou stanicí.</span><span class="sxs-lookup"><span data-stu-id="d3517-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="d3517-211">Pokud chcete spustit tento scénář, postupujte takto:</span><span class="sxs-lookup"><span data-stu-id="d3517-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="d3517-212">V referenční výkladní skříni vytvořte objednávku pro výdej v obchodě.</span><span class="sxs-lookup"><span data-stu-id="d3517-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="d3517-213">Je nutné vybrat obchod **Houston**.</span><span class="sxs-lookup"><span data-stu-id="d3517-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="d3517-214">Projděte kroky odbavení a zaplaťte pomocí čísla testovací kreditní karty.</span><span class="sxs-lookup"><span data-stu-id="d3517-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="d3517-215">Čísla testovacích kreditních karet lze nalézt na stránce [Stránka s čísly testovacích karet Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="d3517-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="d3517-216">Ve velkoobchodu použijte dávkovou úlohu **synchronizovat objednávky** a distribuční plán **P-001** k vytvoření objednávek v kanceláři.</span><span class="sxs-lookup"><span data-stu-id="d3517-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="d3517-217">V POS na úvodní stránce vyberte operaci **Objednávky k výdeji** a zobrazte objednávky pro výdej v obchodě.</span><span class="sxs-lookup"><span data-stu-id="d3517-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="d3517-218">Vyberte jeden nebo více řádků z objednávky, která byla vytvořena v referenčním výkladní skříni, a poté vyberte **vyzvednout**.</span><span class="sxs-lookup"><span data-stu-id="d3517-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="d3517-219">Objednávka se načte z kanceláře.</span><span class="sxs-lookup"><span data-stu-id="d3517-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="d3517-220">Když jsou podrobnosti řádku objednávky načteny z kanceláře a je zjištěna platba kartou, kterou lze použít pro omni kanál, bude informována o tom, že je k dispozici způsob platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="d3517-221">Vyberte **Použít dostupný způsob platby** k dokončení transakce pomocí podrobností o kartě, které byly zadány v referenční výkladní skříni.</span><span class="sxs-lookup"><span data-stu-id="d3517-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="d3517-222">Řádky objednávky jsou načteny na stránce transakce a splatný zůstatek je 0 (nula).</span><span class="sxs-lookup"><span data-stu-id="d3517-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="d3517-223">Pokud chcete zobrazit řádek úhrady získaný z online objednávky, vyberte kartu **Platby**.</span><span class="sxs-lookup"><span data-stu-id="d3517-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="d3517-224">Chcete-li transakci dokončit, vyberte některý způsob platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="d3517-225">Nákup v kontaktním středisku a vyzvednutí v obchodě</span><span class="sxs-lookup"><span data-stu-id="d3517-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="d3517-226">V aplikaci Commerce na stránce **Sužby pro zákazníky** zadejte do vyhledávacího pole text **Karen Berg** a vyberte **Hledat.**</span><span class="sxs-lookup"><span data-stu-id="d3517-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="d3517-227">Ve výsledcích hledání vyberte položku **Karen Berg**.</span><span class="sxs-lookup"><span data-stu-id="d3517-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="d3517-228">Po načtení Karen na stránku **Služby pro zákazníky** vyberte možnost **Nová prodejní objednávka.**</span><span class="sxs-lookup"><span data-stu-id="d3517-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="d3517-229">Na stránce Nová prodejní objednávka vyberte **Záhlaví**, aby se zobrazilo záhlaví objednávky.</span><span class="sxs-lookup"><span data-stu-id="d3517-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="d3517-230">Na stránce **Záhlaví** objednávky nastavte web na **Centrální** a sklad na **Houston**.</span><span class="sxs-lookup"><span data-stu-id="d3517-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="d3517-231">Na kartě **Dodávka** nastavte pole **Způsob dodání** na **60** pro vyzvednutí zákazníkem.</span><span class="sxs-lookup"><span data-stu-id="d3517-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="d3517-232">Vyberte **Řádky** a poté přidejte do objednávky jeden nebo více řádků.</span><span class="sxs-lookup"><span data-stu-id="d3517-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="d3517-233">Výběrem možnosti **Dokončit** zadejte tok dokončení objednávky.</span><span class="sxs-lookup"><span data-stu-id="d3517-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="d3517-234">Přejděte do části platby, vyberte **Přidat** a poté vyberte řádek, na kterém je typ způsobu platby nastaven na možnost **Karty.**</span><span class="sxs-lookup"><span data-stu-id="d3517-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="d3517-235">Výběrem znaménka plus (**+**) přidejte platbu kartou.</span><span class="sxs-lookup"><span data-stu-id="d3517-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="d3517-236">Zadejte podrobnosti o čísle zkušební kreditní karty, které jste našli na [stránce Čísla zkušební karty Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) a potom vyberte **OK**.</span><span class="sxs-lookup"><span data-stu-id="d3517-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d3517-237">Pokud se značka karty pro zadané číslo karty odlišuje od značky, která byla vybrána při zahájení platby, platba přesto projde.</span><span class="sxs-lookup"><span data-stu-id="d3517-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="d3517-238">Bude však zaúčtována na účty, které jsou mapovány na značku karty vybrané v kroku 10.</span><span class="sxs-lookup"><span data-stu-id="d3517-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="d3517-239">Znovu klikněte na **OK** k zavření dialogového okna **Platby dokončení objednávky**.</span><span class="sxs-lookup"><span data-stu-id="d3517-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="d3517-240">Na stránce **Souhrn prodejní objednávky** vyberte možnost **Odeslat**.</span><span class="sxs-lookup"><span data-stu-id="d3517-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="d3517-241">V POS na úvodní stránce vyberte operaci **Objednávky k výdeji** a zobrazte objednávky pro výdej v obchodě.</span><span class="sxs-lookup"><span data-stu-id="d3517-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="d3517-242">Vyberte jeden nebo více řádků z objednávky, která byla vytvořena v referenčním výkladní skříni, a poté vyberte **vyzvednout**.</span><span class="sxs-lookup"><span data-stu-id="d3517-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="d3517-243">Objednávka se načte z kanceláře.</span><span class="sxs-lookup"><span data-stu-id="d3517-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="d3517-244">Když jsou podrobnosti řádku objednávky načteny z kanceláře a je zjištěna platba kartou, kterou lze použít pro omni kanál, bude informována o tom, že je k dispozici způsob platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="d3517-245">Vyberte **Použít dostupný způsob platby** k dokončení transakce pomocí podrobností o kartě, které byly zadány v referenční výkladní skříni.</span><span class="sxs-lookup"><span data-stu-id="d3517-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="d3517-246">Řádky objednávky jsou načteny na stránce transakce a splatný zůstatek je 0 (nula).</span><span class="sxs-lookup"><span data-stu-id="d3517-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="d3517-247">Pokud chcete zobrazit řádek úhrady získaný z online objednávky, vyberte kartu **Platby**.</span><span class="sxs-lookup"><span data-stu-id="d3517-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="d3517-248">Chcete-li transakci dokončit, vyberte některý způsob platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="d3517-249">Nákup v obchodě A, vyzvednutí v obchodě B</span><span class="sxs-lookup"><span data-stu-id="d3517-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="d3517-250">Spusťte POS pro obchod Houston.</span><span class="sxs-lookup"><span data-stu-id="d3517-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="d3517-251">Na stránce **Transakce** přidejte do transakce Karen Berg pomocí číselného panelu a zadejte **2001.**</span><span class="sxs-lookup"><span data-stu-id="d3517-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="d3517-252">Přidejte do transakce jeden nebo více řádků.</span><span class="sxs-lookup"><span data-stu-id="d3517-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="d3517-253">Pokud chcete zobrazit možnosti objednávky, vyberte **Objednávky**.</span><span class="sxs-lookup"><span data-stu-id="d3517-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="d3517-254">Vyberte **Vyzvednout vše** a až budete vyzváni, vyberte volbu **Objednávka zákazníka**.</span><span class="sxs-lookup"><span data-stu-id="d3517-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="d3517-255">Do vyhledávacího panelu zadejte **Seattle** a pak vyberte obchod v **Seattlu** pro výdej.</span><span class="sxs-lookup"><span data-stu-id="d3517-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="d3517-256">Kliknutím na **OK** přijměte aktuální datum jako datum výdeje.</span><span class="sxs-lookup"><span data-stu-id="d3517-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="d3517-257">Vyberte **Platba kartou** pro zahájení platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="d3517-258">Uhraďte kartou částku, která je splatná jako záloha.</span><span class="sxs-lookup"><span data-stu-id="d3517-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="d3517-259">Dokončete zálohovou platbu na platebním terminálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="d3517-260">Po zaplacení vkladu vyberte možnost pro použití stejné karty pro plnění a čekání na dokončení objednávky.</span><span class="sxs-lookup"><span data-stu-id="d3517-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="d3517-261">Spusťte POS pro obchod Seattle.</span><span class="sxs-lookup"><span data-stu-id="d3517-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="d3517-262">V POS na úvodní stránce vyberte operaci **Objednávky k výdeji** a zobrazte objednávky pro výdej v obchodě.</span><span class="sxs-lookup"><span data-stu-id="d3517-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="d3517-263">Vyberte jeden nebo více řádků z objednávky, která byla vytvořena v referenčním výkladní skříni, a poté vyberte **vyzvednout**.</span><span class="sxs-lookup"><span data-stu-id="d3517-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="d3517-264">Objednávka se načte z kanceláře.</span><span class="sxs-lookup"><span data-stu-id="d3517-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="d3517-265">Když jsou podrobnosti řádku objednávky načteny z kanceláře a je zjištěna platba kartou, kterou lze použít pro omni kanál, bude informována o tom, že je k dispozici způsob platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="d3517-266">Vyberte **Použít dostupný způsob platby** k dokončení transakce pomocí podrobností o kartě, které byly zadány v referenční výkladní skříni.</span><span class="sxs-lookup"><span data-stu-id="d3517-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="d3517-267">Řádky objednávky jsou načteny na stránce transakce a splatný zůstatek je 0 (nula).</span><span class="sxs-lookup"><span data-stu-id="d3517-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="d3517-268">Pokud chcete zobrazit řádek úhrady získaný z online objednávky, vyberte kartu **Platby**.</span><span class="sxs-lookup"><span data-stu-id="d3517-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="d3517-269">Chcete-li transakci dokončit, vyberte některý způsob platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="d3517-270">Nákup v obchodě A, odeslání zákazníkovi</span><span class="sxs-lookup"><span data-stu-id="d3517-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="d3517-271">Spusťte POS pro obchod Houston.</span><span class="sxs-lookup"><span data-stu-id="d3517-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="d3517-272">Na stránce **Transakce** přidejte do transakce Karen Berg pomocí číselného panelu a zadejte **2001.**</span><span class="sxs-lookup"><span data-stu-id="d3517-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="d3517-273">Přidejte do transakce jeden nebo více řádků.</span><span class="sxs-lookup"><span data-stu-id="d3517-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="d3517-274">Pokud chcete zobrazit možnosti objednávky, vyberte **Objednávky**.</span><span class="sxs-lookup"><span data-stu-id="d3517-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="d3517-275">Vyberte **Odeslat vše** a až budete vyzváni, vyberte volbu **Objednávka zákazníka**.</span><span class="sxs-lookup"><span data-stu-id="d3517-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="d3517-276">Na stránce způsobu dopravy vyberte **Standardní přes noc** a potom vyberte **OK** přijmout dnešní datum jako datum odeslání.</span><span class="sxs-lookup"><span data-stu-id="d3517-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="d3517-277">Kliknutím na **OK** přijměte aktuální datum jako datum výdeje.</span><span class="sxs-lookup"><span data-stu-id="d3517-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="d3517-278">Vyberte **Platba kartou** pro zahájení platby.</span><span class="sxs-lookup"><span data-stu-id="d3517-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="d3517-279">Uhraďte kartou částku, která je splatná jako záloha.</span><span class="sxs-lookup"><span data-stu-id="d3517-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="d3517-280">Dokončete zálohovou platbu na platebním terminálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="d3517-281">Po zaplacení vkladu vyberte možnost pro použití stejné karty pro plnění a čekání na dokončení objednávky.</span><span class="sxs-lookup"><span data-stu-id="d3517-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="d3517-282">Pokud je objednávka vyzvednuta, zabalena a fakturována v kanceláři, budou se údaje o platbě poskytované v POS používat k zaznamenání finančních prostředků pro zboží, které je dodáno zákazníkovi.</span><span class="sxs-lookup"><span data-stu-id="d3517-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="d3517-283">Podrobnosti scénáře</span><span class="sxs-lookup"><span data-stu-id="d3517-283">Scenario details</span></span>

<span data-ttu-id="d3517-284">Kromě základních scénářů, které byly právě popsány, bylo v sadě SDK plateb provedeno několik vylepšení pro podporu omnikanálových plateb.</span><span class="sxs-lookup"><span data-stu-id="d3517-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="d3517-285">POS</span><span class="sxs-lookup"><span data-stu-id="d3517-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="d3517-286">Jedno protažení/přiložení pro objednávky zákazníka</span><span class="sxs-lookup"><span data-stu-id="d3517-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="d3517-287">Před implementací funkce omnikanálových plateb to bývalo tak, že při vytvoření objednávek zákazníka, které obsahovaly zálohu, V POS, museli zákazníci protáhnout (nebo přiložit) kartu dvakrát: jednou pro zaplacení zálohy a podruhé k tokenizaci karty pro následné plnění objednávky.</span><span class="sxs-lookup"><span data-stu-id="d3517-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="d3517-288">Po zapnutí funkce tokenizace omnikanálu musí zákazníci protáhnout kartu jenom jednou, aby zaplatili zálohu a autorizovali částku za zboží, které bude dodáno později.</span><span class="sxs-lookup"><span data-stu-id="d3517-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="d3517-289">V okamžiku plnění jsou zachyceny autorizované finance.</span><span class="sxs-lookup"><span data-stu-id="d3517-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="d3517-290">Před implementací funkce omnikanálové tokenizace byl vytvořen pouze opakovaný token karty pro následné plnění objednávky.</span><span class="sxs-lookup"><span data-stu-id="d3517-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="d3517-291">Proto nebyly finanční prostředky pro nevyřízené plnění autorizovány a protože tyto finance nebyly pro tento konkrétní nákup blokovány, bylo méně pravděpodobné, že by mohly být zachyceny později.</span><span class="sxs-lookup"><span data-stu-id="d3517-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="d3517-292">Aplikace Retail verze 8.1.3 nepodporuje jedno protažení.</span><span class="sxs-lookup"><span data-stu-id="d3517-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="d3517-293">Objednávky zákazníka ve verzi 8.1.3 používají stejný tok, který byl použit před implementací funkce tokenizace omnikanálu.</span><span class="sxs-lookup"><span data-stu-id="d3517-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="d3517-294">Karty, které nemohou vydávat opakované tokeny karet</span><span class="sxs-lookup"><span data-stu-id="d3517-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="d3517-295">Některé karty nelze použít pro omnikanálové platby, protože nepodporují vydávání opakovaných tokenů karet.</span><span class="sxs-lookup"><span data-stu-id="d3517-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="d3517-296">Když je v POS vytvořena objednávka a záloha je zaplacena pomocí karty, která nepodporuje tokeny opakovaných karet, použije se předchozí tok tokenu karty.</span><span class="sxs-lookup"><span data-stu-id="d3517-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="d3517-297">Proto musí mít zákazník, který chce poskytnout platbu, která bude použita pro následné plnění objednávky, k dispozici druhou kartu.</span><span class="sxs-lookup"><span data-stu-id="d3517-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="d3517-298">Pokud druhá karta nepodporuje opakované tokeny karet, bude akce tokenizace odmítnuta a pokladník bude vyzván, aby požádal zákazníka o poskytnutí druhé karty.</span><span class="sxs-lookup"><span data-stu-id="d3517-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="d3517-299">Použití jiné karty</span><span class="sxs-lookup"><span data-stu-id="d3517-299">Using a different card</span></span>

<span data-ttu-id="d3517-300">Zákazník, který přichází do obchodu vyzvednout objednávku, má možnost použít jinou kartu.</span><span class="sxs-lookup"><span data-stu-id="d3517-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="d3517-301">Když pokladník obdrží výzvu k **použití dostupného způsobu platby** v době výdeje objednávky, může se zeptat, zda chce zákazník používat stejnou kartu.</span><span class="sxs-lookup"><span data-stu-id="d3517-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, the cashier can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="d3517-302">Pokud zákazník ztratil kartu, která byla použita při vytvoření objednávky, a chce zaplatit objednávku pomocí jiné karty, může pokladník vybrat možnost **Použít jiný způsob platby**.</span><span class="sxs-lookup"><span data-stu-id="d3517-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="d3517-303">Pokud se zákazník později pokusí vyzvednout další zboží ze stejné objednávky a platí autorizace původní karty, může se pokladník znovu zeptat, zda chce zákazník použít tuto kartu.</span><span class="sxs-lookup"><span data-stu-id="d3517-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="d3517-304">Neplatné autorizace</span><span class="sxs-lookup"><span data-stu-id="d3517-304">Invalid authorizations</span></span>

<span data-ttu-id="d3517-305">Pokud karta, která byla použita k vytvoření objednávky, již není platná, požadavek na zachycení platby se při výběru produktů nezdaří.</span><span class="sxs-lookup"><span data-stu-id="d3517-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="d3517-306">Konektor platby POS se pak pokusí vytvořit novou autorizaci a zachycení pomocí stejných podrobností o kartě.</span><span class="sxs-lookup"><span data-stu-id="d3517-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="d3517-307">Pokud se nové povolení nebo zachycení nezdaří, pokladník bude informován o tom, že platbu nelze zpracovat.</span><span class="sxs-lookup"><span data-stu-id="d3517-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="d3517-308">Pokladník poté musí od zákazníka získat novou platbu.</span><span class="sxs-lookup"><span data-stu-id="d3517-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="d3517-309">Více dostupných plateb</span><span class="sxs-lookup"><span data-stu-id="d3517-309">Multiple available payments</span></span>

<span data-ttu-id="d3517-310">Když má objednávka více nabídek a je vybráno více řádků, pokladník nejprve obdrží výzvu **Použít dostupný způsob platby**.</span><span class="sxs-lookup"><span data-stu-id="d3517-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="d3517-311">Pokud existuje více karet, když pokladník vybere možnost **Použít dostupný způsob platby**, budou zachyceny existují řádky výběru platby, dokud nebude splněn zůstatek u aktuálně vybíraného zboží.</span><span class="sxs-lookup"><span data-stu-id="d3517-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="d3517-312">Pokladník nebude mít možnost vybrat kartu, která má být použita pro vybírané zboží.</span><span class="sxs-lookup"><span data-stu-id="d3517-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="d3517-313">Související témata</span><span class="sxs-lookup"><span data-stu-id="d3517-313">Related topics</span></span>

- [<span data-ttu-id="d3517-314">Časté dotazy k platbám</span><span class="sxs-lookup"><span data-stu-id="d3517-314">Payments FAQ</span></span>](/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="d3517-315">Platební konektor Dynamics 365 pro Adyen</span><span class="sxs-lookup"><span data-stu-id="d3517-315">Dynamics 365 Payment Connector for Adyen</span></span>](/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="d3517-316">Konfigurovat BOPIS v prostředí vyhodnocení Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="d3517-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](./cpe-bopis.md)



[!INCLUDE[footer-include](../includes/footer-banner.md)]