---
title: Vylepšení funkcionality zaúčtování výkazů
description: Toto téma popisuje vylepšení, která byla provedena u funkce zaúčtování výkazu.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 68abef8f28c04a4f6f88e638c8abf944d06a32c4
ms.sourcegitcommit: 12b9d6f2dd24e52e46487748c848864909af6967
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/14/2020
ms.locfileid: "3057248"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="a72ee-103">Vylepšení funkcionality zaúčtování výkazů</span><span class="sxs-lookup"><span data-stu-id="a72ee-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="a72ee-104">Toto téma popisuje první sadu vylepšení, která byla provedena u funkce zaúčtování výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="a72ee-105">Tato zlepšení jsou k dispozici v aplikaci Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="a72ee-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="a72ee-106">Aktivace</span><span class="sxs-lookup"><span data-stu-id="a72ee-106">Activation</span></span>

<span data-ttu-id="a72ee-107">Ve výchozím nastavení při nasazení aplikace Finance and Operations 7.3.2. je aplikace nastavená na používání zastaralé funkce pro zaúčtování výkazů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="a72ee-108">Pro povolení funkce vylepšeného zaúčtování výkazů zaúčtování musíte zapnout konfigurační klíč.</span><span class="sxs-lookup"><span data-stu-id="a72ee-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="a72ee-109">Přejděte na **Správa systému** \> **Nastavení** \> **Konfigurace licence** a poté v uzlu **Retail a Commerce** zrušte zaškrtnutí políčka **Výkazy (starší verze)** a zaškrtněte políčko **Výkazy**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail and Commerce** node, clear the **Statements (legacy)** check box, and select the **Statements** check box.</span></span>

<span data-ttu-id="a72ee-110">Když je zapnutý konfigurační klíč pro nové **Výkazy**, bude k dispozici nová položka nabídky, s názvem **Výkazy**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-110">When the new **Statements** configuration key is turned on, a new menu item that is named **Statements** is available.</span></span> <span data-ttu-id="a72ee-111">Tato položka nabídky umožňuje ručně vytvořit, vypočítat a zaúčtovat výkazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="a72ee-112">Všechny výkazy, které způsobují chyby při zaúčtování dávkového zpracování budou také k dispozici prostřednictvím této položky.</span><span class="sxs-lookup"><span data-stu-id="a72ee-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="a72ee-113">(Když je zapnutý konfigurační klíč pro nové **Výkazy (zastaralé)**, bude název položky **Otevřené výkazy**.)</span><span class="sxs-lookup"><span data-stu-id="a72ee-113">(When the **Statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="a72ee-114">Aplikace Commerce zahrnuje následující ověření, která souvisí s těmito konfiguračními klíči:</span><span class="sxs-lookup"><span data-stu-id="a72ee-114">Commerce includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="a72ee-115">Oba konfigurační klíče nelze spustit současně.</span><span class="sxs-lookup"><span data-stu-id="a72ee-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="a72ee-116">Stejný konfigurační klíč musí být použit pro všechny operace, které se provádí v daném výkazu během jeho cyklu životnosti (vytvořit, vypočítat, vymazat, zaúčtovat a tak dále).</span><span class="sxs-lookup"><span data-stu-id="a72ee-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="a72ee-117">Nelze například vytvořit a vypočítat výkaz, když je zapnutý konfigurační klíč **Výkaz (starší verze)** konfigurační a vy se pokusíte o zaúčtování stejného výkazu, když je zapnutý konfigurační klíč **Výkaz**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-117">For example, you can't create and calculate a statement while the **Statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="a72ee-118">Doporučujeme používat **Výkazy** konfigurační klíč pro zlepšení výkaz zaúčtování, pokud nemáte závažné důvodů pro použití **Výkazy (starší verze)** konfigurační klíč místo.</span><span class="sxs-lookup"><span data-stu-id="a72ee-118">We recommend that you use the **Statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="a72ee-119">Společnost Microsoft bude dále investovat do nových a vylepšených funkcí zaúčtování výkazů a je důležité, abyste na ně co nejdříve přešli a plně je využívali.</span><span class="sxs-lookup"><span data-stu-id="a72ee-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="a72ee-120">Zastaralá funkce zaúčtování výkazů bude od verze 8.0 vyřazena.</span><span class="sxs-lookup"><span data-stu-id="a72ee-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="a72ee-121">Nastavení</span><span class="sxs-lookup"><span data-stu-id="a72ee-121">Setup</span></span>

<span data-ttu-id="a72ee-122">Jako součást vylepšení funkce zaúčtování výkazu byly zavedeny tři nové parametry na pevné záložce **výkaz** na kartě **zaúčtování** stránky **Parametry Commerce**:</span><span class="sxs-lookup"><span data-stu-id="a72ee-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span>

- <span data-ttu-id="a72ee-123">**Zakázat výkaz vymazání** – tuto možnost lze použít pouze pro funkcí účtování staršího výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="a72ee-124">Doporučujeme tuto možnost nastavit na **Ne**, abyste uživatelům zabránili mazat výkazy ve stavu nedokončeného zaúčtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="a72ee-125">Pokud jsou výkazy, které jsou ve stavu nedokončeného zaúčtování, prázdné, data budou poškozená.</span><span class="sxs-lookup"><span data-stu-id="a72ee-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="a72ee-126">Tuto možnost nastavte na **Ano** pouze ve speciálních případech.</span><span class="sxs-lookup"><span data-stu-id="a72ee-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="a72ee-127">**Rezervovat zásoby při výpočtu** – doporučujeme používat dávkovou úlohu **Zaúčtovat zásoby** pro rezervaci zásob a a nastavit tuto možnost na **ne**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="a72ee-128">Pokud je tato možnost nastavena na **Ne**, vylepšená funkce zaúčtování se nepokusí vytvořit rezervaci položek zásob v době výpočtu (Pokud položky nebyly vytvořeny prostřednictvím dávkové úlohy **zaúčtování zásob**).</span><span class="sxs-lookup"><span data-stu-id="a72ee-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="a72ee-129">Funkce místo toho vytvoří položky rezervace zásob pouze v době zaúčtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="a72ee-130">Tato implementace byla volbou návrhu a byla založena na skutečnosti, že je obvykle malá časová prodleva mezi procesem výpočtu a procesem účtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="a72ee-131">Pokud však chcete rezervovat zásoby v době výpočtu, můžete tuto možnost nastavit na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="a72ee-132">Zastaralá funkce zaúčtování výkazu vždy rezervuje zásoby při výpočtu výkazu (Pokud již nebyla provedena rezervace prostřednictvím dávkové úlohy **zaúčtování zásob**) bez ohledu na nastavení této možnosti.</span><span class="sxs-lookup"><span data-stu-id="a72ee-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="a72ee-133">**Je vyžadována deaktivace inventur** – při nastavení této možnosti na **Ano** proces zaúčtování výkazů pokračuje i v případě, že rozdíl mezi vypočítanou částkou a částkou transakce na výkazu je mimo prahovou hodnotu, která je definovaná v pevné záložce **Výkaz** pro obchody.</span><span class="sxs-lookup"><span data-stu-id="a72ee-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for stores.</span></span>

<span data-ttu-id="a72ee-134">Dále byly zavedeny následující parametry na pevné záložce **Dávkové zpracování** na kartě **Zaúčtování** stránky **Parametry Commerce**:</span><span class="sxs-lookup"><span data-stu-id="a72ee-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span> 

- <span data-ttu-id="a72ee-135">**Maximální počet zaúčtování paralelních výkazů** – Toto pole definuje počet dávkových úloh, které budou použity při zaúčtování více výkazů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="a72ee-136">**Maximální počet vláken pro zpracování objednávky podle výkazu** – Toto pole představuje maximální počet vláken, které používá dávková úloha zaúčtování výkazu k vytvoření a fakturaci prodejních objednávek pro jeden výkaz.</span><span class="sxs-lookup"><span data-stu-id="a72ee-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="a72ee-137">Celkový počet vláken, která budou použita procesem zaúčtování výkazu, bude vypočten na základě hodnoty v tomto parametru vynásobené hodnotou v parametru **Maximální počet zaúčtování paralelních příkazů**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="a72ee-138">Nastavení příliš vysoké hodnoty tohoto parametru může negativně ovlivnit výkon procesu zaúčtování výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="a72ee-139">**Maximální počet řádků transakce zahrnutých do agregace** – Toto pole definuje počet řádků transakce, které budou zahrnuty do jedné agregované transakce před vytvořením nové.</span><span class="sxs-lookup"><span data-stu-id="a72ee-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="a72ee-140">Agregované transakce jsou vytvářeny na základě různých agregačních kritérií, jako je například odběratel, obchodní datum nebo finanční dimenze.</span><span class="sxs-lookup"><span data-stu-id="a72ee-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="a72ee-141">Je důležité si uvědomit, že řádky z jedné transakce nebudou rozděleny mezi různé agregované transakce.</span><span class="sxs-lookup"><span data-stu-id="a72ee-141">It is important to note that the lines from a single transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="a72ee-142">To znamená, že je možné, že počet řádků v agregované transakci je o něco vyšší nebo nižší podle faktorů, jako je například počet různých produktů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="a72ee-143">**Maximální počet vláken pro ověření transakcí obchodu** – Toto pole definuje počet vláken, která budou použita k ověření transakcí.</span><span class="sxs-lookup"><span data-stu-id="a72ee-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate transactions.</span></span> <span data-ttu-id="a72ee-144">Ověření transakcí je povinný krok, ke kterému musí dojít předtím, než mohou být transakce načteny do výkazů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-144">Validating transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="a72ee-145">Je rovněž nutné definovat **Produkt dárkového poukazu** na pevné záložce **Dárkový poukaz** na kartě **Zaúčtování** stránky **Parametry Commerce**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="a72ee-146">Je nutné to definovat i v případě, že organizace nepoužívá dárkové poukazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="a72ee-147">Všechna nastavení a parametry související se zaúčtováním výkazu, které jsou definovány v obchodech a na stránce **Parametry Commerce**, se vztahují na vylepšenou funkci zaúčtování výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-147">All settings and parameters that are related to statement postings, and that are defined on stores and on the **Commerce parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="a72ee-148">Zpracování</span><span class="sxs-lookup"><span data-stu-id="a72ee-148">Processing</span></span>

<span data-ttu-id="a72ee-149">Příkazy je možné vypočítávat a zaúčtovat v dávce pomocí položek nabídky **Počítat výkazy v dávce** a **dávkové Zaúčtování výkazů**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="a72ee-150">Výkazy lze alternativně ručně vypočítávat a zaúčtovat pomocí nabídky **Výkazy**, která poskytuje vylepšené funkce zaúčtování výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-150">Alternatively, statements can be manually calculated and posted by using the **Statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="a72ee-151">Proces a postup při výpočtu a zaúčtování výkazů v rámci dávky, jsou stejné jako u funkce zaúčtování výkazu ze starší verze.</span><span class="sxs-lookup"><span data-stu-id="a72ee-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="a72ee-152">Významná vylepšení však byly provedeny v základním back-endovém zpracování výkazů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="a72ee-153">Tato zlepšení zajišťují, že je proces více pružný a poskytují lepší přehled o stavech a informace o chybách.</span><span class="sxs-lookup"><span data-stu-id="a72ee-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="a72ee-154">Proto mohou uživatelé vyřešit hlavní příčinu chyb a poté pokračovat v procesu zaúčtování, aniž by to způsobilo poškození dat, a bez nutnosti oprav dat.</span><span class="sxs-lookup"><span data-stu-id="a72ee-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="a72ee-155">Následující části popisují některá zásadní vylepšení pro výkazy a zaúčtované výkazy, která se zobrazí v uživatelském rozhraní.</span><span class="sxs-lookup"><span data-stu-id="a72ee-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="a72ee-156">Podrobnosti o stavu</span><span class="sxs-lookup"><span data-stu-id="a72ee-156">Status details</span></span>

<span data-ttu-id="a72ee-157">Byl zaveden nový model stavu v rutině zaúčtování výkazů v rámci procesů výpočtu a zaúčtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="a72ee-158">Následující tabulka popisuje různé stavy a jejich pořadí během procesu výpočtu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="a72ee-159">Pořadí stavu</span><span class="sxs-lookup"><span data-stu-id="a72ee-159">State order</span></span> | <span data-ttu-id="a72ee-160">Kraj</span><span class="sxs-lookup"><span data-stu-id="a72ee-160">State</span></span>      | <span data-ttu-id="a72ee-161">popis</span><span class="sxs-lookup"><span data-stu-id="a72ee-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="a72ee-162">1</span><span class="sxs-lookup"><span data-stu-id="a72ee-162">1</span></span>           | <span data-ttu-id="a72ee-163">Zahájeno</span><span class="sxs-lookup"><span data-stu-id="a72ee-163">Started</span></span>    | <span data-ttu-id="a72ee-164">Výkaz byl vytvořen a je připraven k výpočtu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="a72ee-165">2</span><span class="sxs-lookup"><span data-stu-id="a72ee-165">2</span></span>           | <span data-ttu-id="a72ee-166">Označeno</span><span class="sxs-lookup"><span data-stu-id="a72ee-166">Marked</span></span>     | <span data-ttu-id="a72ee-167">Transakce, které jsou v rozsahu výkazu, jsou označeny na základě parametrů výkazu a jsou označeny ID výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="a72ee-168">3</span><span class="sxs-lookup"><span data-stu-id="a72ee-168">3</span></span>           | <span data-ttu-id="a72ee-169">Vypočteno</span><span class="sxs-lookup"><span data-stu-id="a72ee-169">Calculated</span></span> | <span data-ttu-id="a72ee-170">Řádky výkazu se vypočtou a zobrazí.</span><span class="sxs-lookup"><span data-stu-id="a72ee-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="a72ee-171">Následující tabulka popisuje různé stavy a jejich pořadí během procesu zaúčtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="a72ee-172">Pořadí stavu</span><span class="sxs-lookup"><span data-stu-id="a72ee-172">State order</span></span> | <span data-ttu-id="a72ee-173">Kraj</span><span class="sxs-lookup"><span data-stu-id="a72ee-173">State</span></span>                   | <span data-ttu-id="a72ee-174">popis</span><span class="sxs-lookup"><span data-stu-id="a72ee-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="a72ee-175">1</span><span class="sxs-lookup"><span data-stu-id="a72ee-175">1</span></span>           | <span data-ttu-id="a72ee-176">Zkontrolováno</span><span class="sxs-lookup"><span data-stu-id="a72ee-176">Checked</span></span>                 | <span data-ttu-id="a72ee-177">Provádí se vícenásobné ověřování související s parametry (například dispoziční náklady) a s výkazy a řádky výkazu (například rozdíl mezi spočtenou částkou a částkou transakce).</span><span class="sxs-lookup"><span data-stu-id="a72ee-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="a72ee-178">2</span><span class="sxs-lookup"><span data-stu-id="a72ee-178">2</span></span>           | <span data-ttu-id="a72ee-179">Agregované</span><span class="sxs-lookup"><span data-stu-id="a72ee-179">Aggregated</span></span>              | <span data-ttu-id="a72ee-180">Prodejní transakce jmenovaných a nejmenovaných odběratelů jsou seskupeny podle konfigurace.</span><span class="sxs-lookup"><span data-stu-id="a72ee-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="a72ee-181">Každá agregovaná transakce je nakonec převedena na prodejní objednávku.</span><span class="sxs-lookup"><span data-stu-id="a72ee-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="a72ee-182">3</span><span class="sxs-lookup"><span data-stu-id="a72ee-182">3</span></span>           | <span data-ttu-id="a72ee-183">Vytvořená objednávka odběratele</span><span class="sxs-lookup"><span data-stu-id="a72ee-183">Customer order created</span></span>  | <span data-ttu-id="a72ee-184">Na základě souhrnné transakce jsou v systému vytvořeny prodejní objednávky.</span><span class="sxs-lookup"><span data-stu-id="a72ee-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="a72ee-185">4</span><span class="sxs-lookup"><span data-stu-id="a72ee-185">4</span></span>           | <span data-ttu-id="a72ee-186">Objednávka odběratele fakturovaná</span><span class="sxs-lookup"><span data-stu-id="a72ee-186">Customer order invoiced</span></span> | <span data-ttu-id="a72ee-187">Prodejní objednávky jsou fakturované.</span><span class="sxs-lookup"><span data-stu-id="a72ee-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="a72ee-188">5</span><span class="sxs-lookup"><span data-stu-id="a72ee-188">5</span></span>           | <span data-ttu-id="a72ee-189">Zaúčtované slevy</span><span class="sxs-lookup"><span data-stu-id="a72ee-189">Discounts posted</span></span>        | <span data-ttu-id="a72ee-190">Deníky pravidelné slevy se zaúčtovávají na základě konfigurace.</span><span class="sxs-lookup"><span data-stu-id="a72ee-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="a72ee-191">6</span><span class="sxs-lookup"><span data-stu-id="a72ee-191">6</span></span>           | <span data-ttu-id="a72ee-192">Zaúčtovaný příjem/výdaj</span><span class="sxs-lookup"><span data-stu-id="a72ee-192">Income/expense posted</span></span>   | <span data-ttu-id="a72ee-193">Transakce příjmů/výdajů se zaúčtovávají jako doklady.</span><span class="sxs-lookup"><span data-stu-id="a72ee-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="a72ee-194">7</span><span class="sxs-lookup"><span data-stu-id="a72ee-194">7</span></span>           | <span data-ttu-id="a72ee-195">Doklady propojeny</span><span class="sxs-lookup"><span data-stu-id="a72ee-195">Vouchers linked</span></span>         | <span data-ttu-id="a72ee-196">Deníky plateb se vytvářejí a jsou propojeny s odpovídající fakturou.</span><span class="sxs-lookup"><span data-stu-id="a72ee-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="a72ee-197">8</span><span class="sxs-lookup"><span data-stu-id="a72ee-197">8</span></span>           | <span data-ttu-id="a72ee-198">Zaúčtované platby</span><span class="sxs-lookup"><span data-stu-id="a72ee-198">Payments posted</span></span>         | <span data-ttu-id="a72ee-199">Deníky plateb jsou zaúčtované.</span><span class="sxs-lookup"><span data-stu-id="a72ee-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="a72ee-200">9</span><span class="sxs-lookup"><span data-stu-id="a72ee-200">9</span></span>           | <span data-ttu-id="a72ee-201">Zaúčtované dárkové poukazy</span><span class="sxs-lookup"><span data-stu-id="a72ee-201">Gift cards posted</span></span>       | <span data-ttu-id="a72ee-202">Transakce dárkových karet se zaúčtovávají jako doklady.</span><span class="sxs-lookup"><span data-stu-id="a72ee-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="a72ee-203">10</span><span class="sxs-lookup"><span data-stu-id="a72ee-203">10</span></span>          | <span data-ttu-id="a72ee-204">Zveřejněno</span><span class="sxs-lookup"><span data-stu-id="a72ee-204">Posted</span></span>                  | <span data-ttu-id="a72ee-205">Výkaz je označen jako zaúčtovaný.</span><span class="sxs-lookup"><span data-stu-id="a72ee-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="a72ee-206">Každý stav v předchozích tabulkách je nezávislý a mezi stavy je vytvořena hierarchická závislost.</span><span class="sxs-lookup"><span data-stu-id="a72ee-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="a72ee-207">Tato závislost teče shora dolů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="a72ee-208">Jestliže systém zaznamená nějaké chyby při zpracování stavu, stav výkazu se vrátí na předchozí stav.</span><span class="sxs-lookup"><span data-stu-id="a72ee-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="a72ee-209">Všechny následné opakované pokusy procesu se obnoví ze stavu, který se nezdařil, a pokračují v chodu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="a72ee-210">Tento přístup má následujících výhody:</span><span class="sxs-lookup"><span data-stu-id="a72ee-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="a72ee-211">Uživatel má kompletní přehled o stavu, kdy došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="a72ee-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="a72ee-212">Je zabráněno poškození dat.</span><span class="sxs-lookup"><span data-stu-id="a72ee-212">Data corruption is avoided.</span></span> <span data-ttu-id="a72ee-213">Například ve starší funkci zaúčtování výkazu byly instance, kdy byly fakturovány některé prodejní objednávky, ale ostatní zůstaly otevřené.</span><span class="sxs-lookup"><span data-stu-id="a72ee-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="a72ee-214">Vyskytly se rovněž instance, kdy některé deníky plateb neměly odpovídající fakturu k vyrovnání, protože při zaúčtování faktury došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="a72ee-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="a72ee-215">Uživatelé mohou zobrazit aktuální stav výkazu pomocí tlačítka **podrobnosti o stavu** ve skupině **podrobnosti o spuštění** ve výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="a72ee-216">Stránka podrobností o stavu obsahuje tři části:</span><span class="sxs-lookup"><span data-stu-id="a72ee-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="a72ee-217">První část zobrazuje aktuální stav výkazu, spolu s kódem chyby a podrobnou chybovou zprávou, pokud došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="a72ee-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="a72ee-218">Druhý oddíl se zobrazí různé stavy procesu výpočtu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="a72ee-219">Vizuální návody určují stavy, které byly úspěšně spuštěn, stavy, které se nepodařilo spustit z důvodu chyb a stavy, které dosud nebyly spuštěny.</span><span class="sxs-lookup"><span data-stu-id="a72ee-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="a72ee-220">Třetí oddíl zobrazuje různé stavy procesu zaúčtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="a72ee-221">Vizuální návody určují stavy, které byly úspěšně spuštěn, stavy, které se nepodařilo spustit z důvodu chyb a stavy, které dosud nebyly spuštěny.</span><span class="sxs-lookup"><span data-stu-id="a72ee-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="a72ee-222">Kromě toho záhlaví oddíly druhého a třetího oddílu zobrazuje celkový stav příslušného procesu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="a72ee-223">Protokoly událostí</span><span class="sxs-lookup"><span data-stu-id="a72ee-223">Event logs</span></span>

<span data-ttu-id="a72ee-224">Výkaz prochází různými operacemi (například vytvořit, vypočítat, vymazat a zaúčtovat) a více instancí stejné operace může být voláno během životního cyklu výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="a72ee-225">Například po vytvoření a vypočítání výkazu ho uživatel může vymazat a vypočítávat znovu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="a72ee-226">Tlačítko **Protokoly událostí** ve skupině výkazů **Podrobnosti o spuštění** obsahuje úplný kontrolní záznam různých operací, které byly volány ve výkazu, společně s informacemi o tom, kdy byly tyto operace volány.</span><span class="sxs-lookup"><span data-stu-id="a72ee-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="a72ee-227">Agregované transakce</span><span class="sxs-lookup"><span data-stu-id="a72ee-227">Aggregated transactions</span></span>

<span data-ttu-id="a72ee-228">Během procesu zaúčtování jsou prodejní transakce seskupeny podle konfigurace.</span><span class="sxs-lookup"><span data-stu-id="a72ee-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="a72ee-229">Tyto souhrnné transakce jsou v systému uloženy a slouží k vytváření prodejních objednávek.</span><span class="sxs-lookup"><span data-stu-id="a72ee-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="a72ee-230">Každá souhrnná transakce agregační vytvoří jednu odpovídajících prodejní objednávky v systému.</span><span class="sxs-lookup"><span data-stu-id="a72ee-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="a72ee-231">Souhrnné transakce můžete zobrazit pomocí tlačítka **Souhrnné transakce** ve skupině **Podrobnosti o spuštění** ve výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="a72ee-232">Karta **Prodejní objednávky** souhrnné transakce uvádí následující informace:</span><span class="sxs-lookup"><span data-stu-id="a72ee-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="a72ee-233">**ID záznamu** – ID záznamu souhrnné transakce.</span><span class="sxs-lookup"><span data-stu-id="a72ee-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="a72ee-234">**Číslo výkazu** – výkaz, ke kterému souhrnná transakce patří.</span><span class="sxs-lookup"><span data-stu-id="a72ee-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="a72ee-235">**Datum** – datum vytvoření souhrnné transakce.</span><span class="sxs-lookup"><span data-stu-id="a72ee-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="a72ee-236">**ID prodeje** – při vytvoření prodejní objednávky ze souhrnné transakce, ID prodejní objednávky.</span><span class="sxs-lookup"><span data-stu-id="a72ee-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="a72ee-237">Pokud je toto pole prázdné, odpovídající prodejní objednávka nebyla vytvořena.</span><span class="sxs-lookup"><span data-stu-id="a72ee-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="a72ee-238">**Počet souhrnných řádků** – celkový počet řádků pro souhrnnou transakci a prodejní objednávku.</span><span class="sxs-lookup"><span data-stu-id="a72ee-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="a72ee-239">**Stav** – stav poslední souhrnné transakce.</span><span class="sxs-lookup"><span data-stu-id="a72ee-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="a72ee-240">**ID faktury** – při fakturaci souhrnné prodejní objednávky pro souhrnnou transakci, ID prodejní faktury.</span><span class="sxs-lookup"><span data-stu-id="a72ee-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="a72ee-241">Pokud je toto pole prázdné, faktura pro prodejní objednávku nebyla zaúčtována.</span><span class="sxs-lookup"><span data-stu-id="a72ee-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="a72ee-242">Karta **Podrobnosti o transakcích** agregované transakce zobrazuje všechny transakce, které byly převedeny do souhrnné transakce.</span><span class="sxs-lookup"><span data-stu-id="a72ee-242">The **Transaction details** tab of an aggregated transaction shows all the transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="a72ee-243">Agregované řádky agregované transakce zobrazují všechny agregované záznamy z transakce.</span><span class="sxs-lookup"><span data-stu-id="a72ee-243">The aggregated lines on the aggregated transaction show all the aggregated records from the transactions.</span></span> <span data-ttu-id="a72ee-244">Agregované řádky také zobrazují podrobné informace, jako je položka, varianta, množství, cena, čistá částka, jednotka a sklad.</span><span class="sxs-lookup"><span data-stu-id="a72ee-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="a72ee-245">Každý agregovaný řádek v zásadě odpovídá jednomu řádku prodejní objednávky.</span><span class="sxs-lookup"><span data-stu-id="a72ee-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="a72ee-246">Ze stránky **Souhrnné transakce** si můžete stáhnout soubor XML pro určitou souhrnnou transakci pomocí tlačítka **Exportovat XML prodejní objednávky**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="a72ee-247">Kód XML slouží k ladění problémů, které se týkají vytvoření prodejní objednávky a zaúčtování.</span><span class="sxs-lookup"><span data-stu-id="a72ee-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="a72ee-248">Stačí stáhnout si soubor XML, nahrát ho do testovacího prostředí a vyladit výdej v testovacím prostředí.</span><span class="sxs-lookup"><span data-stu-id="a72ee-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="a72ee-249">Funkce pro stažení souboru XML pro agregované transakce není k dispozici pro výkazy, které byly zaúčtovány.</span><span class="sxs-lookup"><span data-stu-id="a72ee-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="a72ee-250">Zobrazení souhrnné transakce poskytuje následující výhody:</span><span class="sxs-lookup"><span data-stu-id="a72ee-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="a72ee-251">Uživatel má vhled do souhrnných transakcí, které selhaly při vytváření prodejní objednávky, a prodejních objednávek, které selhaly při fakturaci.</span><span class="sxs-lookup"><span data-stu-id="a72ee-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="a72ee-252">Uživatel má přehled o způsobu, jakým budou transakce agregovány.</span><span class="sxs-lookup"><span data-stu-id="a72ee-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="a72ee-253">Uživatel dokončil revizní záznam, z transakcí do prodejních objednávek, do prodejních faktur.</span><span class="sxs-lookup"><span data-stu-id="a72ee-253">The user has a complete audit trail, from transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="a72ee-254">Tento záznam pro audit nebyl k dispozici ve funkci zaúčtování výkazu ze starší verze.</span><span class="sxs-lookup"><span data-stu-id="a72ee-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="a72ee-255">Agregovaný soubor XML usnadňuje určit problémy při vytváření prodejní objednávky a fakturaci.</span><span class="sxs-lookup"><span data-stu-id="a72ee-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="a72ee-256">Doklady deníku</span><span class="sxs-lookup"><span data-stu-id="a72ee-256">Journal vouchers</span></span>

<span data-ttu-id="a72ee-257">Tlačítko **Doklady deníků** ve skupině **podrobnosti o spuštění** zobrazí všechny různé transakce dokladů vytvořené pro výkaz a které se vztahují ke slevám, účtům příjmů/výdajům, dárkovým kartám a tak dále.</span><span class="sxs-lookup"><span data-stu-id="a72ee-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="a72ee-258">Program v současné době tato data zobrazuje pouze pro zaúčtované výkazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="a72ee-259">Deníky plateb</span><span class="sxs-lookup"><span data-stu-id="a72ee-259">Payment journals</span></span>

<span data-ttu-id="a72ee-260">Tlačítko **Deníky plateb** ve skupině výkazu **Podrobnosti o spuštění** zobrazuje všechny různé platební deníky, které jsou vytvořeny pro výkazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="a72ee-261">Program v současné době tato data zobrazuje pouze pro zaúčtované výkazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="a72ee-262">Další zlepšení</span><span class="sxs-lookup"><span data-stu-id="a72ee-262">Other improvements</span></span>

<span data-ttu-id="a72ee-263">Ostatní backendová vylepšení, která uživatel vidí byla provedena u funkce zaúčtování výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="a72ee-264">Několik příkladů:</span><span class="sxs-lookup"><span data-stu-id="a72ee-264">Here are some examples:</span></span>

- <span data-ttu-id="a72ee-265">Agregace nebere v úvahu zaměstnance, terminál a entity směny.</span><span class="sxs-lookup"><span data-stu-id="a72ee-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="a72ee-266">Vzhledem k tomu, že je méně souhrnných parametrů, je nutné zpracovat méně řádků prodejní objednávky.</span><span class="sxs-lookup"><span data-stu-id="a72ee-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="a72ee-267">Výskyt zablokování v tabulkách transakcí se sníží zavedením dalších tabulek rozšíření další a provedením operace vložení namísto operace úpravy tabulek transakcí.</span><span class="sxs-lookup"><span data-stu-id="a72ee-267">The occurrence of deadlock on transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the transaction tables.</span></span>
- <span data-ttu-id="a72ee-268">Počet spuštěných dávkových úloh obsahuje parametry a je omezen.</span><span class="sxs-lookup"><span data-stu-id="a72ee-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="a72ee-269">Toto číslo lze tedy upravit tak, aby odpovídalo konkrétnímu prostředí zákazníka.</span><span class="sxs-lookup"><span data-stu-id="a72ee-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="a72ee-270">Ve funkci starších výkazů zaúčtování byl vytvořen neomezený počet dávkových úloh současně.</span><span class="sxs-lookup"><span data-stu-id="a72ee-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="a72ee-271">Výsledky byly nezvládnutelným náklady, režie a kritická místa v dávkovém serveru.</span><span class="sxs-lookup"><span data-stu-id="a72ee-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="a72ee-272">Výkazy jsou efektivně zařazeny do fronty ke zpracování pomocí určení priority výkazů, které mají maximální počet transakcí.</span><span class="sxs-lookup"><span data-stu-id="a72ee-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="a72ee-273">Dávkové procesy, například **Vypočítat výkazy v dávce** a **Zaúčtování výkazů v dávce** jsou spuštěny jen v dávkovém režimu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="a72ee-274">U starší funkce zaúčtování výkazu uživatelé mohli vybrat interaktivní režim ke spuštění těchto dávkových procesů s jedinou posloupností operací na rozdíl od dávkových procesů, které jsou s několika spuštěními.</span><span class="sxs-lookup"><span data-stu-id="a72ee-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="a72ee-275">Ve starší funkci zaúčtování výkazu jakákoli chyba dávkové úlohy způsobila, že celá dávková úloha byla v chybovém stavu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="a72ee-276">Ve vylepšené funkci selhání dávkové úlohy nezpůsobila chybový stav dávkové úlohy, když byly ostatní dávkové úlohy úspěšně dokončeny.</span><span class="sxs-lookup"><span data-stu-id="a72ee-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="a72ee-277">Měli byste posoudit stav zaúčtování pro spuštění dávky pomocí stránky **Výkazy**, kde můžete zobrazit všechny výkazy, které nebyly zaúčtovány z důvodu chyb.</span><span class="sxs-lookup"><span data-stu-id="a72ee-277">You should assess the posting status for a batch execution run by using the **Statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="a72ee-278">Ve starší funkci zaúčtování výkazu způsobí první výskyt chyb výkazu neúspěšnost celé dávkové objednávky.</span><span class="sxs-lookup"><span data-stu-id="a72ee-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="a72ee-279">Zbývající výkazy nebudou zpracovány.</span><span class="sxs-lookup"><span data-stu-id="a72ee-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="a72ee-280">Ve vylepšené funkci dávkového zpracování bude pokračovat zpracování všech výkazů i v případě selhání některého z výkazů.</span><span class="sxs-lookup"><span data-stu-id="a72ee-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="a72ee-281">Jednou výhodou je, že uživatelé získají přehled o přesném počtu výkazů, které mají chyby.</span><span class="sxs-lookup"><span data-stu-id="a72ee-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="a72ee-282">Z toho vyplývá, že uživatelé nemusí neustále opravovat chyby a spouštět proces zaúčtování výkazů, dokud nebudou zaúčtovány všechny výkazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="a72ee-283">Obecné informace o procesu zaúčtování výkazu</span><span class="sxs-lookup"><span data-stu-id="a72ee-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="a72ee-284">Doporučujeme spouštět zaúčtování výkazu v dávce, protože dávkové zpracování využívá výhod výkonu systému dávek z hlediska multithreadingu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="a72ee-285">Multithreading je požadován za účelem zpracování velkých množství transakcí, které se běžně zobrazují při zaúčtování výkazu.</span><span class="sxs-lookup"><span data-stu-id="a72ee-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="a72ee-286">Doporučujeme, abyste zapnuli zápornou fyzickou inventuru u modelové skupiny položek tak, aby zaúčtování bylo bezproblémové.</span><span class="sxs-lookup"><span data-stu-id="a72ee-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="a72ee-287">V některých případech se nebudou moci negativní výkazy zaúčtovat, pokud neexistují záporné fyzické zásoby.</span><span class="sxs-lookup"><span data-stu-id="a72ee-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="a72ee-288">Například teoreticky, pokud existuje pouze jedna jednotka zboží na skladě a byly provedeny transakce prodeje a vrácení transakce pro položku, transakce by se měly být schopné zaúčtovat, i v případě, že není povoleno záporné zásoby.</span><span class="sxs-lookup"><span data-stu-id="a72ee-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="a72ee-289">Nicméně vzhledem k tomu, že proces zaúčtování výkazu vyžaduje jednu prodejní transakci a transakci vrácení v jedné objednávce, neexistuje záruka, že bude nejprve zaúčtována řádka prodeje a potom řádka vrácení.</span><span class="sxs-lookup"><span data-stu-id="a72ee-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="a72ee-290">Tak může dojít k chybám.</span><span class="sxs-lookup"><span data-stu-id="a72ee-290">Therefore, errors can occur.</span></span> <span data-ttu-id="a72ee-291">Jsou-li v tomto případě zapnuty záporné zásoby, zaúčtování transakce není negativně ovlivněno a systém bude správně odrážet zásoby.</span><span class="sxs-lookup"><span data-stu-id="a72ee-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="a72ee-292">Doporučujeme použít agregaci, zatímco budete vypočítávat a účtovat výkazy.</span><span class="sxs-lookup"><span data-stu-id="a72ee-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="a72ee-293">Proto pro některé parametry agregace doporučujeme následující nastavení:</span><span class="sxs-lookup"><span data-stu-id="a72ee-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="a72ee-294">Přejděte na možnost **Retail a Commerce** \> **Nastavení Headquarters** \> **Parametry** \> **Parametry Commerce**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-294">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="a72ee-295">Poté na kartě **zaúčtování** na pevné záložce **aktualizace zásob** v poli **úroveň podrobností** vyberte **Souhrn**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="a72ee-296">Přejděte na možnost **Retail a Commerce** \> **Nastavení Headquarters** \> **Parametry** \> **Parametry Commerce**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-296">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="a72ee-297">Poté na kartě **zaúčtování** na pevné záložce **Agregace** nastavte možnost **transakce dokladu** na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="a72ee-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
