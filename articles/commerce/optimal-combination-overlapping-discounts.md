---
title: Určení optimální kombinace překrývajících se slev
description: Při překrytí slev je třeba určit kombinaci překrývající se slev, které budou tvořit nejnižší celkové částky transakce nebo nejvyšší celkovou slevu. Pokud se částka slevy liší podle ceny produktů, které jsou zakoupeny, například u běžné maloobchodní slevy typu Při nákupu 1 sleva X procent (BOGO), tento proces bude problémem pro kombinatorní optimalizaci.
author: kfend
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailParameters, RetailPeriodicDiscount,
audience: Application User, IT Pro
ms.reviewer: josaw
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 3c7dafe55fc7072aa12b98ff42ed7d9e4719f4cd
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/31/2021
ms.locfileid: "5804690"
---
# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a><span data-ttu-id="05f12-104">Určení optimální kombinace překrývajících se slev</span><span class="sxs-lookup"><span data-stu-id="05f12-104">Determine the optimal combination of overlapping discounts</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="05f12-105">Při překrytí slev je třeba určit kombinaci překrývající se slev, které budou tvořit nejnižší celkové částky transakce nebo nejvyšší celkovou slevu.</span><span class="sxs-lookup"><span data-stu-id="05f12-105">When discounts overlap, you must determine the combination of overlapping discounts that will produce the lowest transaction total or the highest total discount.</span></span> <span data-ttu-id="05f12-106">Pokud se částka slevy liší podle ceny produktů, které jsou zakoupeny, například u běžné maloobchodní slevy typu "Při nákupu 1 sleva X procent" (BOGO), tento proces bude problémem pro kombinatorní optimalizaci.</span><span class="sxs-lookup"><span data-stu-id="05f12-106">When the discount amount varies according to the price of the products that are purchased, such as in the common "Buy 1, get 1 X percent off" (BOGO) retail discount, this process becomes an issue of combinatorial optimization.</span></span>

<span data-ttu-id="05f12-107">Tento článek platí pro Microsoft Dynamics AX 2012 R3 s KB 3105973 (vydáno 2 listopadu 2015) nebo novější, a na Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="05f12-107">This article applies to Microsoft Dynamics AX 2012 R3 with KB 3105973 (released November 2, 2015) or later, and to Dynamics 365 Commerce.</span></span> <span data-ttu-id="05f12-108">Abyste mohli určit překrývající se kombinované slevy pro včasné použití, zavedli jme metodu použití překrývajících se slev.</span><span class="sxs-lookup"><span data-stu-id="05f12-108">To determine the combination overlapping discounts to apply in a timely manner, we have introduced a method for applying overlapping discounts.</span></span> <span data-ttu-id="05f12-109">Nazýváme tuto novou metodu **mezní hodnota pořadí**.</span><span class="sxs-lookup"><span data-stu-id="05f12-109">We call this new method **marginal value ranking**.</span></span> <span data-ttu-id="05f12-110">Mezní hodnota pořadí se používá, když doba potřebná k vyhodnocení možných kombinací překrývajících se slev překročí prahovou hodnotu, kterou je možné konfigurovat na stránce **Parametry velkoobchodu**.</span><span class="sxs-lookup"><span data-stu-id="05f12-110">Marginal value ranking is used when the time that is required in order to evaluate the possible combinations of overlapping discounts exceeds a threshold that is configurable on the **Commerce parameters** page.</span></span> <span data-ttu-id="05f12-111">V metodě mezní hodnoty pořadí se vypočítá hodnota pro každou překrývající se slevu pomocí hodnoty slevy ve sdílených produktech.</span><span class="sxs-lookup"><span data-stu-id="05f12-111">In the marginal value ranking method, a value is calculated for each overlapping discount by using the discount's value on the shared products.</span></span> <span data-ttu-id="05f12-112">Překrývající se slevy jsou pak použity od nejvyšší relativní hodnoty po nejnižší relativní hodnotu.</span><span class="sxs-lookup"><span data-stu-id="05f12-112">The overlapped discounts are then applied from the highest relative value to the lowest relative value.</span></span> <span data-ttu-id="05f12-113">Další informace o nové metodě naleznete v části "Mezní hodnota" dále v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="05f12-113">For details about the new method, see the "Marginal value" section, later in this article.</span></span> <span data-ttu-id="05f12-114">Mezní hodnota pořadí nebude použita, pokud částky slev produktu nejsou ovlivněny jiným produktem v transakci.</span><span class="sxs-lookup"><span data-stu-id="05f12-114">Marginal value ranking isn't used when the discount amounts for a product aren't affected by another product in the transaction.</span></span> <span data-ttu-id="05f12-115">Například se tato metoda nepoužívá pro dvě jednoduché slevy nebo jednoduchou slevu a množstevní slevu pro jeden produkt.</span><span class="sxs-lookup"><span data-stu-id="05f12-115">For example, this method isn't used for two simple discounts, or for a simple discount and a single product quantity discount.</span></span>

## <a name="discount-examples"></a><span data-ttu-id="05f12-116">Příklady slev</span><span class="sxs-lookup"><span data-stu-id="05f12-116">Discount examples</span></span>

<span data-ttu-id="05f12-117">Můžete vytvořit neomezený počet slev na společnou sadu produktů.</span><span class="sxs-lookup"><span data-stu-id="05f12-117">You can create an unlimited number of discounts on a common set of products.</span></span> <span data-ttu-id="05f12-118">Nicméně vzhledem k tomu, že neexistuje žádné omezení, problémy s výkonem mohou nastat při výpočtu slev, které je třeba použít na různé produkty.</span><span class="sxs-lookup"><span data-stu-id="05f12-118">However, because there is no limit, performance issues can occur when you try to calculate the discounts that should be used on the various products.</span></span> <span data-ttu-id="05f12-119">Následující příklady ilustrují tento problém podrobněji.</span><span class="sxs-lookup"><span data-stu-id="05f12-119">The following examples illustrate this issue in more detail.</span></span> <span data-ttu-id="05f12-120">V příkladu 1 můžeme začít se dvěma produkty a dvěma překrývajícími se slevami.</span><span class="sxs-lookup"><span data-stu-id="05f12-120">In example 1, we start with two products and two overlapping discounts.</span></span> <span data-ttu-id="05f12-121">Potom v příkladu 2 můžeme zobrazit, jak se problém vyvíjí, když budou přidávány další produkty.</span><span class="sxs-lookup"><span data-stu-id="05f12-121">Then, in example 2, we show how the issue evolves as more products are added.</span></span>

### <a name="example-1-two-products-and-two-discounts"></a><span data-ttu-id="05f12-122">Příklad 1: Dva produkty a dvě slevy</span><span class="sxs-lookup"><span data-stu-id="05f12-122">Example 1: Two products and two discounts</span></span>

<span data-ttu-id="05f12-123">V tomto příkladu jsou požadovány dva produkty ke kvalifikaci k získání každé slevy a slevy nelze kombinovat.</span><span class="sxs-lookup"><span data-stu-id="05f12-123">In this example, two products are required in order to qualify for each discount, and the discounts can't be combined.</span></span> <span data-ttu-id="05f12-124">Slevy v tomto příkladu jsou slevy za **nejlepší cenu**.</span><span class="sxs-lookup"><span data-stu-id="05f12-124">The discounts in this example are **Best price** discounts.</span></span> <span data-ttu-id="05f12-125">Oba produkty jsou způsobilé pro obě slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-125">Both products qualify for both discounts.</span></span> <span data-ttu-id="05f12-126">Zde jsou dvě slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-126">Here are the two discounts.</span></span>

![Příklad dvou nejlepších cenových slev](./media/overlapping-discount-combo-01.jpg)

<span data-ttu-id="05f12-128">Pro libovolné dva výrobky lepší z obou slev závisí na cenách těchto dvou výrobků.</span><span class="sxs-lookup"><span data-stu-id="05f12-128">For any two products, the better of these two discounts depends on the prices of the two products.</span></span> <span data-ttu-id="05f12-129">Pokud je cena obou produktů stejná nebo téměř stejná, sleva 1 je lepší.</span><span class="sxs-lookup"><span data-stu-id="05f12-129">When the price of both products is equal or almost equal, discount 1 is better.</span></span> <span data-ttu-id="05f12-130">Pokud je cena produktu významně nižší než ceny ostatních produktů, je lepší sleva 2.</span><span class="sxs-lookup"><span data-stu-id="05f12-130">When the price of one product is significantly less than the price of the other product, discount 2 is better.</span></span> <span data-ttu-id="05f12-131">V tomto poli je matematické pravidlo pro vyhodnocení těchto dvou slev proti sobě.</span><span class="sxs-lookup"><span data-stu-id="05f12-131">Here is the mathematical rule for evaluating these two discounts against each other.</span></span>

![Pravidlo pro vyhodnocení slev](./media/overlapping-discount-combo-02.jpg)

> [!NOTE]
> <span data-ttu-id="05f12-133">Když se cena produktu 1 rovná dvěma třetinám ceny produktu 2, slevy se rovnají.</span><span class="sxs-lookup"><span data-stu-id="05f12-133">When the price of product 1 is equal to two-thirds of the price of product 2, the two discounts are equal.</span></span> <span data-ttu-id="05f12-134">V tomto příkladu se procento účinnosti slevy 1 liší o několik procent (jsou-li ceny těchto dvou výrobků daleko od sebe) na maximálně 25procent (pokud dva produkty mají stejnou cenu).</span><span class="sxs-lookup"><span data-stu-id="05f12-134">In this example, the effective discount percentage for discount 1 varies from a few percent (when the prices of the two products are far apart) to a maximum of 25 percent (when the two products have the same price).</span></span> <span data-ttu-id="05f12-135">Procento účinnosti slevy 2 je pevné.</span><span class="sxs-lookup"><span data-stu-id="05f12-135">The effective discount percentage for discount 2 is fixed.</span></span> <span data-ttu-id="05f12-136">Jedná se vždy o 20 procent.</span><span class="sxs-lookup"><span data-stu-id="05f12-136">It's always 20 percent.</span></span> <span data-ttu-id="05f12-137">Protože procento účinnosti slevy 1 má rozsah, který může být větší než nebo menší než sleva 2, nejlepší sleva závisí na ceně těchto dvou výrobků, které musí být odečtena.</span><span class="sxs-lookup"><span data-stu-id="05f12-137">Because the effective discount percentage for discount 1 has a range that can be more than or less than discount 2, the best discount depends on the prices of the two products that must be discounted.</span></span> <span data-ttu-id="05f12-138">V tomto příkladu je výpočet dokončen rychleji, protože jsou použity pouze dvě slevy na pouze dva výrobky.</span><span class="sxs-lookup"><span data-stu-id="05f12-138">In this example, the calculation is completed quickly, because only two discounts are applied on only two products.</span></span> <span data-ttu-id="05f12-139">Existují pouze dvě možné kombinace: jedna aplikace slevy 1 nebo jedna aplikace slevy 2.</span><span class="sxs-lookup"><span data-stu-id="05f12-139">There are only two possible combinations: one application of discount 1 or one application of discount 2.</span></span> <span data-ttu-id="05f12-140">Není k dispozici pořadí pro výpočet.</span><span class="sxs-lookup"><span data-stu-id="05f12-140">There are no permutations to calculate.</span></span> <span data-ttu-id="05f12-141">Hodnota každé slevy se vypočítá pomocí obou produktů a použije se nejlepší sleva.</span><span class="sxs-lookup"><span data-stu-id="05f12-141">The value of each discount is calculated by using both products, and the best discount is used.</span></span>

### <a name="example-2-four-products-and-two-discounts"></a><span data-ttu-id="05f12-142">Příklad 2: Čtyři produkty a dvě slevy</span><span class="sxs-lookup"><span data-stu-id="05f12-142">Example 2: Four products and two discounts</span></span>

<span data-ttu-id="05f12-143">Dále použijeme čtyři produkty a stejné dvě slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-143">Next, we will use four products and the same two discounts.</span></span> <span data-ttu-id="05f12-144">Všechny čtyři produkty jsou způsobilé pro obě slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-144">All four products qualify for both discounts.</span></span> <span data-ttu-id="05f12-145">Existuje dvanáct možných kombinací.</span><span class="sxs-lookup"><span data-stu-id="05f12-145">There are twelve possible combinations.</span></span> <span data-ttu-id="05f12-146">Nakonec budou použity dvě slevy pro transakci v jedné ze tří kombinací: dvě uplatnění slevy 1, dvě uplatnění slevy 2 nebo jeden uplatnění slevy 1 a jedno uplatnění slevy 2.</span><span class="sxs-lookup"><span data-stu-id="05f12-146">In the end, two discounts will be applied to the transaction in one of three combinations: two applications of discount 1, two applications of discount 2, or one application of discount 1 and one application of discount 2.</span></span> <span data-ttu-id="05f12-147">Pro ilustraci možných kombinací se podíváme na dvě sady čtyř produktů, které mají různé ceny:</span><span class="sxs-lookup"><span data-stu-id="05f12-147">To illustrate the possible combinations, we will look at two different sets of four products that have different prices:</span></span>

- <span data-ttu-id="05f12-148">Všechny čtyři produkty mají stejnou cenu 15,00 USD.</span><span class="sxs-lookup"><span data-stu-id="05f12-148">All four products have the same price, $15.00.</span></span> <span data-ttu-id="05f12-149">V tomto případě je optimální kombinace slev dvě uplatnění slevy 1.</span><span class="sxs-lookup"><span data-stu-id="05f12-149">In this case, the best discount combination is two applications of discount 1.</span></span> <span data-ttu-id="05f12-150">Dva produkty budou mít plnou cenu a dva 50procentní slevu.</span><span class="sxs-lookup"><span data-stu-id="05f12-150">Two products will be full price, and two will be 50 percent off.</span></span> <span data-ttu-id="05f12-151">Celková částka se slevou pro transakci je $45 (15 + 15 + 7.50 + 7,50), což je sleva $15 (25 procent) z nezlevněného celku$60.</span><span class="sxs-lookup"><span data-stu-id="05f12-151">The discounted total for the transaction is $45 (15 + 15 + 7.50 + 7.50), which is $15 (25 percent) off the undiscounted total of $60.</span></span> <span data-ttu-id="05f12-152">Sleva 2 je pouze $12 (20 %).</span><span class="sxs-lookup"><span data-stu-id="05f12-152">Discount 2 is only $12 (20 percent).</span></span>
- <span data-ttu-id="05f12-153">Dva výrobky každý stojí $20, jeden $15 a jeden $5.</span><span class="sxs-lookup"><span data-stu-id="05f12-153">Two products are $20 each, one product is $15, and one product is $5.</span></span> <span data-ttu-id="05f12-154">V tomto případě je optimální kombinace slev jedno uplatnění slevy 2 a jedno uplatnění slevy 1.</span><span class="sxs-lookup"><span data-stu-id="05f12-154">In this case, the best discount combination is one application of discount 2 and one application of discount 1.</span></span> <span data-ttu-id="05f12-155">Následující tabulka ukazuje slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-155">The following tables illustrates the discounts.</span></span>

<span data-ttu-id="05f12-156">Pokud chcete tabulky číst, použijte jeden produkt z řádku a jeden produkt ze sloupce.</span><span class="sxs-lookup"><span data-stu-id="05f12-156">To read the tables, use one product from a row and one product from a column.</span></span> <span data-ttu-id="05f12-157">Například v tabulce pro slevu 1, pokud zkombinujete dva výrobky za $20, získáte $10.</span><span class="sxs-lookup"><span data-stu-id="05f12-157">For example, in the table for discount 1, when you combine the two $20 products, you get $10 off.</span></span> <span data-ttu-id="05f12-158">V tabulce pro slevu 2, pokud zkombinujete dva výrobky za $15 a jeden za $5, získáte slevu $4.</span><span class="sxs-lookup"><span data-stu-id="05f12-158">In the table for discount 2, when you combine the $15 product and the $5 product, you get $4 off.</span></span>

![Příklad, který používá čtyři produkty pro stejné dvě slevy](./media/overlapping-discount-combo-03.jpg)

<span data-ttu-id="05f12-160">Nejprve najdeme největší slevu dostupnou z libovolných dvou produktů pomocí některé ze slev.</span><span class="sxs-lookup"><span data-stu-id="05f12-160">First, we find the largest discount that is available from any two products by using either discount.</span></span> <span data-ttu-id="05f12-161">Dvě tabulky zobrazují částku slevy pro všechny kombinace těchto dvou výrobků.</span><span class="sxs-lookup"><span data-stu-id="05f12-161">The two tables show the discount amount for all combinations of the two products.</span></span> <span data-ttu-id="05f12-162">Vystínované části tabulky představují buď případy, kde je produkt spárovaný se sebou sama, což nemůžeme udělat, nebo reverzní párování dvou výrobků, které vytváří stejnou částku slevy, která může být ignorována.</span><span class="sxs-lookup"><span data-stu-id="05f12-162">The shaded portions of the tables represent either cases where a product is paired with itself, which we can't do, or a reverse pairing of two products that produces the same discount amount and can be ignored.</span></span> <span data-ttu-id="05f12-163">Pohledem na tabulky uvidíte, že sleva 1 pro dvě položky po 20 USD je největší sleva, která je k dispozici pro jakoukoli slevu na všechny čtyři výrobky.</span><span class="sxs-lookup"><span data-stu-id="05f12-163">By looking at the tables, you can see that discount 1 for the two $20 items is the largest discount that is available for either discount on all four products.</span></span> <span data-ttu-id="05f12-164">(Tato sleva je zvýrazněna zeleně v první tabulce). To znamená pouze produkt za $15 a za $5.</span><span class="sxs-lookup"><span data-stu-id="05f12-164">(This discount is highlighted in green in the first table.) That leaves only the $15 product and the $5 product.</span></span> <span data-ttu-id="05f12-165">Dalším pohledem na dvě tabulky uvidíte, že u těchto dvou produktů znamená sleva 1 $2,50, zatímco sleva 2 $4.</span><span class="sxs-lookup"><span data-stu-id="05f12-165">By looking at the two tables again, you can see that, for these two products, discount 1 gives a $2.50 discount, whereas discount 2 gives a $4 discount.</span></span> <span data-ttu-id="05f12-166">Proto vybereme slevu 2.</span><span class="sxs-lookup"><span data-stu-id="05f12-166">Therefore, we select discount 2.</span></span> <span data-ttu-id="05f12-167">Celková sleva činí $14.</span><span class="sxs-lookup"><span data-stu-id="05f12-167">The total discount is $14.</span></span> <span data-ttu-id="05f12-168">Abychom tuto diskusi snadno vizualizovali, této diskusi, zde jsou dva další tabulky zobrazující efektivní procento slevy pro všechny možné kombinace dvou produktů se slevou 1 i 2.</span><span class="sxs-lookup"><span data-stu-id="05f12-168">To make this discussion easier to visualize, here are two additional tables that show the effective discount percentage for all possible two-product combinations for both discount 1 and discount 2.</span></span> <span data-ttu-id="05f12-169">Je zahrnuta pouze polovina seznamu kombinací, protože pro tyto dvě slevy není důležité pořadí, ve kterém jsou dva výrobky zlevněny.</span><span class="sxs-lookup"><span data-stu-id="05f12-169">Only half the list of combinations is included, because, for these two discounts, the order in which the two products are put into the discount doesn't matter.</span></span> <span data-ttu-id="05f12-170">Nejvyšší efektivní sleva (25 procent) je zvýrazněna zeleně a nejnižší efektivní sleva (10 procent) červeně.</span><span class="sxs-lookup"><span data-stu-id="05f12-170">The highest effective discount (25 percent) is highlighted in green, and the lowest effective discount (10 percent) is highlighted in red.</span></span>

![Efektivní procento slevy pro všechny kombinace dvou produktů pro obě slevy](./media/overlapping-discount-combo-04.jpg)

> [!NOTE]
> <span data-ttu-id="05f12-172">Když se ceny liší a dvě nebo více slev soupeří, je jediný způsob, jak zaručit optimální kombinaci slev k vyhodnocení obou slev, jejich porovnání.</span><span class="sxs-lookup"><span data-stu-id="05f12-172">When prices vary, and two or more discount compete, the only way to guarantee the best combination of discounts is to evaluate both discounts and compare them.</span></span>

## <a name="total-possible-combinations"></a><span data-ttu-id="05f12-173">Celkem možných kombinací</span><span class="sxs-lookup"><span data-stu-id="05f12-173">Total possible combinations</span></span>

<span data-ttu-id="05f12-174">Tato část pokračuje v příkladu z předchozího oddílu.</span><span class="sxs-lookup"><span data-stu-id="05f12-174">This section continues the example from the previous section.</span></span> <span data-ttu-id="05f12-175">Můžeme přidat další výrobky a jinou slevu a podívat se, kolik kombinací musí být vypočteno a porovnáno.</span><span class="sxs-lookup"><span data-stu-id="05f12-175">We will add more products and another discount, and see how many combinations must be calculated and compared.</span></span> <span data-ttu-id="05f12-176">Následující tabulka zobrazuje počet možných kombinací slev s tím, jak se zvyšuje množství produktu.</span><span class="sxs-lookup"><span data-stu-id="05f12-176">The following table shows the number of possible discount combinations as the product quantity increases.</span></span> <span data-ttu-id="05f12-177">Tabulka uvádí, co se stane, když existují dvě překrývající se slevy jako v předchozím příkladu, a když existují tři překrývající se slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-177">The table shows what happens both when there are two overlapping discounts, as in the previous example, and when there are three overlapping discounts.</span></span> <span data-ttu-id="05f12-178">Počet možných kombinací slev, které musí být vyhodnoceny, brzy překročí to, co nedokáže ani nejrychlejší počítač vypočítat porovnávat dostatečně rychle jako přijatelné pro maloobchodní transakce.</span><span class="sxs-lookup"><span data-stu-id="05f12-178">The number of possible discount combinations that must be evaluated soon exceeds what even a fast computer can calculate and compare quickly enough to be acceptable for retail transactions.</span></span>

![Počet možných kombinací slev s tím, jak se zvyšuje množství produktu](./media/overlapping-discount-combo-05.jpg)

<span data-ttu-id="05f12-180">Když jsou použita ještě větší množství nebo více překrývajících se slev, celkový počet možných kombinací slev rychle přejde do milionů a čas, který je nutný pro zhodnocení a výběru nejlepší možné kombinace se rychle.</span><span class="sxs-lookup"><span data-stu-id="05f12-180">When even larger quantities or more overlapping discounts are applied, the total number of possible discount combinations quickly goes into the millions, and the time that is required in order to evaluate and select the best possible combination quickly becomes noticeable.</span></span> <span data-ttu-id="05f12-181">V modulu ceny byly provedeny určité optimalizace na snížení celkového počtu kombinací, které musí být vyhodnoceny.</span><span class="sxs-lookup"><span data-stu-id="05f12-181">Some optimizations have been done in the price engine to reduce the total number of combinations that must be evaluated.</span></span> <span data-ttu-id="05f12-182">Protože ale počet překrývajících se slev a množství v transakci nejsou omezeny, bude vždy potřeba vyhodnotit velký počet kombinací tam, kde existují překrývající se slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-182">However, because the number overlapping discounts and the quantities in a transaction aren't limited, a large number of combinations will always have to be evaluated whenever there are overlapping discounts.</span></span> <span data-ttu-id="05f12-183">Tento problém je problém, který řeší metoda mezního hodnocení.</span><span class="sxs-lookup"><span data-stu-id="05f12-183">This issue is the issue that the marginal value ranking method addresses.</span></span>

## <a name="marginal-value-method"></a><span data-ttu-id="05f12-184">Metoda mezní hodnoty</span><span class="sxs-lookup"><span data-stu-id="05f12-184">Marginal value method</span></span>

<span data-ttu-id="05f12-185">Chcete-li vyřešit problém exponenciálně rostoucího počtu kombinací, které musí být vyhodnoceny, existuje optimalizace, která vypočítá hodnotu pro každý sdílený produkt každé slevy v sadě produktů, u nichž lze použít dvě nebo více slev.</span><span class="sxs-lookup"><span data-stu-id="05f12-185">To resolve the issue of an exponentially increasing number of combinations that must be evaluated, an optimization exists that calculates the value per shared product of each discount on the set of products that two or more discounts can be applied to.</span></span> <span data-ttu-id="05f12-186">Odkazujeme na tuto hodnotu jako na **Mezní hodnotu** slevy pro sdílené produkty.</span><span class="sxs-lookup"><span data-stu-id="05f12-186">We refer to this value as the **marginal value** of the discount for the shared products.</span></span> <span data-ttu-id="05f12-187">Mezní hodnota je průměr za zvýšení produktu v celkové částce slevy při zahrnutí sdílených produktů do každé slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-187">The marginal value is the average per product increase in the total discount amount when the shared products are included in each discount.</span></span> <span data-ttu-id="05f12-188">Mezní hodnota se vypočte převzetím celkové částky slevy (DTotal) odečtením částky slevy bez sdílených produktů s využitím (DMinus\\ Shared) a tento rozdíl se vydělí počet sdílených produktů (ProductsShared).</span><span class="sxs-lookup"><span data-stu-id="05f12-188">The marginal value is calculated by taking the total discount amount (DTotal), subtracting the discount amount without the shared products (DMinus\\ Shared), and dividing that difference by the number of shared products (ProductsShared).</span></span>

![Vzorec pro výpočet mezní hodnoty](./media/overlapping-discount-combo-06.jpg)

<span data-ttu-id="05f12-190">Po odečtení mezní hodnoty každé slevy ve sdílené sadě produktů se vypočte mezní hodnota, uplatní slevy na sdílené výrobky v pořadí, vyčerpávajícím způsobem, od nejvyšší mezní hodnoty k nejnižší mezní hodnotě.</span><span class="sxs-lookup"><span data-stu-id="05f12-190">After the marginal value of each discount on a shared set of products is calculated, the discounts are applied to the shared products in order, exhaustively, from highest marginal value to lowest marginal value.</span></span> <span data-ttu-id="05f12-191">Pro tuto metodu nejsou porovnány všechny zbývající možnosti slev pokaždé, když je uplatněna jedna instance slevy.</span><span class="sxs-lookup"><span data-stu-id="05f12-191">For this method, all remaining discount possibilities aren't compared every time after a single instance of a discount is applied.</span></span> <span data-ttu-id="05f12-192">Místo toho jsou překrývající se slevy porovnány jednou a poté použity v pořadí.</span><span class="sxs-lookup"><span data-stu-id="05f12-192">Instead, the overlapping discounts are compared one time and then applied in order.</span></span> <span data-ttu-id="05f12-193">Nejsou prováděny žádné další porovnání.</span><span class="sxs-lookup"><span data-stu-id="05f12-193">No additional comparisons are done.</span></span> <span data-ttu-id="05f12-194">Můžete nakonfigurovat prahové hodnoty pro přepnutí na metodu mezní hodnoty na kartě **Sleva** stránky **Parametry velkoobchodu**.</span><span class="sxs-lookup"><span data-stu-id="05f12-194">You can configure the threshold to switch to the marginal value method on the **Discount** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="05f12-195">Přijatelná doba při výpočtu celkové slevy se v rámci odvětví maloobchodu liší.</span><span class="sxs-lookup"><span data-stu-id="05f12-195">The acceptable time to calculate the total discount varies across retail industries.</span></span> <span data-ttu-id="05f12-196">Tentokrát však obecně spadá do rozsahu desítky milisekund na jednu sekundu.</span><span class="sxs-lookup"><span data-stu-id="05f12-196">However, this time generally falls in the range of tens of milliseconds to one second.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]