---
title: Úloha vyčištění položek zásob na skladě v řízení skladu
description: Toto téma popisuje úlohu vyčištění položek, která pomáhá zlepšit výkon systému identifikací a odstraněním souvisejících, ale nepotřebných záznamů.
author: perlynne
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 4dd3bb9dc580e715b6945da1f94cf27e601c549e
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/01/2021
ms.locfileid: "5808719"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="4f13e-103">Úloha vyčištění položek zásob na skladě v řízení skladu</span><span class="sxs-lookup"><span data-stu-id="4f13e-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="4f13e-104">Výkon dotazů, které se používají k výpočtu zásob na skladě, je ovlivněn počtem záznamů v příslušných tabulkách.</span><span class="sxs-lookup"><span data-stu-id="4f13e-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="4f13e-105">Jedním ze způsobů, jak zlepšit výkon, je snížení počtu záznamů, které musí databáze zvážit.</span><span class="sxs-lookup"><span data-stu-id="4f13e-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="4f13e-106">Toto téma popisuje úlohu vyčištění položek, která odstraní nepotřebné záznamy v tabulkách InventSum a WHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="4f13e-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="4f13e-107">Tyto tabulky ukládají informace o množství na skladě pro položky, které jsou povoleny pro zpracování správy skladu.</span><span class="sxs-lookup"><span data-stu-id="4f13e-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="4f13e-108">(Tyto položky se označují jako položky WHS.) Vymazání těchto záznamů může výrazně zlepšit výkon výpočtů na skladě.</span><span class="sxs-lookup"><span data-stu-id="4f13e-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="4f13e-109">Co dělá úklidová práce</span><span class="sxs-lookup"><span data-stu-id="4f13e-109">What the cleanup job does</span></span>

<span data-ttu-id="4f13e-110">Úloha na vyčištění položek odstraní všechny záznamy v tabulkách WHSInventReserve a InventSum, kde jsou všechny hodnoty pole *0* (nula).</span><span class="sxs-lookup"><span data-stu-id="4f13e-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="4f13e-111">Tyto záznamy mohou být odstraněny, protože nepřispívají k informacím na skladě.</span><span class="sxs-lookup"><span data-stu-id="4f13e-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="4f13e-112">Úloha odstraní pouze záznamy, které jsou pod úrovní **Umístění**.</span><span class="sxs-lookup"><span data-stu-id="4f13e-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="4f13e-113">Je-li povolen negativní fyzický stav zásob, nemusí být úloha čištění schopna odstranit všechny relevantní položky.</span><span class="sxs-lookup"><span data-stu-id="4f13e-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="4f13e-114">Důvodem tohoto omezení je, že úloha musí umožňovat zvláštní scénář, kde registrační značka má více sériových čísel a jedno z těchto sériových čísel je negativní.</span><span class="sxs-lookup"><span data-stu-id="4f13e-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="4f13e-115">Například systém bude mít po ruce na úrovni registrační značky nulovou hodnotu, pokud bude mít registrační značk +1 ks sériového čísla 1 a –1 ks sériového čísla 2.</span><span class="sxs-lookup"><span data-stu-id="4f13e-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="4f13e-116">U tohoto zvláštního scénáře úloha provede první odstranění, kde se nejprve pokusí odstranit z nižších úrovní.</span><span class="sxs-lookup"><span data-stu-id="4f13e-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="4f13e-117">Naplánujte a nakonfigurujte úlohu čištění</span><span class="sxs-lookup"><span data-stu-id="4f13e-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="4f13e-118">Úloha pro vyčištění položek na skladě je k dispozici na **Řízení zásob \> Periodické úkoly \> Čištění \> Vyčištění záznamů na skladě pro správu skladů**.</span><span class="sxs-lookup"><span data-stu-id="4f13e-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="4f13e-119">Pomocí standardního nastavení úlohy můžete ovládat rozsah a plán spuštění úlohy.</span><span class="sxs-lookup"><span data-stu-id="4f13e-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="4f13e-120">Kromě toho jsou k dispozici následující nastavení:</span><span class="sxs-lookup"><span data-stu-id="4f13e-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="4f13e-121">**Vymazat, pokud nebylo aktualizováno po tento počet dní** - Zadejte minimální počet dní, po které by úloha měla počkat, než odstraní záznam na skladě, který klesl na nulové množství.</span><span class="sxs-lookup"><span data-stu-id="4f13e-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="4f13e-122">Toto nastavení použijte, abyste snížili riziko odstranění dosud používaných položek.</span><span class="sxs-lookup"><span data-stu-id="4f13e-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="4f13e-123">Pokud chcete provést čištění co nejdříve, zadejte buď *0* (nula) nebo nechte pole prázdné.</span><span class="sxs-lookup"><span data-stu-id="4f13e-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="4f13e-124">**Maximální doba provedení (hodiny)** - Zadejte maximální dobu provedení úlohy čištění v hodinách.</span><span class="sxs-lookup"><span data-stu-id="4f13e-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="4f13e-125">Pokud úloha není dokončena před uplynutím této doby, uloží práci, kterou doposud dokončila, a poté se uzavře.</span><span class="sxs-lookup"><span data-stu-id="4f13e-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="4f13e-126">Tato schopnost je zvláště důležitá pro implementace, které mají vysoké využití zásob.</span><span class="sxs-lookup"><span data-stu-id="4f13e-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="4f13e-127">V těchto případech byste měli naplánovat spuštění úlohy v době, kdy je zatížení systému co nejlehčí.</span><span class="sxs-lookup"><span data-stu-id="4f13e-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="4f13e-128">Pokud chcete, aby dávková úloha pokračovala, dokud nebude dokončena, zadejte buď *0* (nula), nebo nechte pole prázdné.</span><span class="sxs-lookup"><span data-stu-id="4f13e-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="4f13e-129">Toto nastavení je k dispozici, pouze pokud byla související funkce [zapnuta ve vašem systému](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="4f13e-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="4f13e-130">I když můžete úlohu spustit v běžné pracovní době, doporučujeme ji spustit mimo pracovní dobu.</span><span class="sxs-lookup"><span data-stu-id="4f13e-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="4f13e-131">Tímto způsobem pomáháte předcházet konfliktům, které mohou nastat, pokud uživatel pracuje se záznamem, který se právě čistí.</span><span class="sxs-lookup"><span data-stu-id="4f13e-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="4f13e-132">Pokud se úloha pokusí odstranit záznam pro položku, zatímco je tento záznam používán jiným uživatelem, dojde k chybě zablokování u úlohy vyčištění nebo uživatele.</span><span class="sxs-lookup"><span data-stu-id="4f13e-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="4f13e-133">Při spuštění úlohy má velikost potvrzení 100.</span><span class="sxs-lookup"><span data-stu-id="4f13e-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="4f13e-134">Jinými slovy, bude se snažit potvrdit jednou za každých 100 vymazání.</span><span class="sxs-lookup"><span data-stu-id="4f13e-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="4f13e-135">Protože jsou však některé výměny založeny na sadě, mohou existovat scénáře, ve kterých lze ve stejné transakci odstranit více než 100 záznamů.</span><span class="sxs-lookup"><span data-stu-id="4f13e-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="4f13e-136">Proto může někdy dojít k eskalaci blokování.</span><span class="sxs-lookup"><span data-stu-id="4f13e-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="4f13e-137">Možný dopad na uživatele</span><span class="sxs-lookup"><span data-stu-id="4f13e-137">Possible user impact</span></span>

<span data-ttu-id="4f13e-138">Uživatelé mohou být ovlivněni, pokud úloha pro vyčištění položek odstraní všechny záznamy pro danou úroveň (například úroveň registrační značky).</span><span class="sxs-lookup"><span data-stu-id="4f13e-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="4f13e-139">V tomto případě nemusí být funkce pro zjištění, zda byly zásoby dříve k dispozici na registrační značce, podle očekávání funkční, protože příslušné položky na skladě již nejsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="4f13e-139">In this case, the functionality for seeing that inventory was previously available on-hand at a license plate might not work as expected because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="4f13e-140">To lze například zažít v následujících situacích:</span><span class="sxs-lookup"><span data-stu-id="4f13e-140">This can, for example, be experienced in the following situations:</span></span>

- <span data-ttu-id="4f13e-141">V **seznamu na skladě**, když uživatel zruší výběr podmínky **Množství \<\> 0** nebo vybere podmínku **Uzavřené transakce** v nastavení **Zobrazení dimenze**.</span><span class="sxs-lookup"><span data-stu-id="4f13e-141">On the **On-hand list**, when the user deselects the condition **Quantity \<\> 0** or selects the condition **Closed transactions** in the **Dimensions display** settings.</span></span>
- <span data-ttu-id="4f13e-142">V sestavě **Dimenze fyzických zásob podle dimenze zásob** pro minulá období, když uživatel nastaví parametr **K datu**.</span><span class="sxs-lookup"><span data-stu-id="4f13e-142">In a **Physical inventory by inventory dimension** report for past periods, when the user sets the **As of date** parameter.</span></span>

<span data-ttu-id="4f13e-143">Zlepšení výkonu, které poskytuje úloha vyčištění, by však mělo tyto malé ztráty funkčnosti vyrovnat.</span><span class="sxs-lookup"><span data-stu-id="4f13e-143">However, the performance improvement that the cleanup job provides should make up for these small losses in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="4f13e-144">Zpřístupněte nastavení Maximální doba provedení</span><span class="sxs-lookup"><span data-stu-id="4f13e-144">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="4f13e-145">Ve výchozím nastavení není nastavení **Maximální doba provedení** dostupné.</span><span class="sxs-lookup"><span data-stu-id="4f13e-145">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="4f13e-146">Pokud ji chcete použít, musíte použít [správu funkcí](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) pro zapnutí související funkce ve vašem systému.</span><span class="sxs-lookup"><span data-stu-id="4f13e-146">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="4f13e-147">V pracovním prostoru **Správa funkcí** je tato funkce uvedena následovně:</span><span class="sxs-lookup"><span data-stu-id="4f13e-147">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="4f13e-148">**Modul:** *Řízení skladu*</span><span class="sxs-lookup"><span data-stu-id="4f13e-148">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="4f13e-149">**Název funkce:** *Maximální doba provedení pro úlohu čištění položek na skladě v rámci správy skladu*</span><span class="sxs-lookup"><span data-stu-id="4f13e-149">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]