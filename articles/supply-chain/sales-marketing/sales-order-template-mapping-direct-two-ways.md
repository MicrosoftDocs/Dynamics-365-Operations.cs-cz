---
title: "Synchronizace prodejních objednávek přímo mezi aplikacemi Sales a Finance and Operations"
description: "Toto téma popisuje šablony a základní úlohy, které se používají ke spuštění synchronizace prodejních objednávek přímo mezi aplikacemi Microsoft Dynamics 365 for Sales a Microsoft Dynamics 365 for Finance and Operations."
author: ChristianRytt
manager: AnnBe
ms.date: 03/13/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: 
audience: Application User, IT Pro
ms.reviewer: yuyus
ms.search.scope: Core, Operations
ms.custom: 
ms.assetid: 
ms.search.region: global
ms.search.industry: 
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.translationtype: HT
ms.sourcegitcommit: a0739304723d19b910388893d08e8c36a1f49d13
ms.openlocfilehash: e26244ffc380291a40edfbd2c2cb5911b0d8b3cb
ms.contentlocale: cs-cz
ms.lasthandoff: 03/26/2018

---

# <a name="synchronization-of-sales-orders-directly-between-sales-and-finance-and-operations"></a><span data-ttu-id="f96d9-103">Synchronizace prodejních objednávek přímo mezi aplikacemi Sales a Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="f96d9-103">Synchronization of sales orders directly between Sales and Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="f96d9-104">Toto téma popisuje šablony a základní úlohy, které se používají ke spuštění synchronizace prodejních objednávek přímo mezi aplikacemi Microsoft Dynamics 365 for Sales a Microsoft Dynamics 365 for Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Microsoft Dynamics 365 for Sales and Microsoft Dynamics 365 for Finance and Operations.</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="f96d9-105">Šablony a úkoly</span><span class="sxs-lookup"><span data-stu-id="f96d9-105">Templates and tasks</span></span>

<span data-ttu-id="f96d9-106">Chcete-li získat přístup k dostupným šablonám, otevřete [Centrum pro správu PowerApps](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="f96d9-106">To access the available templates, open [PowerApps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="f96d9-107">Vyberte **Projekty**a v pravém horním rohu vyberte **Nový projekt**, abyste zvolili veřejné šablony.</span><span class="sxs-lookup"><span data-stu-id="f96d9-107">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="f96d9-108">Ke spuštění synchronizace prodejních objednávek přímo mezi aplikacemi Sales a Finance and Operations slouží následující šablony a základní úkoly:</span><span class="sxs-lookup"><span data-stu-id="f96d9-108">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Finance and Operations:</span></span>

- <span data-ttu-id="f96d9-109">**Názvy šablon v integraci dat:**</span><span class="sxs-lookup"><span data-stu-id="f96d9-109">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="f96d9-110">Prodejní objednávky (Sales do Fin and Ops) - přímo</span><span class="sxs-lookup"><span data-stu-id="f96d9-110">Sales Orders (Sales to Fin and Ops) - Direct</span></span>
    - <span data-ttu-id="f96d9-111">Prodejní objednávky (Fin and Ops do Sales) - přímo</span><span class="sxs-lookup"><span data-stu-id="f96d9-111">Sales Orders (Fin and Ops to Sales) - Direct</span></span>

- <span data-ttu-id="f96d9-112">**Názvy úkolů v projektu integrace dat:**</span><span class="sxs-lookup"><span data-stu-id="f96d9-112">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="f96d9-113">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="f96d9-113">OrderHeader</span></span>
    - <span data-ttu-id="f96d9-114">OrderLine</span><span class="sxs-lookup"><span data-stu-id="f96d9-114">OrderLine</span></span>

<span data-ttu-id="f96d9-115">Následující úlohy synchronizace jsou vyžadovány před synchronizací záhlaví prodejní faktury a mohou se objevit řádky:</span><span class="sxs-lookup"><span data-stu-id="f96d9-115">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="f96d9-116">Produkty (Fin and Ops do Sales) - přímo</span><span class="sxs-lookup"><span data-stu-id="f96d9-116">Products (Fin and Ops to Sales) - Direct</span></span>
- <span data-ttu-id="f96d9-117">Účty (Sales do Fin and Ops) - přímo (pokud se používají)</span><span class="sxs-lookup"><span data-stu-id="f96d9-117">Accounts (Sales to Fin and Ops) - Direct (if used)</span></span>
- <span data-ttu-id="f96d9-118">Kontakty na zákazníky (Sales do Fin and Ops) - přímo (pokud se používají)</span><span class="sxs-lookup"><span data-stu-id="f96d9-118">Contacts to Customers (Sales to Fin and Ops) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="f96d9-119">Sada entit</span><span class="sxs-lookup"><span data-stu-id="f96d9-119">Entity set</span></span>

| <span data-ttu-id="f96d9-120">Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="f96d9-120">Finance and Operations</span></span>  | <span data-ttu-id="f96d9-121">Prodej.</span><span class="sxs-lookup"><span data-stu-id="f96d9-121">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="f96d9-122">Záhlaví prodejní objednávky CDS</span><span class="sxs-lookup"><span data-stu-id="f96d9-122">CDS sales order headers</span></span> | <span data-ttu-id="f96d9-123">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="f96d9-123">SalesOrders</span></span>       |
| <span data-ttu-id="f96d9-124">Řádky prodejní objednávky CDS</span><span class="sxs-lookup"><span data-stu-id="f96d9-124">CDS sales order lines</span></span>   | <span data-ttu-id="f96d9-125">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="f96d9-125">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="f96d9-126">Tok entity</span><span class="sxs-lookup"><span data-stu-id="f96d9-126">Entity flow</span></span>

<span data-ttu-id="f96d9-127">Prodejní objednávky jsou vytvořeny v aplikaci Sales a synchronizovány do aplikace Finance and Operations při aktivaci možnosti **Spustit projekt** pro projekt na základě šablony **Prodejní objednávky (Sales do Fin and Ops) - přímo**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-127">Sales orders are created in Sales and synchronized to Finance and Operations when **Run project** is triggered for a project based on the **Sales Orders (Sales to Fin and Ops) - Direct** template.</span></span> <span data-ttu-id="f96d9-128">Můžete aktivovat a synchronizovat pouze objednávky z aplikace Sales v případě, že všechny **Produkty objednávky** se skládají z produktů, které jsou udržovány externě.</span><span class="sxs-lookup"><span data-stu-id="f96d9-128">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="f96d9-129">Z tohoto důvodu může existovat žádný zápis produktů.</span><span class="sxs-lookup"><span data-stu-id="f96d9-129">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="f96d9-130">Po aktivaci objednávky bude prodejní objednávka v uživatelském rozhraní jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="f96d9-130">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="f96d9-131">V daném okamžiku se provedou aktualizace aplikace Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-131">At that point, the updates are made from Finance and Operations.</span></span> <span data-ttu-id="f96d9-132">Poté, co má prodejní objednávka stav **Potvrzeno**, projekt na základě šablony **Prodejní objednávky (Fin and Ops do Sales) - přímo** umožňuje synchronizovat aktualizace nebo stav plnění z aplikace Finance and Operations do Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-132">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Fin and Ops to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Finance and Operations to Sales.</span></span>

<span data-ttu-id="f96d9-133">Není nutné vytvoření objednávek v aplikaci Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-133">You don't have to create orders in Sales.</span></span> <span data-ttu-id="f96d9-134">Místo toho můžete vytvořit nové prodejní objednávky v aplikaci Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-134">You can create new sales orders in Finance and Operations instead.</span></span> <span data-ttu-id="f96d9-135">Poté, co má prodejní objednávka stav **Potvrzeno**, bude synchronizována do aplikace Sales, jak je popsáno ve výše uvedeném odstavci.</span><span class="sxs-lookup"><span data-stu-id="f96d9-135">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="f96d9-136">V aplikaci Finance and Operations pomáhají filtry v šabloně zajistit, aby byly v synchronizaci zahrnuty pouze příslušné prodejní objednávky:</span><span class="sxs-lookup"><span data-stu-id="f96d9-136">In Finance and operations, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="f96d9-137">Objednávající a fakturující odběratel na prodejní objednávce musí pocházet z aplikace Sales, aby byli zahrnuti do procesu synchronizace.</span><span class="sxs-lookup"><span data-stu-id="f96d9-137">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="f96d9-138">V aplikaci Finance and Operations se používají pole **OrderingCustomerIsExternallyMaintained** a **InvoiceCustomerIsExternallyMaintained** k filtrování prodejních objednávek z datových entit.</span><span class="sxs-lookup"><span data-stu-id="f96d9-138">In Finance and Operations, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="f96d9-139">Prodejní objednávka musí být v aplikaci Finance and Operations potvrzena.</span><span class="sxs-lookup"><span data-stu-id="f96d9-139">The sales order in Finance and Operations must be confirmed.</span></span> <span data-ttu-id="f96d9-140">Pouze potvrzené prodejní objednávky nebo prodejní objednávky s vyšším stavem zpracování, například stavem **Expedováno** nebo **Fakturováno**, budou synchronizovány do aplikace Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-140">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="f96d9-141">Po vytvoření nebo úpravě prodejní objednávky musí být provedena v aplikaci Finance and Operations dávková úloha **Vypočítat celkové tržby**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-141">After a sales order is created or modified, the **Calculate sales totals** batch job in Finance and Operations must be run.</span></span> <span data-ttu-id="f96d9-142">Pouze prodejní objednávky s vypočítanými celkovými tržbami budou synchronizovány do aplikace Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-142">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="f96d9-143">Daň z přepravy</span><span class="sxs-lookup"><span data-stu-id="f96d9-143">Freight tax</span></span>

<span data-ttu-id="f96d9-144">Aplikace Sales nepodporuje daň na úrovni záhlaví, protože daň je uložena na úrovni řádku.</span><span class="sxs-lookup"><span data-stu-id="f96d9-144">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="f96d9-145">K podpoře daně na úrovni záhlaví z aplikace Finance and Operations, jako je daň z přepravy, systém synchronizuje daň do aplikace Sales jako zápis produktu s názvem **Daň z přepravy** a který má částku daně z aplikace Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-145">To support tax at the header level from Finance and Operations, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Finance and Operations.</span></span> <span data-ttu-id="f96d9-146">Standardní kalkulace ceny v aplikaci Sales slouží pro součty, a to i v případě, kdy je daň na úrovní záhlaví z aplikace Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-146">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Finance and Operations.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="f96d9-147">Výpočet slevy a zaokrouhlení</span><span class="sxs-lookup"><span data-stu-id="f96d9-147">Discount calculation and rounding</span></span>

<span data-ttu-id="f96d9-148">Model výpočtu slevy v aplikaci Sales se liší od modelu výpočtu slevy v aplikaci Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-148">The discount calculation model in Sales differs from the discount calculation model in Finance and Operations.</span></span> <span data-ttu-id="f96d9-149">V aplikaci Finance and Operations konečná částka slevy na řádku prodeje může být výsledkem kombinace částky slevy a procent slevy.</span><span class="sxs-lookup"><span data-stu-id="f96d9-149">In Finance and Operations, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="f96d9-150">Pokud je tato celková částka slevy podělená množstvím na řádku, může dojít k zaokrouhlení.</span><span class="sxs-lookup"><span data-stu-id="f96d9-150">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="f96d9-151">Toto zaokrouhlení však není bráno v potaz, pokud je zaokrouhlená částka slevy na jednotku synchronizována do aplikace Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-151">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="f96d9-152">Chcete-li zaručit, že celková částka slevy z řádku prodeje v aplikaci Finance and Operations je správně synchronizována do aplikace Sales, musí být celá částka synchronizována, aniž by byla podělena množstvím řádku.</span><span class="sxs-lookup"><span data-stu-id="f96d9-152">To help guarantee that the full discount amount from a sales line in Finance and Operations is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="f96d9-153">Proto je nutné definovat v aplikaci Sales možnost **Metoda výpočtu slevy** jako **Položku řádku**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-153">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="f96d9-154">Při synchronizaci řádku prodejní objednávky z aplikace Sales do aplikace Finance and Operations se používá celková částka řádkové slevy.</span><span class="sxs-lookup"><span data-stu-id="f96d9-154">When a sales order line is synchronized from Sales to Finance and Operations, the full line discount amount is used.</span></span> <span data-ttu-id="f96d9-155">Protože aplikace Finance and Operations nemá žádné pole pro uložení celé částky slevy pro řádek, je částka podělená množstvím a uložená v poli **Řádková sleva**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-155">Because Finance and Operations has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="f96d9-156">Jakékoliv zaokrouhlování, ke kterému dojde při tomto dělení, je uloženo v poli **Prodejní náklady** na řádku prodeje.</span><span class="sxs-lookup"><span data-stu-id="f96d9-156">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="f96d9-157">Příklad</span><span class="sxs-lookup"><span data-stu-id="f96d9-157">Example</span></span>

<span data-ttu-id="f96d9-158">**Synchronizace z aplikace Sales do aplikace Finance and Operations**</span><span class="sxs-lookup"><span data-stu-id="f96d9-158">**Synchronization from Sales to Finance and Operations**</span></span>

- <span data-ttu-id="f96d9-159">**Prodej:** množství = 3, sleva na řádek = 10 USD</span><span class="sxs-lookup"><span data-stu-id="f96d9-159">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="f96d9-160">**Finance and Operations:** množství = 3, částka řádkové slevy = $3.33, prodejní náklady = -0.01 USD</span><span class="sxs-lookup"><span data-stu-id="f96d9-160">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="f96d9-161">**Synchronizace z aplikace Finance and Operations do aplikace Sales**</span><span class="sxs-lookup"><span data-stu-id="f96d9-161">**Synchronization from Finance and Operations to Sales**</span></span>

- <span data-ttu-id="f96d9-162">**Finance and Operations:** množství = 3, částka řádkové slevy = $3.33, prodejní náklady = -0.01 USD</span><span class="sxs-lookup"><span data-stu-id="f96d9-162">**Finance and Operations:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="f96d9-163">**Prodej:** množství = 3, sleva na řádek = (3 × 3,33 USD) + $0,01 USD = 10 USD</span><span class="sxs-lookup"><span data-stu-id="f96d9-163">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="f96d9-164">Řešení Potenciální zákazník pro hotovost v aplikaci Sales</span><span class="sxs-lookup"><span data-stu-id="f96d9-164">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="f96d9-165">Nová pole byla přidána do entity **Objednávka** a zobrazí na stránce:</span><span class="sxs-lookup"><span data-stu-id="f96d9-165">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="f96d9-166">**Je externě spravováno** - Nastavte tuto možnost na **Ano**, když pořadí pochází z aplikace Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-166">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Finance and Operations.</span></span>
- <span data-ttu-id="f96d9-167">**Stav zpracování** - Toto pole ukazuje stav zpracování objednávky v aplikaci Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-167">**Processing status** – This field shows the processing status of the order in Finance and Operations.</span></span> <span data-ttu-id="f96d9-168">K dispozici jsou následující hodnoty:</span><span class="sxs-lookup"><span data-stu-id="f96d9-168">The following values are available:</span></span>

    - <span data-ttu-id="f96d9-169">**Návrh** – Počáteční stav při vytvoření objednávky v aplikaci Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-169">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="f96d9-170">V aplikaci Sales lze upravit pouze objednávky s tímto stavem zpracování.</span><span class="sxs-lookup"><span data-stu-id="f96d9-170">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="f96d9-171">**Aktivní** – Stav po aktivaci objednávky v aplikaci Sales s použitím tlačítka **Aktivovat**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-171">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="f96d9-172">**Potvrzeno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-172">**Confirmed**</span></span>
    - <span data-ttu-id="f96d9-173">**Dodací list**</span><span class="sxs-lookup"><span data-stu-id="f96d9-173">**Packing Slip**</span></span>
    - <span data-ttu-id="f96d9-174">**Fakturováno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-174">**Invoiced**</span></span>
    - <span data-ttu-id="f96d9-175">**Vyskladněno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-175">**Picked**</span></span>
    - <span data-ttu-id="f96d9-176">**Částečně vyskladněno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-176">**Partially Picked**</span></span>
    - <span data-ttu-id="f96d9-177">**Částečně zabaleno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-177">**Partially Packed**</span></span>
    - <span data-ttu-id="f96d9-178">**Expedováno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-178">**Shipped**</span></span>
    - <span data-ttu-id="f96d9-179">**Částečně expedováno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-179">**Partially Shipped**</span></span>
    - <span data-ttu-id="f96d9-180">**Částečně fakturováno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-180">**Partially Invoiced**</span></span>
    - <span data-ttu-id="f96d9-181">**Zrušeno**</span><span class="sxs-lookup"><span data-stu-id="f96d9-181">**Cancelled**</span></span>

<span data-ttu-id="f96d9-182">Nastavení **Má pouze externě udržované produkty** se používá během aktivace objednávky ke konzistentnímu sledování, zda prodejní objednávka sestává zcela z externě spravovaných produktů.</span><span class="sxs-lookup"><span data-stu-id="f96d9-182">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="f96d9-183">Pokud prodejní objednávka sestává zcela z externě spravovaných produktů, produkty jsou evidovány v aplikaci Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-183">If a sales order consists entirely of externally maintained products, the products are maintained in Finance and Operations.</span></span> <span data-ttu-id="f96d9-184">Toto nastavení pomáhá zaručit, že neaktivujete a nepokusíte se synchronizovat řádky prodejní objednávky s produkty, které mají v aplikaci Finance and Operations neznámé produkty.</span><span class="sxs-lookup"><span data-stu-id="f96d9-184">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Finance and Operations.</span></span>

<span data-ttu-id="f96d9-185">Tlačítka **Vytvořit fakturu**, **Zrušit objednávku**, **Přepočítat**, **Získat produkty** a **Vyhledávání adresy** na stránce **Prodejní objednávka** jsou pro externě udržované objednávky skryta, protože faktury budou vytvořeny v aplikaci Finance and Operations a synchronizovány do aplikace Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-185">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Finance and Operations and synchronized to Sales.</span></span> <span data-ttu-id="f96d9-186">Tyto objednávky nelze upravovat, protože informace o prodejní objednávce budou synchronizovány po této aktivaci z aplikace Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-186">These orders can't be edited, because sales order information will be synchronized from Finance and Operations after activation.</span></span>

<span data-ttu-id="f96d9-187">Stav prodejní objednávky zůstane **Aktivní**, aby se zajistilo, že změny z aplikace Finance and Operations mohou být odeslány do prodejní objednávky v aplikaci Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-187">The sales order status will remain **Active** to help guarantee that changes from Finance and Operations can flow to the sales order in Sales.</span></span> <span data-ttu-id="f96d9-188">Chcete-li kontrolovat toto chování, nastavte hodnotu **Statecode \[Stav\]** na **Aktivní** v projektu integrace dat.</span><span class="sxs-lookup"><span data-stu-id="f96d9-188">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="f96d9-189">Nastavení mapování a předpokladů</span><span class="sxs-lookup"><span data-stu-id="f96d9-189">Preconditions and mapping setup</span></span>

<span data-ttu-id="f96d9-190">Před synchronizací prodejních objednávek je důležité aktualizovat následující nastavení v systémech:</span><span class="sxs-lookup"><span data-stu-id="f96d9-190">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="f96d9-191">Nastavení v aplikaci Sales</span><span class="sxs-lookup"><span data-stu-id="f96d9-191">Setup in Sales</span></span>

- <span data-ttu-id="f96d9-192">Zajistěte, že jsou nastavena oprávnění pro tým, ke kterému je uživatel ze sady připojení aplikace Sales přiřazen.</span><span class="sxs-lookup"><span data-stu-id="f96d9-192">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="f96d9-193">Používáte-li ukázková data, má obvykle uživatel přístup správce, ale tým ho nemá.</span><span class="sxs-lookup"><span data-stu-id="f96d9-193">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="f96d9-194">Pokud nemá tým přístup správce při spuštění projektu z integrace dat, dostanete chybovou zprávu s oznámením, že hlavní tým chybí.</span><span class="sxs-lookup"><span data-stu-id="f96d9-194">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="f96d9-195">Přejděte na **Nastavení** &gt; **Zabezpečení** &gt; **Týmy**, vyberte příslušný tým, zvolte **Spravovat role** a vyberte roli s požadovanými oprávněními, například **Správce systému**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-195">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="f96d9-196">Chcete-li zajistit správné výpočty slev pv aplikacích Sales a Finance and Operations, je třeba nastavit položku **Metoda výpočtu slevy**na **Položka řádku**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-196">To ensure correct calculation of discounts in both Sales and Finance and Operations **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="f96d9-197">Přejděte na **Nastavení** &gt; **Správa** &gt; **Nastavení systému** &gt; **Prodej** a ujistěte se, že se používají následující nastavení:</span><span class="sxs-lookup"><span data-stu-id="f96d9-197">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="f96d9-198">Možnost **Použít systém výpočtu ceny** je nastavena na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-198">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="f96d9-199">Pole **Metoda výpočtu slevy** je nastaveno na **Položka řádku**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-199">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-finance-and-operations"></a><span data-ttu-id="f96d9-200">Nastavení v aplikaci Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="f96d9-200">Setup in Finance and Operations</span></span>

- <span data-ttu-id="f96d9-201">Přejděte na **Prodej a marketing** &gt; **Periodické úlohy** &gt; **Vypočítat celkové tržby**a nastavte úlohu, aby se spustila jako dávková úloha.</span><span class="sxs-lookup"><span data-stu-id="f96d9-201">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="f96d9-202">Nastavte možnost **Vypočítat celkové částky prodejních objednávek** na **Ano**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-202">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="f96d9-203">Tento krok je důležitý, protože pouze prodejní objednávky s vypočítanými celkovými tržbami budou synchronizovány do aplikace Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-203">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="f96d9-204">Frekvence dávkové úlohy musí být ve shodě s frekvencí synchronizace prodejní objednávky.</span><span class="sxs-lookup"><span data-stu-id="f96d9-204">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-fin-and-ops---direct-data-integration-project"></a><span data-ttu-id="f96d9-205">Nastavení v prodejních objednávkách (Sales do Fin and Ops) - Přímo v projektu integrace dat</span><span class="sxs-lookup"><span data-stu-id="f96d9-205">Setup in the Sales Orders (Sales to Fin and Ops) - Direct Data integration project</span></span>

- <span data-ttu-id="f96d9-206">Ujistěte se, že existuje požadované mapování pro **Shipto\_country** do **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-206">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="f96d9-207">Můžete ponechat prázdnou výchozí hodnotu v mapě hodnot, abyste nemuseli zadávat zemi pro národní objednávky.</span><span class="sxs-lookup"><span data-stu-id="f96d9-207">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="f96d9-208">Nastavte levou stranu na Prázdné a pravou stranu na požadovanou zemi nebo oblast.</span><span class="sxs-lookup"><span data-stu-id="f96d9-208">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="f96d9-209">Hodnota šablony je mapa hodnot, kde je namapováno několik zemí nebo oblastí a kde prázdná hodnota = USA.</span><span class="sxs-lookup"><span data-stu-id="f96d9-209">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-fin-and-ops-to-sales---direct-data-integration-project"></a><span data-ttu-id="f96d9-210">Nastavení v prodejních objednávkách (Fin and Ops do Sales) - Přímo v projektu integrace dat</span><span class="sxs-lookup"><span data-stu-id="f96d9-210">Setup in the Sales Orders (Fin and Ops to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="f96d9-211">Úloha SalesHeader</span><span class="sxs-lookup"><span data-stu-id="f96d9-211">SalesHeader task</span></span>

- <span data-ttu-id="f96d9-212">Ceník je povinný pro vytvoření objednávek v aplikaci Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-212">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="f96d9-213">Aktualizujte mapu hodnot pro **pricelevelid.name \[Název ceníku\]** do ceníku, použitého v aplikaci Sales podle měny.</span><span class="sxs-lookup"><span data-stu-id="f96d9-213">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="f96d9-214">Výchozí ceník můžete použít pro jednu měnu.</span><span class="sxs-lookup"><span data-stu-id="f96d9-214">You can use the default price list for a single currency.</span></span> <span data-ttu-id="f96d9-215">Popřípadě pokud máte ceníky v několika měnách, můžete použít mapu hodnot.</span><span class="sxs-lookup"><span data-stu-id="f96d9-215">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="f96d9-216">Výchozí hodnota šablony pro  **pricelevelid.name \[Název ceníku\]** je **CRM služba USA (vzorek)**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-216">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="f96d9-217">Úloha SalesLine</span><span class="sxs-lookup"><span data-stu-id="f96d9-217">SalesLine task</span></span>

- <span data-ttu-id="f96d9-218">Ujistěte se, že existuje požadovaná mapa hodnot pro **SalesUnitSymbol** v aplikaci Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="f96d9-218">Make sure that the required value map for **SalesUnitSymbol** in Finance and Operations exists.</span></span>
- <span data-ttu-id="f96d9-219">Ujistěte se, že požadované jednotky jsou definovány v aplikaci Sales.</span><span class="sxs-lookup"><span data-stu-id="f96d9-219">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="f96d9-220">Hodnota šablony, která má mapu hodnoty, je definována pro **SalesUnitSymbol** do **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="f96d9-220">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="f96d9-221">Mapování šablony v integraci dat</span><span class="sxs-lookup"><span data-stu-id="f96d9-221">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="f96d9-222">Pole **Platební podmínky**, **Dopravní podmínky**, **Dodací podmínky**, **způsob dopravy** a **způsob dodání** nejsou součástí výchozího mapování.</span><span class="sxs-lookup"><span data-stu-id="f96d9-222">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="f96d9-223">Pokud chcete tato pole mapovat, je nutné nastavit mapování hodnoty, které je specifické pro data v organizacích, mezi nimiž je entita synchronizována.</span><span class="sxs-lookup"><span data-stu-id="f96d9-223">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="f96d9-224">Na následujícím obrázku je příklad mapování šablony v integraci dat.</span><span class="sxs-lookup"><span data-stu-id="f96d9-224">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="f96d9-225">Mapování ukazuje, jaké informace o poli budou synchronizovány z aplikace Sales do aplikace Finance and Operations nebo naopak.</span><span class="sxs-lookup"><span data-stu-id="f96d9-225">The mapping shows which field information will be synchronized from Sales to Finance and Operations, or from Finance and Operations to Sales.</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderheader"></a><span data-ttu-id="f96d9-226">Prodejní objednávky (Fin and Ops do Sales) - přímo: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="f96d9-226">Sales Orders (Fin and Ops to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="f96d9-227">[![Mapování šablony v integraci dat](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="f96d9-227">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-fin-and-ops-to-sales---direct-orderline"></a><span data-ttu-id="f96d9-228">Prodejní objednávky (Fin and Ops do Sales) - přímo: OrderLine</span><span class="sxs-lookup"><span data-stu-id="f96d9-228">Sales Orders (Fin and Ops to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="f96d9-229">[![Mapování šablony v integraci dat](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="f96d9-229">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderheader"></a><span data-ttu-id="f96d9-230">Prodejní objednávky (Sales do Fin and Ops) - přímo: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="f96d9-230">Sales Orders (Sales to Fin and Ops) - Direct: OrderHeader</span></span>

<span data-ttu-id="f96d9-231">[![Mapování šablony v integraci dat](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="f96d9-231">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-fin-and-ops---direct-orderline"></a><span data-ttu-id="f96d9-232">Prodejní objednávky (Sales do Fin and Ops) - přímo: OrderLine</span><span class="sxs-lookup"><span data-stu-id="f96d9-232">Sales Orders (Sales to Fin and Ops) - Direct: OrderLine</span></span>

<span data-ttu-id="f96d9-233">[![Mapování šablony v integraci dat](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="f96d9-233">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="f96d9-234">Související témata</span><span class="sxs-lookup"><span data-stu-id="f96d9-234">Related topics</span></span>

[<span data-ttu-id="f96d9-235">zpeněžení potenciálního zákazníka</span><span class="sxs-lookup"><span data-stu-id="f96d9-235">Prospect to cash</span></span>](prospect-to-cash.md)

